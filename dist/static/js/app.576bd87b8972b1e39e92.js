webpackJsonp([3],[function(e,t){e.exports=vendor_library},,function(e,t,n){e.exports=n(0)(18)},,function(e,t,n){e.exports=n(0)(75)},function(e,t,n){"use strict";var i={filtermoney:function(e,t){var n=Number(e);if(isNaN(n))return e;if(0===n&&(e="0"),null==e||""==e)return"";var i=e;e<0&&(e=0-e),t=0<=t&&t<=20?t:2;for(var o=(e=parseFloat((e+"").replace(/[^\d\.-]/g,"")).toFixed(t)+"").split(".")[0].split("").reverse(),r=e.split(".")[1],a="",s=0;s<o.length;s++)a+=o[s]+((s+1)%3==0&&s+1!=o.length?",":"");return i<0?"-"+a.split("").reverse().join("")+"."+r:a.split("").reverse().join("")+"."+r},filtermoneyNew:function(e){var o=/\d{1,3}(?=(\d{3})+$)/g;return e.replace(/^(-?)(\d+)((\.\d+)?)$/,function(e,t,n,i){return t+n.replace(o,"$&,")+i}),e},formatDate:function(e,t){var n=new Date(e),i={"M+":n.getMonth()+1,"d+":n.getDate(),"h+":n.getHours(),"m+":n.getMinutes(),"s+":n.getSeconds(),"q+":Math.floor((n.getMonth()+3)/3),S:n.getMilliseconds()};for(var o in/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(""+n.getFullYear()).substr(4-RegExp.$1.length))),i)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?i[o]:("00"+i[o]).substr((""+i[o]).length)));return t}};t.a=i},function(e,t,n){"use strict";var i=n(1),o=n(38),r=n(24),a=[{path:"/",component:function(t){n.e(2).then(function(){var e=[n(43)];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:{title:"首页"}}].concat(r.a);i.a.use(o.default),t.a=new o.default({routes:a})},function(e,t,n){"use strict";var i=n(1),o=n(39),r=n(25),a=n(27),s=n(26);i.a.use(o.default),t.a=new o.default.Store({modules:{billing:r.a,tickets:a.a,pageParams:s.a}})},,function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t){},function(e,t,n){var i=n(20)(n(22),n(32),function(e){n(31)},null,null);e.exports=i.exports},function(e,t){UE.I18N["zh-cn"]={labelMap:{anchor:"锚点",undo:"撤销",redo:"重做",bold:"加粗",indent:"首行缩进",snapscreen:"截图",italic:"斜体",underline:"下划线",strikethrough:"删除线",subscript:"下标",fontborder:"字符边框",superscript:"上标",formatmatch:"格式刷",source:"源代码",blockquote:"引用",pasteplain:"纯文本粘贴模式",selectall:"全选",print:"打印",preview:"预览",horizontal:"分隔线",removeformat:"清除格式",time:"时间",date:"日期",unlink:"取消链接",insertrow:"前插入行",insertcol:"前插入列",mergeright:"右合并单元格",mergedown:"下合并单元格",deleterow:"删除行",deletecol:"删除列",splittorows:"拆分成行",splittocols:"拆分成列",splittocells:"完全拆分单元格",deletecaption:"删除表格标题",inserttitle:"插入标题",mergecells:"合并多个单元格",deletetable:"删除表格",cleardoc:"清空文档",insertparagraphbeforetable:"表格前插入行",insertcode:"代码语言",fontfamily:"字体",fontsize:"字号",paragraph:"段落格式",simpleupload:"单图上传",insertimage:"多图上传",edittable:"表格属性",edittd:"单元格属性",link:"超链接",emotion:"表情",spechars:"特殊字符",searchreplace:"查询替换",map:"Baidu地图",gmap:"Google地图",insertvideo:"视频",help:"帮助",justifyleft:"居左对齐",justifyright:"居右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",forecolor:"字体颜色",backcolor:"背景色",insertorderedlist:"有序列表",insertunorderedlist:"无序列表",fullscreen:"全屏",directionalityltr:"从左向右输入",directionalityrtl:"从右向左输入",rowspacingtop:"段前距",rowspacingbottom:"段后距",pagebreak:"分页",insertframe:"插入Iframe",imagenone:"默认",imageleft:"左浮动",imageright:"右浮动",attachment:"附件",imagecenter:"居中",wordimage:"图片转存",lineheight:"行间距",edittip:"编辑提示",customstyle:"自定义标题",autotypeset:"自动排版",webapp:"百度应用",touppercase:"字母大写",tolowercase:"字母小写",background:"背景",template:"模板",scrawl:"涂鸦",music:"音乐",inserttable:"插入表格",drafts:"从草稿箱加载",charts:"图表"},insertorderedlist:{num:"1,2,3...",num1:"1),2),3)...",num2:"(1),(2),(3)...",cn:"一,二,三....",cn1:"一),二),三)....",cn2:"(一),(二),(三)....",decimal:"1,2,3...","lower-alpha":"a,b,c...","lower-roman":"i,ii,iii...","upper-alpha":"A,B,C...","upper-roman":"I,II,III..."},insertunorderedlist:{circle:"○ 大圆圈",disc:"● 小黑点",square:"■ 小方块 ",dash:"— 破折号",dot:" 。 小圆圈"},paragraph:{p:"段落",h1:"标题 1",h2:"标题 2",h3:"标题 3",h4:"标题 4",h5:"标题 5",h6:"标题 6"},fontfamily:{songti:"宋体",kaiti:"楷体",heiti:"黑体",lishu:"隶书",yahei:"微软雅黑",andaleMono:"andale mono",arial:"arial",arialBlack:"arial black",comicSansMs:"comic sans ms",impact:"impact",timesNewRoman:"times new roman"},customstyle:{tc:"标题居中",tl:"标题居左",im:"强调",hi:"明显强调"},autoupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},simpleupload:{exceedSizeError:"文件大小超出限制",exceedTypeError:"文件格式不允许",jsonEncodeError:"服务器返回格式错误",loading:"正在上传...",loadError:"上传错误",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！"},elementPathTip:"元素路径",wordCountTip:"字数统计",wordCountMsg:"当前已输入{#count}个字符, 您还可以输入{#leave}个字符。 ",wordOverFlowMsg:'<span style="color:red;">字数超出最大允许值，服务器可能拒绝保存！</span>',ok:"确认",cancel:"取消",closeDialog:"关闭对话框",tableDrag:"表格拖动必须引入uiUtils.js文件！",autofloatMsg:"工具栏浮动依赖编辑器UI，您首先需要引入UI文件!",loadconfigError:"获取后台配置项请求出错，上传功能将不能正常使用！",loadconfigFormatError:"后台配置项返回格式出错，上传功能将不能正常使用！",loadconfigHttpError:"请求后台配置项http错误，上传功能将不能正常使用！",snapScreen_plugin:{browserMsg:"仅支持IE浏览器！",callBackErrorMsg:"服务器返回数据有误，请检查配置项之后重试。",uploadErrorMsg:"截图上传失败，请检查服务器端环境! "},insertcode:{as3:"ActionScript 3",bash:"Bash/Shell",cpp:"C/C++",css:"CSS",cf:"ColdFusion","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"HTML",java:"Java",jfx:"JavaFX",js:"JavaScript",pl:"Perl",php:"PHP",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"SQL",vb:"Visual Basic",xml:"XML"},confirmClear:"确定清空当前文档么？",contextMenu:{delete:"删除",selectall:"全选",deletecode:"删除代码",cleardoc:"清空文档",confirmclear:"确定清空当前文档么？",unlink:"删除超链接",paragraph:"段落格式",edittable:"表格属性",aligntd:"单元格对齐方式",aligntable:"表格对齐方式",tableleft:"左浮动",tablecenter:"居中显示",tableright:"右浮动",edittd:"单元格属性",setbordervisible:"设置表格边线可见",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中对齐",justifyjustify:"两端对齐",table:"表格",inserttable:"插入表格",deletetable:"删除表格",insertparagraphbefore:"前插入段落",insertparagraphafter:"后插入段落",deleterow:"删除当前行",deletecol:"删除当前列",insertrow:"前插入行",insertcol:"左插入列",insertrownext:"后插入行",insertcolnext:"右插入列",insertcaption:"插入表格名称",deletecaption:"删除表格名称",inserttitle:"插入表格标题行",deletetitle:"删除表格标题行",inserttitlecol:"插入表格标题列",deletetitlecol:"删除表格标题列",averageDiseRow:"平均分布各行",averageDisCol:"平均分布各列",mergeright:"向右合并",mergeleft:"向左合并",mergedown:"向下合并",mergecells:"合并单元格",splittocells:"完全拆分单元格",splittocols:"拆分成列",splittorows:"拆分成行",tablesort:"表格排序",enablesort:"设置表格可排序",disablesort:"取消表格可排序",reversecurrent:"逆序当前",orderbyasc:"按ASCII字符升序",reversebyasc:"按ASCII字符降序",orderbynum:"按数值大小升序",reversebynum:"按数值大小降序",borderbk:"边框底纹",setcolor:"表格隔行变色",unsetcolor:"取消表格隔行变色",setbackground:"选区背景隔行",unsetbackground:"取消选区背景",redandblue:"红蓝相间",threecolorgradient:"三色渐变",copy:"复制(Ctrl + c)",copymsg:"浏览器不支持,请使用 'Ctrl + c'",paste:"粘贴(Ctrl + v)",pastemsg:"浏览器不支持,请使用 'Ctrl + v'"},copymsg:"浏览器不支持,请使用 'Ctrl + c'",pastemsg:"浏览器不支持,请使用 'Ctrl + v'",anthorMsg:"链接",clearColor:"清空颜色",standardColor:"标准颜色",themeColor:"主题颜色",property:"属性",default:"默认",modify:"修改",justifyleft:"左对齐",justifyright:"右对齐",justifycenter:"居中",justify:"默认",clear:"清除",anchorMsg:"锚点",delete:"删除",clickToUpload:"点击上传",unset:"尚未设置语言文件",t_row:"行",t_col:"列",more:"更多",pasteOpt:"粘贴选项",pasteSourceFormat:"保留源格式",tagFormat:"只保留标签",pasteTextFormat:"只保留文本",autoTypeSet:{mergeLine:"合并空行",delLine:"清除空行",removeFormat:"清除格式",indent:"首行缩进",alignment:"对齐方式",imageFloat:"图片浮动",removeFontsize:"清除字号",removeFontFamily:"清除字体",removeHtml:"清除冗余HTML代码",pasteFilter:"粘贴过滤",run:"执行",symbol:"符号转换",bdc2sb:"全角转半角",tobdc:"半角转全角"},background:{static:{lang_background_normal:"背景设置",lang_background_local:"在线图片",lang_background_set:"选项",lang_background_none:"无背景色",lang_background_colored:"有背景色",lang_background_color:"颜色设置",lang_background_netimg:"网络图片",lang_background_align:"对齐方式",lang_background_position:"精确定位",repeatType:{options:["居中","横向重复","纵向重复","平铺","自定义"]}},noUploadImage:"当前未上传过任何图片！",toggleSelect:"单击可切换选中状态\n原图尺寸: "},insertimage:{static:{lang_tab_remote:"插入图片",lang_tab_upload:"本地上传",lang_tab_online:"在线管理",lang_tab_search:"图片搜索",lang_input_url:"地 址：",lang_input_size:"大 小：",lang_input_width:"宽度",lang_input_height:"高度",lang_input_border:"边 框：",lang_input_vhspace:"边 距：",lang_input_title:"描 述：",lang_input_align:"图片浮动方式：",lang_imgLoading:"　图片加载中……",lang_start_upload:"开始上传",lock:{title:"锁定宽高比例"},searchType:{title:"图片类型",options:["新闻","壁纸","表情","头像"]},searchTxt:{value:"请输入搜索关键词"},searchBtn:{value:"百度一下"},searchReset:{value:"清空搜索"},noneAlign:{title:"无浮动"},leftAlign:{title:"左浮动"},rightAlign:{title:"右浮动"},centerAlign:{title:"居中独占一行"}},uploadSelectFile:"点击选择图片",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",uploadNoPreview:"不能预览",updateStatusReady:"选中_张图片，共_KB。",updateStatusConfirm:"已成功上传_张照片，_张照片上传失败",updateStatusFinish:"共_张（_KB），_张上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错",remoteLockError:"宽高不正确,不能所定比例",numError:"请输入正确的长度或者宽度值！例如：123，400",imageUrlError:"不允许的图片格式或者图片域！",imageLoadError:"图片加载失败！请检查链接地址或网络状态！",searchRemind:"请输入搜索关键词",searchLoading:"图片加载中，请稍后……",searchRetry:" :( ，抱歉，没有找到图片！请重试一次！"},attachment:{static:{lang_tab_upload:"上传附件",lang_tab_online:"在线附件",lang_start_upload:"开始上传",lang_drop_remind:"可以将文件拖到这里，单次最多可选100个文件"},uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"已成功上传_个文件，_个文件上传失败",updateStatusFinish:"共_个（_KB），_个上传成功",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},insertvideo:{static:{lang_tab_insertV:"插入视频",lang_tab_searchV:"搜索视频",lang_tab_uploadV:"上传视频",lang_video_url:"视频网址",lang_video_size:"视频尺寸",lang_videoW:"宽度",lang_videoH:"高度",lang_alignment:"对齐方式",videoSearchTxt:{value:"请输入搜索关键字！"},videoType:{options:["全部","热门","娱乐","搞笑","体育","科技","综艺"]},videoSearchBtn:{value:"百度一下"},videoSearchReset:{value:"清空结果"},lang_input_fileStatus:" 当前未上传文件",startUpload:{style:"background:url(upload.png) no-repeat;"},lang_upload_size:"视频尺寸",lang_upload_width:"宽度",lang_upload_height:"高度",lang_upload_alignment:"对齐方式",lang_format_advice:"建议使用mp4格式."},numError:"请输入正确的数值，如123,400",floatLeft:"左浮动",floatRight:"右浮动",'"default"':"默认",block:"独占一行",urlError:"输入的视频地址有误，请检查后再试！",loading:" &nbsp;视频加载中，请等待……",clickToSelect:"点击选中",goToSource:"访问源视频",noVideo:" &nbsp; &nbsp;抱歉，找不到对应的视频，请重试！",browseFiles:"浏览文件",uploadSuccess:"上传成功!",delSuccessFile:"从成功队列中移除",delFailSaveFile:"移除保存失败文件",statusPrompt:" 个文件已上传！ ",flashVersionError:"当前Flash版本过低，请更新FlashPlayer后重试！",flashLoadingError:"Flash加载失败!请检查路径或网络状态",fileUploadReady:"等待上传……",delUploadQueue:"从上传队列中移除",limitPrompt1:"单次不能选择超过",limitPrompt2:"个文件！请重新选择！",delFailFile:"移除失败文件",fileSizeLimit:"文件大小超出限制！",emptyFile:"空文件无法上传！",fileTypeError:"文件类型不允许！",unknownError:"未知错误！",fileUploading:"上传中，请等待……",cancelUpload:"取消上传",netError:"网络错误",failUpload:"上传失败!",serverIOError:"服务器IO错误！",noAuthority:"无权限！",fileNumLimit:"上传个数限制",failCheck:"验证失败，本次上传被跳过！",fileCanceling:"取消中，请等待……",stopUploading:"上传已停止……",uploadSelectFile:"点击选择文件",uploadAddFile:"继续添加",uploadStart:"开始上传",uploadPause:"暂停上传",uploadContinue:"继续上传",uploadRetry:"重试上传",uploadDelete:"删除",uploadTurnLeft:"向左旋转",uploadTurnRight:"向右旋转",uploadPreview:"预览中",updateStatusReady:"选中_个文件，共_KB。",updateStatusConfirm:"成功上传_个，_个失败",updateStatusFinish:"共_个(_KB)，_个成功上传",updateStatusError:"，_张上传失败。",errorNotSupport:"WebUploader 不支持您的浏览器！如果你使用的是IE浏览器，请尝试升级 flash 播放器。",errorLoadConfig:"后端配置项没有正常加载，上传插件不能正常使用！",errorExceedSize:"文件大小超出",errorFileType:"文件格式不允许",errorInterrupt:"文件传输中断",errorUploadRetry:"上传失败，请重试",errorHttp:"http请求错误",errorServerUpload:"服务器返回出错"},webapp:{tip1:"本功能由百度APP提供，如看到此页面，请各位站长首先申请百度APPKey!",tip2:"申请完成之后请至ueditor.config.js中配置获得的appkey! ",applyFor:"点此申请",anthorApi:"百度API"},template:{static:{lang_template_bkcolor:"背景颜色",lang_template_clear:"保留原有内容",lang_template_select:"选择模板"},blank:"空白文档",blog:"博客文章",resume:"个人简历",richText:"图文混排",sciPapers:"科技论文"},scrawl:{static:{lang_input_previousStep:"上一步",lang_input_nextsStep:"下一步",lang_input_clear:"清空",lang_input_addPic:"添加背景",lang_input_ScalePic:"缩放背景",lang_input_removePic:"删除背景",J_imgTxt:{title:"添加背景图片"}},noScarwl:"尚未作画，白纸一张~",scrawlUpLoading:"涂鸦上传中,别急哦~",continueBtn:"继续",imageError:"糟糕，图片读取失败了！",backgroundUploading:"背景图片上传中,别急哦~"},music:{static:{lang_input_tips:"输入歌手/歌曲/专辑，搜索您感兴趣的音乐！",J_searchBtn:{value:"搜索歌曲"}},emptyTxt:"未搜索到相关音乐结果，请换一个关键词试试。",chapter:"歌曲",singer:"歌手",special:"专辑",listenTest:"试听"},anchor:{static:{lang_input_anchorName:"锚点名字："}},charts:{static:{lang_data_source:"数据源：",lang_chart_format:"图表格式：",lang_data_align:"数据对齐方式",lang_chart_align_same:"数据源与图表X轴Y轴一致",lang_chart_align_reverse:"数据源与图表X轴Y轴相反",lang_chart_title:"图表标题",lang_chart_main_title:"主标题：",lang_chart_sub_title:"子标题：",lang_chart_x_title:"X轴标题：",lang_chart_y_title:"Y轴标题：",lang_chart_tip:"提示文字",lang_cahrt_tip_prefix:"提示文字前缀：",lang_cahrt_tip_description:"仅饼图有效， 当鼠标移动到饼图中相应的块上时，提示框内的文字的前缀",lang_chart_data_unit:"数据单位",lang_chart_data_unit_title:"单位：",lang_chart_data_unit_description:"显示在每个数据点上的数据的单位， 比如： 温度的单位 ℃",lang_chart_type:"图表类型：",lang_prev_btn:"上一个",lang_next_btn:"下一个"}},emotion:{static:{lang_input_choice:"精选",lang_input_Tuzki:"兔斯基",lang_input_BOBO:"BOBO",lang_input_lvdouwa:"绿豆蛙",lang_input_babyCat:"baby猫",lang_input_bubble:"泡泡",lang_input_youa:"有啊"}},gmap:{static:{lang_input_address:"地址",lang_input_search:"搜索",address:{value:"北京"}},searchError:"无法定位到该地址!"},help:{static:{lang_input_about:"关于UEditor",lang_input_shortcuts:"快捷键",lang_input_introduction:"UEditor是由百度web前端研发部开发的所见即所得富文本web编辑器，具有轻量，可定制，注重用户体验等特点。开源基于BSD协议，允许自由使用和修改代码。",lang_Txt_shortcuts:"快捷键",lang_Txt_func:"功能",lang_Txt_bold:"给选中字设置为加粗",lang_Txt_copy:"复制选中内容",lang_Txt_cut:"剪切选中内容",lang_Txt_Paste:"粘贴",lang_Txt_undo:"重新执行上次操作",lang_Txt_redo:"撤销上一次操作",lang_Txt_italic:"给选中字设置为斜体",lang_Txt_underline:"给选中字加下划线",lang_Txt_selectAll:"全部选中",lang_Txt_visualEnter:"软回车",lang_Txt_fullscreen:"全屏"}},insertframe:{static:{lang_input_address:"地址：",lang_input_width:"宽度：",lang_input_height:"高度：",lang_input_isScroll:"允许滚动条：",lang_input_frameborder:"显示框架边框：",lang_input_alignMode:"对齐方式：",align:{title:"对齐方式",options:["默认","左对齐","右对齐","居中"]}},enterAddress:"请输入地址!"},link:{static:{lang_input_text:"文本内容：",lang_input_url:"链接地址：",lang_input_title:"标题：",lang_input_target:"是否在新窗口打开："},validLink:"只支持选中一个链接时生效",httpPrompt:"您输入的超链接中不包含http等协议名称，默认将为您添加http://前缀"},map:{static:{lang_city:"城市",lang_address:"地址",city:{value:"北京"},lang_search:"搜索",lang_dynamicmap:"插入动态地图"},cityMsg:"请选择城市",errorMsg:"抱歉，找不到该位置！"},searchreplace:{static:{lang_tab_search:"查找",lang_tab_replace:"替换",lang_search1:"查找",lang_search2:"查找",lang_replace:"替换",lang_searchReg:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_searchReg1:"支持正则表达式，添加前后斜杠标示为正则表达式，例如“/表达式/”",lang_case_sensitive1:"区分大小写",lang_case_sensitive2:"区分大小写",nextFindBtn:{value:"下一个"},preFindBtn:{value:"上一个"},nextReplaceBtn:{value:"下一个"},preReplaceBtn:{value:"上一个"},repalceBtn:{value:"替换"},repalceAllBtn:{value:"全部替换"}},getEnd:"已经搜索到文章末尾！",getStart:"已经搜索到文章头部",countMsg:"总共替换了{#count}处！"},snapscreen:{static:{lang_showMsg:"截图功能需要首先安装UEditor截图插件！ ",lang_download:"点此下载",lang_step1:"第一步，下载UEditor截图插件并运行安装。",lang_step2:"第二步，插件安装完成后即可使用，如不生效，请重启浏览器后再试！"}},spechars:{static:{},tsfh:"特殊字符",lmsz:"罗马字符",szfh:"数学字符",rwfh:"日文字符",xlzm:"希腊字母",ewzm:"俄文字符",pyzm:"拼音字母",yyyb:"英语音标",zyzf:"其他"},edittable:{static:{lang_tableStyle:"表格样式",lang_insertCaption:"添加表格名称行",lang_insertTitle:"添加表格标题行",lang_insertTitleCol:"添加表格标题列",lang_orderbycontent:"使表格内容可排序",lang_tableSize:"自动调整表格尺寸",lang_autoSizeContent:"按表格文字自适应",lang_autoSizePage:"按页面宽度自适应",lang_example:"示例",lang_borderStyle:"表格边框",lang_color:"颜色:"},captionName:"表格名称",titleName:"标题",cellsName:"内容",errorMsg:"有合并单元格，不可排序"},edittip:{static:{lang_delRow:"删除整行",lang_delCol:"删除整列"}},edittd:{static:{lang_tdBkColor:"背景颜色:"}},formula:{static:{}},wordimage:{static:{lang_resave:"转存步骤",uploadBtn:{src:"upload.png",alt:"上传"},clipboard:{style:"background: url(copy.png) -153px -1px no-repeat;"},lang_step:"1、点击顶部复制按钮，将地址复制到剪贴板；2、点击添加照片按钮，在弹出的对话框中使用Ctrl+V粘贴地址；3、点击打开后选择图片上传流程。"},fileType:"图片",flashError:"FLASH初始化失败，请检查FLASH插件是否正确安装！",netError:"网络连接错误，请重试！",copySuccess:"图片地址已经复制！",flashI18n:{}},autosave:{saving:"保存中...",success:"本地保存成功"}}},function(module,exports){!function(){function X(e,t,n){var i;return t=t.toLowerCase(),(i=e.__allListeners||n&&(e.__allListeners={}))&&(i[t]||n&&(i[t]=[]))}function Y(e,t,n,i,o,r){var a;for(!(i=i&&e[t])&&(i=e[n]);!i&&(a=(a||e).parentNode);){if("BODY"==a.tagName||r&&!r(a))return null;i=a[n]}return i&&o&&!o(i)?Y(i,t,n,!1,o):i}UEDITOR_CONFIG=window.UEDITOR_CONFIG||{};var t=window.baidu||{};window.baidu=t,window.UE=t.editor=window.UE||{},UE.plugins={},UE.commands={},UE.instants={},UE.I18N={},UE._customizeUI={},UE.version="1.4.3";var M=UE.dom={},r=UE.browser=function(){var e=navigator.userAgent.toLowerCase(),t=window.opera,n={ie:/(msie\s|trident.*rv:)([\w.]+)/.test(e),opera:!!t&&t.version,webkit:-1<e.indexOf(" applewebkit/"),mac:-1<e.indexOf("macintosh"),quirks:"BackCompat"==document.compatMode};n.gecko="Gecko"==navigator.product&&!n.webkit&&!n.opera&&!n.ie;var i=0;if(n.ie){i=e.match(/(?:msie\s([\w.]+))/);var o=e.match(/(?:trident.*rv:([\w.]+))/);i=i&&o&&i[1]&&o[1]?Math.max(1*i[1],1*o[1]):i&&i[1]?1*i[1]:o&&o[1]?1*o[1]:0;n.ie11Compat=11==document.documentMode,n.ie9Compat=9==document.documentMode,n.ie8=!!document.documentMode,n.ie8Compat=8==document.documentMode,n.ie7Compat=7==i&&!document.documentMode||7==document.documentMode,n.ie6Compat=i<7||n.quirks,n.ie9above=8<i,n.ie9below=i<9,n.ie11above=10<i,n.ie11below=i<11}return n.gecko&&(o=e.match(/rv:([\d\.]+)/))&&(i=1e4*(o=o[1].split("."))[0]+100*(o[1]||0)+1*(o[2]||0)),/chrome\/(\d+\.\d)/i.test(e)&&(n.chrome=+RegExp.$1),/(\d+\.\d)?(?:\.\d)?\s+safari\/?(\d+\.\d+)?/i.test(e)&&!/chrome/i.test(e)&&(n.safari=+(RegExp.$1||RegExp.$2)),n.opera&&(i=parseFloat(t.version())),n.webkit&&(i=parseFloat(e.match(/ applewebkit\/(\d+)/)[1])),n.version=i,n.isCompatible=!n.mobile&&(n.ie&&6<=i||n.gecko&&10801<=i||n.opera&&9.5<=i||n.air&&1<=i||n.webkit&&522<=i||!1),n}(),J=r.ie,ma=r.opera,p=UE.utils={each:function(e,t,n){if(null!=e)if(e.length===+e.length){for(var i=0,o=e.length;i<o;i++)if(!1===t.call(n,e[i],i,e))return!1}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,e[i],i,e))return!1},makeInstance:function(e){var t=new Function;return t.prototype=e,e=new t,t.prototype=null,e},extend:function(e,t,n){if(t)for(var i in t)n&&e.hasOwnProperty(i)||(e[i]=t[i]);return e},extend2:function(e){for(var t=arguments,n=1;n<t.length;n++){var i,o=t[n];for(i in o)e.hasOwnProperty(i)||(e[i]=o[i])}return e},inherits:function(e,t){var n=e.prototype,i=p.makeInstance(t.prototype);return p.extend(i,n,!0),(e.prototype=i).constructor=e},bind:function(e,t){return function(){return e.apply(t,arguments)}},defer:function(e,t,n){var i;return function(){n&&clearTimeout(i),i=setTimeout(e,t)}},indexOf:function(e,n,i){var o=-1;return i=this.isNumber(i)?i:0,this.each(e,function(e,t){if(i<=t&&e===n)return o=t,!1}),o},removeItem:function(e,t){for(var n=0,i=e.length;n<i;n++)e[n]===t&&(e.splice(n,1),n--)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},listToMap:function(e){if(!e)return{};e=p.isArray(e)?e:e.split(",");for(var t,n=0,i={};t=e[n++];)i[t.toUpperCase()]=i[t]=1;return i},unhtml:function(e,t){return e?e.replace(t||/[&<">'](?:(amp|lt|quot|gt|#39|nbsp|#\d+);)?/g,function(e,t){return t?e:{"<":"&lt;","&":"&amp;",'"':"&quot;",">":"&gt;","'":"&#39;"}[e]}):""},html:function(e){return e?e.replace(/&((g|l|quo)t|amp|#39|nbsp);/g,function(e){return{"&lt;":"<","&amp;":"&","&quot;":'"',"&gt;":">","&#39;":"'","&nbsp;":" "}[e]}):""},cssStyleToDomStyle:(cc=document.createElement("div").style,dc={float:null!=cc.cssFloat?"cssFloat":null!=cc.styleFloat?"styleFloat":"float"},function(e){return dc[e]||(dc[e]=e.toLowerCase().replace(/-./g,function(e){return e.charAt(1).toUpperCase()}))}),loadFile:function(){function a(e,t){try{for(var n,i=0;n=s[i++];)if(n.doc===e&&n.url==(t.src||t.href))return n}catch(e){return null}}var s=[];return function(t,n,e){var i=a(t,n);if(i)i.ready?e&&e():i.funs.push(e);else if(s.push({doc:t,url:n.src||n.href,funs:[e]}),t.body){if(!n.id||!t.getElementById(n.id)){var o=t.createElement(n.tag);for(r in delete n.tag,n)o.setAttribute(r,n[r]);o.onload=o.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(0<(i=a(t,n)).funs.length){i.ready=1;for(var e;e=i.funs.pop();)e()}o.onload=o.onreadystatechange=null}},o.onerror=function(){throw Error("The load "+(n.href||n.src)+" fails,check the url settings of file ueditor.config.js ")},t.getElementsByTagName("head")[0].appendChild(o)}}else{for(var r in e=[],n)"tag"!=r&&e.push(r+'="'+n[r]+'"');t.write("<"+n.tag+" "+e.join(" ")+" ></"+n.tag+">")}}}(),isEmptyObject:function(e){if(null==e)return!0;if(this.isArray(e)||this.isString(e))return 0===e.length;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},fixColor:function(e,t){if(/color/i.test(e)&&/rgba?/.test(t)){var n=t.split(",");if(3<n.length)return"";t="#";for(var i,o=0;i=n[o++];)t+=1==(i=parseInt(i.replace(/[^\d]/gi,""),10).toString(16)).length?"0"+i:i;t=t.toUpperCase()}return t},optCss:function(e){function t(e,t){if(!e)return"";var n=e.top,i=e.bottom,o=e.left,r=e.right,a="";if(n&&o&&i&&r)a+=";"+t+":"+(n==i&&i==o&&o==r?n:n==i&&o==r?n+" "+o:o==r?n+" "+o+" "+i:n+" "+r+" "+i+" "+o)+";";else for(var s in e)a+=";"+t+"-"+s+":"+e[s]+";";return a}var o,r;return e=e.replace(/(padding|margin|border)\-([^:]+):([^;]+);?/gi,function(e,t,n,i){if(1==i.split(" ").length)switch(t){case"padding":return!o&&(o={}),o[n]=i,"";case"margin":return!r&&(r={}),r[n]=i,"";case"border":return"initial"==i?"":e}return e}),(e+=t(o,"padding")+t(r,"margin")).replace(/^[ \n\r\t;]*|[ \n\r\t]*$/,"").replace(/;([ \n\r\t]+)|\1;/g,";").replace(/(&((l|g)t|quot|#39))?;{2,}/g,function(e,t){return t?t+";;":";"})},clone:function(e,t){var n;for(var i in t=t||{},e)e.hasOwnProperty(i)&&("object"==typeof(n=e[i])?(t[i]=p.isArray(n)?[]:{},p.clone(e[i],t[i])):t[i]=n);return t},transUnitToPx:function(i){if(!/(pt|cm)/.test(i))return i;var o;switch(i.replace(/([\d.]+)(\w+)/,function(e,t,n){i=t,o=n}),o){case"cm":i=25*parseFloat(i);break;case"pt":i=Math.round(96*parseFloat(i)/72)}return i+(i?"px":"")},domReady:function(){function i(e){for(e.isReady=!0;e=o.pop();e());}var o=[];return function(e,t){var n=(t=t||window).document;e&&o.push(e),"complete"===n.readyState?i(n):(n.isReady&&i(n),r.ie&&11!=r.version?(function(){if(!n.isReady){try{n.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}i(n)}}(),t.attachEvent("onload",function(){i(n)})):(n.addEventListener("DOMContentLoaded",function(){n.removeEventListener("DOMContentLoaded",arguments.callee,!1),i(n)},!1),t.addEventListener("load",function(){i(n)},!1)))}}(),cssRule:r.ie&&11!=r.version?function(e,t,n){var i,o;if(void 0===t||t&&t.nodeType&&9==t.nodeType){if(void 0!==(o=(i=(n=t&&t.nodeType&&9==t.nodeType?t:n||document).indexList||(n.indexList={}))[e]))return n.styleSheets[o].cssText}else{if(o=(i=(n=n||document).indexList||(n.indexList={}))[e],""===t)return void 0!==o&&(n.styleSheets[o].cssText="",delete i[e],!0);void 0!==o?sheetStyle=n.styleSheets[o]:(sheetStyle=n.createStyleSheet("",o=n.styleSheets.length),i[e]=o),sheetStyle.cssText=t}}:function(e,t,n){var i;return void 0===t||t&&t.nodeType&&9==t.nodeType?(i=(n=t&&t.nodeType&&9==t.nodeType?t:n||document).getElementById(e))?i.innerHTML:void 0:(i=(n=n||document).getElementById(e),""===t?!!i&&(i.parentNode.removeChild(i),!0):void(i?i.innerHTML=t:((i=n.createElement("style")).id=e,i.innerHTML=t,n.getElementsByTagName("head")[0].appendChild(i))))},sort:function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var n=0,i=e.length;n<i;n++)for(var o=n,r=e.length;o<r;o++)if(0<t(e[n],e[o])){var a=e[n];e[n]=e[o],e[o]=a}return e},serializeParam:function(e){var t,n=[];for(t in e)if("method"!=t&&"timeout"!=t&&"async"!=t)if("function"!=(typeof e[t]).toLowerCase()&&"object"!=(typeof e[t]).toLowerCase())n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));else if(p.isArray(e[t]))for(var i=0;i<e[t].length;i++)n.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e[t][i]));return n.join("&")},formatUrl:function(e){return(e=(e=(e=(e=e.replace(/&&/g,"&")).replace(/\?&/g,"?")).replace(/&$/g,"")).replace(/&#/g,"#")).replace(/&+/g,"&")},isCrossDomainUrl:function(e){var t=document.createElement("a");return t.href=e,r.ie&&(t.href=t.href),!(t.protocol==location.protocol&&t.hostname==location.hostname&&(t.port==location.port||"80"==t.port&&""==location.port||""==t.port&&"80"==location.port))},clearEmptyAttrs:function(e){for(var t in e)""===e[t]&&delete e[t];return e},str2json:function(e){return p.isString(e)?window.JSON?JSON.parse(e):new Function("return "+p.trim(e||""))():null},json2str:function(){if(window.JSON)return JSON.stringify;var s=function(e){return e<10?"0"+e:e},l={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};return function(e){switch(typeof e){case"undefined":return"undefined";case"number":return isFinite(e)?String(e):"null";case"string":return/["\\\x00-\x1f]/.test(a=e)&&(a=a.replace(/["\\\x00-\x1f]/g,function(e){var t=l[e];return t||(t=e.charCodeAt(),"\\u00"+Math.floor(t/16).toString(16)+(t%16).toString(16))})),'"'+a+'"';case"boolean":return String(e);default:if(null===e)return"null";if(p.isArray(e)){var t,n,i,o=["["],r=e.length;for(n=0;n<r;n++)switch(i=e[n],typeof i){case"undefined":case"function":case"unknown":break;default:t&&o.push(","),o.push(p.json2str(i)),t=1}return o.push("]"),o.join("")}if(p.isDate(e))return'"'+e.getFullYear()+"-"+s(e.getMonth()+1)+"-"+s(e.getDate())+"T"+s(e.getHours())+":"+s(e.getMinutes())+":"+s(e.getSeconds())+'"';for(r in t=["{"],n=p.json2str,e)if(Object.prototype.hasOwnProperty.call(e,r))switch(i=e[r],typeof i){case"undefined":case"unknown":case"function":break;default:o&&t.push(","),o=1,t.push(n(r)+":"+n(i))}return t.push("}"),t.join("")}var a}}()},cc,dc;p.each("String Function Array Number RegExp Object Date".split(" "),function(t){UE.utils["is"+t]=function(e){return Object.prototype.toString.apply(e)=="[object "+t+"]"}});var ba=UE.EventBase=function(){};ba.prototype={addListener:function(e,t){e=p.trim(e).split(/\s+/);for(var n,i=0;n=e[i++];)X(this,n,!0).push(t)},on:function(e,t){return this.addListener(e,t)},off:function(e,t){return this.removeListener(e,t)},trigger:function(){return this.fireEvent.apply(this,arguments)},removeListener:function(e,t){e=p.trim(e).split(/\s+/);for(var n,i=0;n=e[i++];)p.removeItem(X(this,n)||[],t)},fireEvent:function(){for(var e,t=arguments[0],n=(t=p.trim(t).split(" "),0);e=t[n++];){var i,o,r,a=X(this,e);if(a)for(r=a.length;r--;)if(a[r]){if(!0===(o=a[r].apply(this,arguments)))return o;void 0!==o&&(i=o)}(o=this["on"+e.toLowerCase()])&&(i=o.apply(this,arguments))}return i}};var w=M.dtd=function(){function e(e){for(var t in e)e[t.toUpperCase()]=e[t];return e}var t=p.extend2,n=e({isindex:1,fieldset:1}),i=e({input:1,button:1,select:1,textarea:1,label:1}),o=t(e({a:1}),i),r=t({iframe:1},o),a=e({hr:1,ul:1,menu:1,div:1,blockquote:1,noscript:1,table:1,center:1,address:1,dir:1,pre:1,h5:1,dl:1,h4:1,noframes:1,h6:1,ol:1,h1:1,h3:1,h2:1}),s=e({ins:1,del:1,script:1,style:1}),l=t(e({b:1,acronym:1,bdo:1,var:1,"#":1,abbr:1,code:1,br:1,i:1,cite:1,kbd:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,dfn:1,span:1}),s),d=t(e({sub:1,img:1,embed:1,object:1,sup:1,basefont:1,map:1,applet:1,font:1,big:1,small:1}),l),c=t(e({p:1}),d),u=(i=t(e({iframe:1}),d,i),d=e({img:1,embed:1,noscript:1,br:1,kbd:1,center:1,button:1,basefont:1,h5:1,h4:1,samp:1,h6:1,ol:1,h1:1,h3:1,h2:1,form:1,font:1,"#":1,select:1,menu:1,ins:1,abbr:1,label:1,code:1,table:1,script:1,cite:1,input:1,iframe:1,strong:1,textarea:1,noframes:1,big:1,small:1,span:1,hr:1,sub:1,bdo:1,var:1,div:1,object:1,sup:1,strike:1,dir:1,map:1,dl:1,applet:1,del:1,isindex:1,fieldset:1,ul:1,b:1,acronym:1,a:1,blockquote:1,i:1,u:1,s:1,tt:1,address:1,q:1,pre:1,p:1,em:1,dfn:1}),t(e({a:0}),i)),f=e({tr:1}),m=e({"#":1}),h=t(e({param:1}),d),g=t(e({form:1}),n,r,a,c),b=e({li:1,ol:1,ul:1}),v=e({style:1,script:1}),y=e({base:1,link:1,meta:1,title:1}),C=(v=t(y,v),e({head:1,body:1})),x=e({html:1}),N=e({address:1,blockquote:1,center:1,dir:1,div:1,dl:1,fieldset:1,form:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,hr:1,isindex:1,menu:1,noframes:1,ol:1,p:1,pre:1,table:1,ul:1}),w=e({area:1,base:1,basefont:1,br:1,col:1,command:1,dialog:1,embed:1,hr:1,img:1,input:1,isindex:1,keygen:1,link:1,meta:1,param:1,source:1,track:1,wbr:1});return e({$nonBodyContent:t(x,C,y),$block:N,$inline:u,$inlineWithA:t(e({a:1}),u),$body:t(e({script:1,style:1}),N),$cdata:e({script:1,style:1}),$empty:w,$nonChild:e({iframe:1,textarea:1}),$listItem:e({dd:1,dt:1,li:1}),$list:e({ul:1,ol:1,dl:1}),$isNotEmpty:e({table:1,ul:1,ol:1,dl:1,iframe:1,area:1,base:1,col:1,hr:1,img:1,embed:1,input:1,link:1,meta:1,param:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1}),$removeEmpty:e({a:1,abbr:1,acronym:1,address:1,b:1,bdo:1,big:1,cite:1,code:1,del:1,dfn:1,em:1,font:1,i:1,ins:1,label:1,kbd:1,q:1,s:1,samp:1,small:1,span:1,strike:1,strong:1,sub:1,sup:1,tt:1,u:1,var:1}),$removeEmptyBlock:e({p:1,div:1}),$tableContent:e({caption:1,col:1,colgroup:1,tbody:1,td:1,tfoot:1,th:1,thead:1,tr:1,table:1}),$notTransContent:e({pre:1,script:1,style:1,textarea:1}),html:C,head:v,style:m,script:m,body:g,base:{},link:{},meta:{},title:m,col:{},tr:e({td:1,th:1}),img:{},embed:{},colgroup:e({thead:1,col:1,tbody:1,tr:1,tfoot:1}),noscript:g,td:g,br:{},th:g,center:g,kbd:u,button:t(c,a),basefont:{},h5:u,h4:u,samp:u,h6:u,ol:b,h1:u,h3:u,option:m,h2:u,form:t(n,r,a,c),select:e({optgroup:1,option:1}),font:u,ins:u,menu:b,abbr:u,label:u,table:e({thead:1,col:1,tbody:1,tr:1,colgroup:1,caption:1,tfoot:1}),code:u,tfoot:f,cite:u,li:g,input:{},iframe:g,strong:u,textarea:m,noframes:g,big:u,small:u,span:e({"#":1,br:1,b:1,strong:1,u:1,i:1,em:1,sub:1,sup:1,strike:1,span:1}),hr:u,dt:u,sub:u,optgroup:e({option:1}),param:{},bdo:u,var:u,div:g,object:h,sup:u,dd:g,strike:u,area:{},dir:b,map:t(e({area:1,form:1,p:1}),n,s,a),applet:h,dl:e({dt:1,dd:1}),del:u,isindex:{},fieldset:t(e({legend:1}),d),thead:f,ul:b,acronym:u,b:u,a:t(e({a:1}),i),blockquote:t(e({td:1,tr:1,tbody:1,li:1}),g),caption:u,i:u,u:u,tbody:f,s:u,address:t(r,c),tt:u,legend:u,q:u,pre:t(l,o),p:t(e({a:1}),u),em:u,dfn:u})}(),ka=J&&r.version<9?{tabindex:"tabIndex",readonly:"readOnly",for:"htmlFor",class:"className",maxlength:"maxLength",cellspacing:"cellSpacing",cellpadding:"cellPadding",rowspan:"rowSpan",colspan:"colSpan",usemap:"useMap",frameborder:"frameBorder"}:{tabindex:"tabIndex",readonly:"readOnly"},oa=p.listToMap("-webkit-box -moz-box block list-item table table-row-group table-header-group table-footer-group table-row table-column-group table-column table-cell table-caption".split(" ")),f=M.domUtils={NODE_ELEMENT:1,NODE_DOCUMENT:9,NODE_TEXT:3,NODE_COMMENT:8,NODE_DOCUMENT_FRAGMENT:11,POSITION_IDENTICAL:0,POSITION_DISCONNECTED:1,POSITION_FOLLOWING:2,POSITION_PRECEDING:4,POSITION_IS_CONTAINED:8,POSITION_CONTAINS:16,fillChar:J&&"6"==r.version?"\ufeff":"​",keys:{8:1,46:1,16:1,17:1,18:1,37:1,38:1,39:1,40:1,13:1},getPosition:function(e,t){if(e===t)return 0;var n,i=[e],o=[t];for(n=e;n=n.parentNode;){if(n===t)return 10;i.push(n)}for(n=t;n=n.parentNode;){if(n===e)return 20;o.push(n)}if(i.reverse(),o.reverse(),i[0]!==o[0])return 1;for(n=-1;i[++n]===o[n];);for(e=i[n],t=o[n];e=e.nextSibling;)if(e===t)return 4;return 2},getNodeIndex:function(e,t){for(var n=e,i=0;n=n.previousSibling;)t&&3==n.nodeType?n.nodeType!=n.nextSibling.nodeType&&i++:i++;return i},inDoc:function(e,t){return 10==f.getPosition(e,t)},findParent:function(e,t,n){if(e&&!f.isBody(e))for(e=n?e:e.parentNode;e;){if(!t||t(e)||f.isBody(e))return t&&!t(e)&&f.isBody(e)?null:e;e=e.parentNode}return null},findParentByTagName:function(e,t,n,i){return t=p.listToMap(p.isArray(t)?t:[t]),f.findParent(e,function(e){return t[e.tagName]&&!(i&&i(e))},n)},findParents:function(e,t,n,i){for(t=t&&(n&&n(e)||!n)?[e]:[];e=f.findParent(e,n);)t.push(e);return i?t:t.reverse()},insertAfter:function(e,t){return e.nextSibling?e.parentNode.insertBefore(t,e.nextSibling):e.parentNode.appendChild(t)},remove:function(e,t){var n,i=e.parentNode;if(i){if(t&&e.hasChildNodes())for(;n=e.firstChild;)i.insertBefore(n,e);i.removeChild(e)}return e},getNextDomNode:function(e,t,n,i){return Y(e,"firstChild","nextSibling",t,n,i)},getPreDomNode:function(e,t,n,i){return Y(e,"lastChild","previousSibling",t,n,i)},isBookmarkNode:function(e){return 1==e.nodeType&&e.id&&/^_baidu_bookmark_/i.test(e.id)},getWindow:function(e){return(e=e.ownerDocument||e).defaultView||e.parentWindow},getCommonAncestor:function(e,t){if(e===t)return e;for(var n=[e],i=[t],o=e,r=-1;o=o.parentNode;){if(o===t)return o;n.push(o)}for(o=t;o=o.parentNode;){if(o===e)return o;i.push(o)}for(n.reverse(),i.reverse();n[++r]===i[r];);return 0==r?null:n[r-1]},clearEmptySibling:function(e,t,n){function i(e,t){for(var n;e&&!f.isBookmarkNode(e)&&(f.isEmptyInlineElement(e)||!new RegExp("[^\t\n\r"+f.fillChar+"]").test(e.nodeValue));)n=e[t],f.remove(e),e=n}!t&&i(e.nextSibling,"nextSibling"),!n&&i(e.previousSibling,"previousSibling")},split:function(e,t){var n=e.ownerDocument;if(r.ie&&t==e.nodeValue.length){var i=n.createTextNode("");return f.insertAfter(e,i)}return i=e.splitText(t),r.ie8&&(n=n.createTextNode(""),f.insertAfter(i,n),f.remove(n)),i},isWhitespace:function(e){return!new RegExp("[^ \t\n\r"+f.fillChar+"]").test(e.nodeValue)},getXY:function(e){for(var t=0,n=0;e.offsetParent;)n+=e.offsetTop,t+=e.offsetLeft,e=e.offsetParent;return{x:t,y:n}},on:function(e,t,n){var i=p.isArray(t)?t:p.trim(t).split(/\s+/),o=i.length;if(o)for(;o--;)if(t=i[o],e.addEventListener)e.addEventListener(t,n,!1);else{n._d||(n._d={els:[]});var r=t+n.toString(),a=p.indexOf(n._d.els,e);n._d[r]&&-1!=a||(-1==a&&n._d.els.push(e),n._d[r]||(n._d[r]=function(e){return n.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,n._d[r]))}e=null},un:function(e,t,n){var i=p.isArray(t)?t:p.trim(t).split(/\s+/),o=i.length;if(o)for(;o--;)if(t=i[o],e.removeEventListener)e.removeEventListener(t,n,!1);else{var r=t+n.toString();try{e.detachEvent("on"+t,n._d?n._d[r]:n)}catch(e){}n._d&&n._d[r]&&(-1!=(t=p.indexOf(n._d.els,e))&&n._d.els.splice(t,1),0==n._d.els.length&&delete n._d[r])}},isSameElement:function(e,t){if(e.tagName!=t.tagName)return!1;var n=e.attributes,i=t.attributes;if(!J&&n.length!=i.length)return!1;for(var o,r,a=0,s=0,l=0;o=n[l++];){if("style"==o.nodeName){if(o.specified&&a++,f.isSameStyle(e,t))continue;return!1}if(J){if(!o.specified)continue;a++,r=i.getNamedItem(o.nodeName)}else r=t.attributes[o.nodeName];if(!r.specified||o.nodeValue!=r.nodeValue)return!1}if(J){for(l=0;r=i[l++];)r.specified&&s++;if(a!=s)return!1}return!0},isSameStyle:function(e,t){var n,i=e.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":"),o=t.style.cssText.replace(/( ?; ?)/g,";").replace(/( ?: ?)/g,":");if(r.opera){if(i=e.style,o=t.style,i.length!=o.length)return!1;for(var a in i)if(!/^(\d+|csstext)$/i.test(a)&&i[a]!=o[a])return!1;return!0}if(!i||!o)return i==o;if(i=i.split(";"),o=o.split(";"),i.length!=o.length)return!1;for(a=0;n=i[a++];)if(-1==p.indexOf(o,n))return!1;return!0},isBlockElm:function(e){return 1==e.nodeType&&(w.$block[e.tagName]||oa[f.getComputedStyle(e,"display")])&&!w.$nonChild[e.tagName]},isBody:function(e){return e&&1==e.nodeType&&"body"==e.tagName.toLowerCase()},breakParent:function(e,t){var n,i,o,r=e,a=e;do{for(r=r.parentNode,o=i?((n=r.cloneNode(!1)).appendChild(i),i=n,(n=r.cloneNode(!1)).appendChild(o),n):(i=r.cloneNode(!1)).cloneNode(!1);n=a.previousSibling;)i.insertBefore(n,i.firstChild);for(;n=a.nextSibling;)o.appendChild(n);a=r}while(t!==r);return(n=t.parentNode).insertBefore(i,t),n.insertBefore(o,t),n.insertBefore(e,o),f.remove(t),e},isEmptyInlineElement:function(e){if(1!=e.nodeType||!w.$removeEmpty[e.tagName])return 0;for(e=e.firstChild;e;){if(f.isBookmarkNode(e)||1==e.nodeType&&!f.isEmptyInlineElement(e)||3==e.nodeType&&!f.isWhitespace(e))return 0;e=e.nextSibling}return 1},trimWhiteTextNode:function(n){function e(e){for(var t;(t=n[e])&&3==t.nodeType&&f.isWhitespace(t);)n.removeChild(t)}e("firstChild"),e("lastChild")},mergeChild:function(e,t,n){t=f.getElementsByTagName(e,e.tagName.toLowerCase());for(var i,o=0;i=t[o++];)if(i.parentNode&&!f.isBookmarkNode(i))if("span"==i.tagName.toLowerCase()){if(e===i.parentNode&&(f.trimWhiteTextNode(e),1==e.childNodes.length)){e.style.cssText=i.style.cssText+";"+e.style.cssText,f.remove(i,!0);continue}if(i.style.cssText=e.style.cssText+";"+i.style.cssText,n)if(a=n.style)for(var r,a=a.split(";"),s=0;r=a[s++];)i.style[p.cssStyleToDomStyle(r.split(":")[0])]=r.split(":")[1];f.isSameStyle(i,e)&&f.remove(i,!0)}else f.isSameElement(e,i)&&f.remove(i,!0)},getElementsByTagName:function(e,t,n){if(n&&p.isString(n)){var i=n;n=function(e){return f.hasClass(e,i)}}t=p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var o,r=[],a=0;o=t[a++];){o=e.getElementsByTagName(o);for(var s,l=0;s=o[l++];)n&&!n(s)||r.push(s)}return r},mergeToParent:function(e){for(var t=e.parentNode;t&&w.$removeEmpty[t.tagName];){if(t.tagName==e.tagName||"A"==t.tagName){if(f.trimWhiteTextNode(t),"SPAN"==t.tagName&&!f.isSameStyle(t,e)||"A"==t.tagName&&"SPAN"==e.tagName){if(1<t.childNodes.length||t!==e.parentNode){e.style.cssText=t.style.cssText+";"+e.style.cssText,t=t.parentNode;continue}t.style.cssText+=";"+e.style.cssText,"A"==t.tagName&&(t.style.textDecoration="underline")}if("A"!=t.tagName){t===e.parentNode&&f.remove(e,!0);break}}t=t.parentNode}},mergeSibling:function(e,t,n){function i(e,t,n){var i;if((i=n[e])&&!f.isBookmarkNode(i)&&1==i.nodeType&&f.isSameElement(n,i)){for(;i.firstChild;)"firstChild"==t?n.insertBefore(i.lastChild,n.firstChild):n.appendChild(i.firstChild);f.remove(i)}}!t&&i("previousSibling","firstChild",e),!n&&i("nextSibling","lastChild",e)},unSelectable:J&&r.ie9below||r.opera?function(e){e.onselectstart=function(){return!1},e.onclick=e.onkeyup=e.onkeydown=function(){return!1},e.unselectable="on",e.setAttribute("unselectable","on");for(var t,n=0;t=e.all[n++];)switch(t.tagName.toLowerCase()){case"iframe":case"textarea":case"input":case"select":break;default:t.unselectable="on",e.setAttribute("unselectable","on")}}:function(e){e.style.MozUserSelect=e.style.webkitUserSelect=e.style.msUserSelect=e.style.KhtmlUserSelect="none"},removeAttributes:function(e,t){t=p.isArray(t)?t:p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0;n=t[i++];){switch(n=ka[n]||n){case"className":e[n]="";break;case"style":e.style.cssText="";var o=e.getAttributeNode("style");!r.ie&&o&&e.removeAttributeNode(o)}e.removeAttribute(n)}},createElement:function(e,t,n){return f.setAttributes(e.createElement(t),n)},setAttributes:function(e,t){for(var n in t)if(t.hasOwnProperty(n)){var i=t[n];switch(n){case"class":e.className=i;break;case"style":e.style.cssText=e.style.cssText+";"+i;break;case"innerHTML":e[n]=i;break;case"value":e.value=i;break;default:e.setAttribute(ka[n]||n,i)}}return e},getComputedStyle:function(e,t){if(-1<"width height top left".indexOf(t))return e["offset"+t.replace(/^\w/,function(e){return e.toUpperCase()})]+"px";if(3==e.nodeType&&(e=e.parentNode),r.ie&&r.version<9&&"font-size"==t&&!e.style.fontSize&&!w.$empty[e.tagName]&&!w.$nonChild[e.tagName]){var n=e.ownerDocument.createElement("span");n.style.cssText="padding:0;border:0;font-family:simsun;",n.innerHTML=".",e.appendChild(n);var i=n.offsetHeight;return e.removeChild(n),n=null,i+"px"}try{n=f.getStyle(e,t)||(window.getComputedStyle?f.getWindow(e).getComputedStyle(e,"").getPropertyValue(t):(e.currentStyle||e.style)[p.cssStyleToDomStyle(t)])}catch(e){return""}return p.transUnitToPx(p.fixColor(t,n))},removeClasses:function(e,t){t=p.isArray(t)?t:p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)o=o.replace(new RegExp("\\b"+n+"\\b"),"");(o=p.trim(o).replace(/[ ]{2,}/g," "))?e.className=o:f.removeAttributes(e,["class"])},addClass:function(e,t){if(e){t=p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)new RegExp("\\b"+n+"\\b").test(o)||(o+=" "+n);e.className=p.trim(o)}},hasClass:function(e,t){if(p.isRegExp(t))return t.test(e.className);t=p.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)if(!new RegExp("\\b"+n+"\\b","i").test(o))return!1;return i-1==t.length},preventDefault:function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},removeStyle:function(e,t){r.ie?("color"==t&&(t="(^|;)"+t),e.style.cssText=e.style.cssText.replace(new RegExp(t+"[^:]*:[^;]+;?","ig"),"")):e.style.removeProperty?e.style.removeProperty(t):e.style.removeAttribute(p.cssStyleToDomStyle(t)),e.style.cssText||f.removeAttributes(e,["style"])},getStyle:function(e,t){var n=e.style[p.cssStyleToDomStyle(t)];return p.fixColor(t,n)},setStyle:function(e,t,n){e.style[p.cssStyleToDomStyle(t)]=n,p.trim(e.style.cssText)||this.removeAttributes(e,"style")},setStyles:function(e,t){for(var n in t)t.hasOwnProperty(n)&&f.setStyle(e,n,t[n])},removeDirtyAttr:function(e){for(var t,n=0,i=e.getElementsByTagName("*");t=i[n++];)t.removeAttribute("_moz_dirty");e.removeAttribute("_moz_dirty")},getChildCount:function(e,t){var n=0,i=e.firstChild;for(t=t||function(){return 1};i;)t(i)&&n++,i=i.nextSibling;return n},isEmptyNode:function(e){return!e.firstChild||0==f.getChildCount(e,function(e){return!f.isBr(e)&&!f.isBookmarkNode(e)&&!f.isWhitespace(e)})},clearSelectedArr:function(e){for(var t;t=e.pop();)f.removeAttributes(t,["class"])},scrollToView:function(e,t,n){var i,o,r,a=(i=t.document,o="CSS1Compat"==i.compatMode,{width:(o?i.documentElement.clientWidth:i.body.clientWidth)||0,height:(o?i.documentElement.clientHeight:i.body.clientHeight)||0}).height;n=-1*a+n+(e.offsetHeight||0),n+=(e=f.getXY(e)).y,((e=(r=t,"pageXOffset"in r?{x:r.pageXOffset||0,y:r.pageYOffset||0}:{x:(r=r.document).documentElement.scrollLeft||r.body.scrollLeft||0,y:r.documentElement.scrollTop||r.body.scrollTop||0}).y)<n||n<e-a)&&t.scrollTo(0,n+(n<0?-20:20))},isBr:function(e){return 1==e.nodeType&&"BR"==e.tagName},isFillChar:function(e,t){if(3!=e.nodeType)return!1;var n=e.nodeValue;return t?new RegExp("^"+f.fillChar).test(n):!n.replace(new RegExp(f.fillChar,"g"),"").length},isStartInblock:function(e){var t,n=0;if(1==(i=(e=e.cloneRange()).startContainer).nodeType&&i.childNodes[e.startOffset])for(var i,o=(i=i.childNodes[e.startOffset]).previousSibling;o&&f.isFillChar(o);)o=(i=o).previousSibling;for(this.isFillChar(i,!0)&&1==e.startOffset&&(e.setStartBefore(i),i=e.startContainer);i&&f.isFillChar(i);)i=(t=i).previousSibling;for(t&&(e.setStartBefore(t),i=e.startContainer),1==i.nodeType&&f.isEmptyNode(i)&&1==e.startOffset&&e.setStart(i,0).collapse(!0);!e.startOffset;){if(i=e.startContainer,f.isBlockElm(i)||f.isBody(i)){n=1;break}var r;if(o=e.startContainer.previousSibling){for(;o&&f.isFillChar(o);)o=(r=o).previousSibling;r?e.setStartBefore(r):e.setStartBefore(e.startContainer)}else e.setStartBefore(e.startContainer)}return n&&!f.isBody(e.startContainer)?1:0},isEmptyBlock:function(e,t){if(1!=e.nodeType)return 0;if(t=t||new RegExp("[  \t\r\n"+f.fillChar+"]","g"),0<e[r.ie?"innerText":"textContent"].replace(t,"").length)return 0;for(var n in w.$isNotEmpty)if(e.getElementsByTagName(n).length)return 0;return 1},setViewportOffset:function(e,t){var n=0|parseInt(e.style.left),i=0|parseInt(e.style.top),o=e.getBoundingClientRect(),r=t.left-o.left;o=t.top-o.top;r&&(e.style.left=n+r+"px"),o&&(e.style.top=i+o+"px")},fillNode:function(e,t){var n=r.ie?e.createTextNode(f.fillChar):e.createElement("br");t.innerHTML="",t.appendChild(n)},moveChild:function(e,t,n){for(;e.firstChild;)n&&t.firstChild?t.insertBefore(e.lastChild,t.firstChild):t.appendChild(e.firstChild)},hasNoAttributes:function(e){return r.ie?/^<\w+\s*?>/.test(e.outerHTML):0==e.attributes.length},isCustomeNode:function(e){return 1==e.nodeType&&e.getAttribute("_ue_custom_node_")},isTagNode:function(e,t){return 1==e.nodeType&&new RegExp("\\b"+e.tagName+"\\b","i").test(t)},filterNodeList:function(e,t,n){var i=[];if(!p.isFunction(t)){var o=t;t=function(e){return-1!=p.indexOf(p.isArray(o)?o:o.split(" "),e.tagName.toLowerCase())}}return p.each(e,function(e){t(e)&&i.push(e)}),0==i.length?null:1!=i.length&&n?i:i[0]},isInNodeEndBoundary:function(e,t){var n=e.startContainer;if(3==n.nodeType&&e.startOffset!=n.nodeValue.length||1==n.nodeType&&e.startOffset!=n.childNodes.length)return 0;for(;n!==t;){if(n.nextSibling)return 0;n=n.parentNode}return 1},isBoundaryNode:function(e,t){for(;!f.isBody(e);)if(e!==(e=e.parentNode)[t])return!1;return!0},fillHtml:r.ie11below?"&nbsp;":"<br/>"},Q=new RegExp(f.fillChar,"g"),zu;!function(){function o(e){return!e.collapsed&&1==e.startContainer.nodeType&&e.startContainer===e.endContainer&&1==e.endOffset-e.startOffset}function n(e,t,n,i){return 1==t.nodeType&&(w.$empty[t.tagName]||w.$nonChild[t.tagName])&&(n=f.getNodeIndex(t)+(e?0:1),t=t.parentNode),e?(i.startContainer=t,i.startOffset=n,i.endContainer||i.collapse(!0)):(i.endContainer=t,i.endOffset=n,i.startContainer||i.collapse(!1)),i.collapsed=i.startContainer&&i.endContainer&&i.startContainer===i.endContainer&&i.startOffset==i.endOffset,i}function t(e,t){var n,i,o=e.startContainer,r=e.endContainer,a=e.startOffset,s=e.endOffset,l=e.document,d=l.createDocumentFragment();if(1==o.nodeType&&(o=o.childNodes[a]||(n=o.appendChild(l.createTextNode("")))),1==r.nodeType&&(r=r.childNodes[s]||(i=r.appendChild(l.createTextNode("")))),o===r&&3==o.nodeType)return d.appendChild(l.createTextNode(o.substringData(a,s-a))),t&&(o.deleteData(a,s-a),e.collapse(!0)),d;for(var c,u,m=d,h=f.findParents(o,!0),p=f.findParents(r,!0),g=0;h[g]==p[g];)g++;for(var b,v=g;b=h[v];v++){for(c=b.nextSibling,b==o?n||(3==e.startContainer.nodeType?(m.appendChild(l.createTextNode(o.nodeValue.slice(a))),t&&o.deleteData(a,o.nodeValue.length-a)):m.appendChild(t?o:o.cloneNode(!0))):(u=b.cloneNode(!1),m.appendChild(u));c&&c!==r&&c!==p[v];)b=c.nextSibling,m.appendChild(t?c:c.cloneNode(!0)),c=b;m=u}for(m=d,h[g]||(m.appendChild(h[g-1].cloneNode(!1)),m=m.firstChild),v=g;a=p[v];v++){if(c=a.previousSibling,a==r?i||3!=e.endContainer.nodeType||(m.appendChild(l.createTextNode(r.substringData(0,s))),t&&r.deleteData(0,s)):(u=a.cloneNode(!1),m.appendChild(u)),v!=g||!h[g])for(;c&&c!==o;)a=c.previousSibling,m.insertBefore(t?c:c.cloneNode(!0),m.firstChild),c=a;m=u}return t&&e.setStartBefore(p[g]?h[g]?p[g]:h[g-1]:p[g-1]).collapse(!0),n&&f.remove(n),i&&f.remove(i),d}function s(e,t){try{if(d&&f.inDoc(d,e))if(d.nodeValue.replace(Q,"").length)d.nodeValue=d.nodeValue.replace(Q,"");else{var n=d.parentNode;for(f.remove(d);n&&f.isEmptyInlineElement(n)&&(r.safari?!(f.getPosition(n,t)&f.POSITION_CONTAINS):!n.contains(t));)d=n.parentNode,f.remove(n),n=d}}catch(e){}}function l(e,t){var n;for(e=e[t];e&&f.isFillChar(e);)n=e[t],f.remove(e),e=n}var d,a=0,c=f.fillChar,e=M.Range=function(e){this.startContainer=this.startOffset=this.endContainer=this.endOffset=null,this.document=e,this.collapsed=!0};e.prototype={cloneContents:function(){return this.collapsed?null:t(this,0)},deleteContents:function(){var e;return this.collapsed||t(this,1),r.webkit&&(3!=(e=this.startContainer).nodeType||e.nodeValue.length||(this.setStartBefore(e).collapse(!0),f.remove(e))),this},extractContents:function(){return this.collapsed?null:t(this,2)},setStart:function(e,t){return n(!0,e,t,this)},setEnd:function(e,t){return n(!1,e,t,this)},setStartAfter:function(e){return this.setStart(e.parentNode,f.getNodeIndex(e)+1)},setStartBefore:function(e){return this.setStart(e.parentNode,f.getNodeIndex(e))},setEndAfter:function(e){return this.setEnd(e.parentNode,f.getNodeIndex(e)+1)},setEndBefore:function(e){return this.setEnd(e.parentNode,f.getNodeIndex(e))},setStartAtFirst:function(e){return this.setStart(e,0)},setStartAtLast:function(e){return this.setStart(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},setEndAtFirst:function(e){return this.setEnd(e,0)},setEndAtLast:function(e){return this.setEnd(e,3==e.nodeType?e.nodeValue.length:e.childNodes.length)},selectNode:function(e){return this.setStartBefore(e).setEndAfter(e)},selectNodeContents:function(e){return this.setStart(e,0).setEndAtLast(e)},cloneRange:function(){return new e(this.document).setStart(this.startContainer,this.startOffset).setEnd(this.endContainer,this.endOffset)},collapse:function(e){return e?(this.endContainer=this.startContainer,this.endOffset=this.startOffset):(this.startContainer=this.endContainer,this.startOffset=this.endOffset),this.collapsed=!0,this},shrinkBoundary:function(e){function t(e){return 1==e.nodeType&&!f.isBookmarkNode(e)&&!w.$empty[e.tagName]&&!w.$nonChild[e.tagName]}for(var n,i=this.collapsed;1==this.startContainer.nodeType&&(n=this.startContainer.childNodes[this.startOffset])&&t(n);)this.setStart(n,0);if(i)return this.collapse(!0);if(!e)for(;1==this.endContainer.nodeType&&0<this.endOffset&&(n=this.endContainer.childNodes[this.endOffset-1])&&t(n);)this.setEnd(n,n.childNodes.length);return this},getCommonAncestor:function(e,t){var n=this.startContainer,i=this.endContainer;return n===i?e&&o(this)&&1==(n=n.childNodes[this.startOffset]).nodeType?n:t&&3==n.nodeType?n.parentNode:n:f.getCommonAncestor(n,i)},trimBoundary:function(e){this.txtToElmBoundary();var t=this.startContainer,n=this.startOffset,i=this.collapsed,o=this.endContainer;if(3==t.nodeType){if(0==n)this.setStartBefore(t);else if(n>=t.nodeValue.length)this.setStartAfter(t);else{var r=f.split(t,n);t===o?this.setEnd(r,this.endOffset-n):t.parentNode===o&&(this.endOffset+=1),this.setStartBefore(r)}if(i)return this.collapse(!0)}return e||(n=this.endOffset,3==(o=this.endContainer).nodeType&&(0==n?this.setEndBefore(o):(n<o.nodeValue.length&&f.split(o,n),this.setEndAfter(o)))),this},txtToElmBoundary:function(e){function t(e,t){var n=e[t+"Container"],i=e[t+"Offset"];3==n.nodeType&&(i?i>=n.nodeValue.length&&e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"After"](n):e["set"+t.replace(/(\w)/,function(e){return e.toUpperCase()})+"Before"](n))}return!e&&this.collapsed||(t(this,"start"),t(this,"end")),this},insertNode:function(e){var t=e,n=1;11==e.nodeType&&(t=e.firstChild,n=e.childNodes.length),this.trimBoundary(!0);var i=this.startContainer,o=i.childNodes[this.startOffset];return o?i.insertBefore(e,o):i.appendChild(e),t.parentNode===this.endContainer&&(this.endOffset+=n),this.setStartBefore(t)},setCursor:function(e,t){return this.collapse(!e).select(t)},createBookmark:function(e,t){var n,i=this.document.createElement("span");return i.style.cssText="display:none;line-height:0px;",i.appendChild(this.document.createTextNode("‍")),i.id="_baidu_bookmark_start_"+(t?"":a++),this.collapsed||((n=i.cloneNode(!0)).id="_baidu_bookmark_end_"+(t?"":a++)),this.insertNode(i),n&&this.collapse().insertNode(n).setEndBefore(n),this.setStartAfter(i),{start:e?i.id:i,end:n?e?n.id:n:null,id:e}},moveToBookmark:function(e){var t=e.id?this.document.getElementById(e.start):e.start;return e=e.end&&e.id?this.document.getElementById(e.end):e.end,this.setStartBefore(t),f.remove(t),e?(this.setEndBefore(e),f.remove(e)):this.collapse(!0),this},enlarge:function(e,t){var n,i,o=f.isBody,r=this.document.createTextNode("");if(e){for(n=1==(i=this.startContainer).nodeType?i=i.childNodes[this.startOffset]?i.childNodes[this.startOffset]:(i.appendChild(r),r):i;;){if(f.isBlockElm(i)){for(i=n;(n=i.previousSibling)&&!f.isBlockElm(n);)i=n;this.setStartBefore(i);break}i=(n=i).parentNode}for(n=1==(i=this.endContainer).nodeType?((n=i.childNodes[this.endOffset])?i.insertBefore(r,n):i.appendChild(r),i=r):i;;){if(f.isBlockElm(i)){for(i=n;(n=i.nextSibling)&&!f.isBlockElm(n);)i=n;this.setEndAfter(i);break}i=(n=i).parentNode}r.parentNode===this.endContainer&&this.endOffset--,f.remove(r)}if(!this.collapsed){for(;!(0!=this.startOffset||t&&t(this.startContainer)||o(this.startContainer));)this.setStartBefore(this.startContainer);for(;!(this.endOffset!=(1==this.endContainer.nodeType?this.endContainer.childNodes.length:this.endContainer.nodeValue.length)||t&&t(this.endContainer)||o(this.endContainer));)this.setEndAfter(this.endContainer)}return this},enlargeToBlockElm:function(e){for(;!f.isBlockElm(this.startContainer);)this.setStartBefore(this.startContainer);if(!e)for(;!f.isBlockElm(this.endContainer);)this.setEndAfter(this.endContainer);return this},adjustmentBoundary:function(){if(!this.collapsed){for(;!f.isBody(this.startContainer)&&this.startOffset==this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length&&this.startContainer[3==this.startContainer.nodeType?"nodeValue":"childNodes"].length;)this.setStartAfter(this.startContainer);for(;!f.isBody(this.endContainer)&&!this.endOffset&&this.endContainer[3==this.endContainer.nodeType?"nodeValue":"childNodes"].length;)this.setEndBefore(this.endContainer)}return this},applyInlineStyle:function(t,e,n){if(this.collapsed)return this;this.trimBoundary().enlarge(!1,function(e){return 1==e.nodeType&&f.isBlockElm(e)}).adjustmentBoundary();for(var i,o,r=this.createBookmark(),a=r.end,s=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!f.isWhitespace(e)},l=f.getNextDomNode(r.start,!1,s),d=this.cloneRange();l&&f.getPosition(l,a)&f.POSITION_PRECEDING;)if(3==l.nodeType||w[t][l.tagName]){for(d.setStartBefore(l),i=l;i&&(3==i.nodeType||w[t][i.tagName])&&i!==a;)o=i,i=f.getNextDomNode(i,1==i.nodeType,null,function(e){return w[t][e.tagName]});var c,u;l=d.setEndAfter(o).extractContents();if(n&&0<n.length){var m;m=c=n[0].cloneNode(!1);for(var h,p=1;h=n[p++];)c.appendChild(h.cloneNode(!1)),c=c.firstChild}else c=d.document.createElement(t);if(e&&f.setAttributes(c,e),c.appendChild(l),d.insertNode(n?m:c),"span"==t&&e.style&&/text\-decoration/.test(e.style)&&(u=f.findParentByTagName(c,"a",!0))?(f.setAttributes(u,e),f.remove(c,!0),c=u):(f.mergeSibling(c),f.clearEmptySibling(c)),f.mergeChild(c,e),l=f.getNextDomNode(c,!1,s),f.mergeToParent(c),i===a)break}else l=f.getNextDomNode(l,!0,s);return this.moveToBookmark(r)},removeInlineStyle:function(e){if(this.collapsed)return this;e=p.isArray(e)?e:[e],this.shrinkBoundary().adjustmentBoundary();for(var t=this.startContainer,n=this.endContainer;;){if(1==t.nodeType){if(-1<p.indexOf(e,t.tagName.toLowerCase()))break;if("body"==t.tagName.toLowerCase()){t=null;break}}t=t.parentNode}for(;;){if(1==n.nodeType){if(-1<p.indexOf(e,n.tagName.toLowerCase()))break;if("body"==n.tagName.toLowerCase()){n=null;break}}n=n.parentNode}var i,o,r=this.createBookmark();for(t&&(i=(o=this.cloneRange().setEndBefore(r.start).setStartBefore(t)).extractContents(),o.insertNode(i),f.clearEmptySibling(t,!0),t.parentNode.insertBefore(r.start,t)),n&&(i=(o=this.cloneRange().setStartAfter(r.end).setEndAfter(n)).extractContents(),o.insertNode(i),f.clearEmptySibling(n,!1,!0),n.parentNode.insertBefore(r.end,n.nextSibling)),t=f.getNextDomNode(r.start,!1,function(e){return 1==e.nodeType});t&&t!==r.end;)n=f.getNextDomNode(t,!0,function(e){return 1==e.nodeType}),-1<p.indexOf(e,t.tagName.toLowerCase())&&f.remove(t,!0),t=n;return this.moveToBookmark(r)},getClosedNode:function(){var e;if(!this.collapsed){var t=this.cloneRange().adjustmentBoundary().shrinkBoundary();o(t)&&(t=t.startContainer.childNodes[t.startOffset])&&1==t.nodeType&&(w.$empty[t.tagName]||w.$nonChild[t.tagName])&&(e=t)}return e},select:r.ie?function(e,t){var n;if(this.collapsed||this.shrinkBoundary(),(i=this.getClosedNode())&&!t){try{(n=this.document.body.createControlRange()).addElement(i),n.select()}catch(e){}return this}var i,o=(i=this.createBookmark()).start;if((n=this.document.body.createTextRange()).moveToElementText(o),n.moveStart("character",1),this.collapsed){if(!e&&3!=this.startContainer.nodeType){a=this.document.createTextNode(c);var r=this.document.createElement("span");r.appendChild(this.document.createTextNode(c)),o.parentNode.insertBefore(r,o),o.parentNode.insertBefore(a,o),s(this.document,a),d=a,l(r,"previousSibling"),l(o,"nextSibling"),n.moveStart("character",-1),n.collapse(!0)}}else{var a=this.document.body.createTextRange();o=i.end;a.moveToElementText(o),n.setEndPoint("EndToEnd",a)}this.moveToBookmark(i),r&&f.remove(r);try{n.select()}catch(e){}return this}:function(e){var t=f.getWindow(this.document),n=t.getSelection();if(r.gecko?this.document.body.focus():t.focus(),n){if(n.removeAllRanges(),this.collapsed&&!e&&(e=t=this.startContainer,1==t.nodeType&&(e=t.childNodes[this.startOffset]),3==t.nodeType&&this.startOffset||(e?e.previousSibling&&3==e.previousSibling.nodeType:t.lastChild&&3==t.lastChild.nodeType)||(e=this.document.createTextNode(c),this.insertNode(e),s(this.document,e),l(e,"previousSibling"),l(e,"nextSibling"),d=e,this.setStart(e,r.webkit?1:0).collapse(!0))),t=this.document.createRange(),this.collapsed&&r.opera&&1==this.startContainer.nodeType)if(e=this.startContainer.childNodes[this.startOffset]){for(;e&&f.isBlockElm(e)&&(1==e.nodeType&&e.childNodes[0]);)e=e.childNodes[0];e&&this.setStartBefore(e).collapse(!0)}else(e=this.startContainer.lastChild)&&f.isBr(e)&&this.setStartBefore(e).collapse(!0);!function(i){function e(e,t,n){3==e.nodeType&&e.nodeValue.length<t&&(i[n+"Offset"]=e.nodeValue.length)}e(i.startContainer,i.startOffset,"start"),e(i.endContainer,i.endOffset,"end")}(this),t.setStart(this.startContainer,this.startOffset),t.setEnd(this.endContainer,this.endOffset),n.addRange(t)}return this},scrollToView:function(e,t){e=e?window:f.getWindow(this.document);var n=this.document.createElement("span");return n.innerHTML="&nbsp;",this.cloneRange().insertNode(n),f.scrollToView(n,e,t),f.remove(n),this},inFillChar:function(){var e=this.startContainer;return!(!this.collapsed||3!=e.nodeType||e.nodeValue.replace(new RegExp("^"+f.fillChar),"").length+1!=e.nodeValue.length)},createAddress:function(e,a){function t(e){for(var t,n=e?s.startContainer:s.endContainer,i=f.findParents(n,!0,function(e){return!f.isBody(e)}),o=[],r=0;t=i[r++];)o.push(f.getNodeIndex(t,a));if(i=0,a)if(3==n.nodeType){for(n=n.previousSibling;n&&3==n.nodeType;)i+=n.nodeValue.replace(Q,"").length,n=n.previousSibling;i+=e?s.startOffset:s.endOffset}else if(n=n.childNodes[e?s.startOffset:s.endOffset])i=f.getNodeIndex(n,a);else for(e=(n=e?s.startContainer:s.endContainer).firstChild;e;)if(f.isFillChar(e))e=e.nextSibling;else if(i++,3==e.nodeType)for(;e&&3==e.nodeType;)e=e.nextSibling;else e=e.nextSibling;else i=e?f.isFillChar(n)?0:s.startOffset:s.endOffset;return i<0&&(i=0),o.push(i),o}var n={},s=this;return n.startAddress=t(!0),e||(n.endAddress=s.collapsed?[].concat(n.startAddress):t()),n},moveToAddress:function(e,t){function n(e,t){for(var n,i,o,r=l.document.body,a=0,s=e.length;a<s;a++)if(o=e[a],!(r=(n=r).childNodes[o])){i=o;break}t?r?l.setStartBefore(r):l.setStart(n,i):r?l.setEndBefore(r):l.setEnd(n,i)}var l=this;return n(e.startAddress,!0),!t&&e.endAddress&&n(e.endAddress),l},equals:function(e){for(var t in this)if(this.hasOwnProperty(t)&&this[t]!==e[t])return!1;return!0},traversal:function(e,t){if(this.collapsed)return this;for(var n=this.createBookmark(),i=n.end,o=f.getNextDomNode(n.start,!1,t);o&&o!==i&&f.getPosition(o,i)&f.POSITION_PRECEDING;){var r=f.getNextDomNode(o,!1,t);e(o),o=r}return this.moveToBookmark(n)}}}(),function(){function s(e,t){var n=f.getNodeIndex;(e=e.duplicate()).collapse(t);var i=e.parentElement();if(!i.hasChildNodes())return{container:i,offset:0};for(var o,r=i.children,a=e.duplicate(),s=0,l=r.length-1,d=-1;s<=l;){o=r[d=Math.floor((s+l)/2)],a.moveToElementText(o);var c=a.compareEndPoints("StartToStart",e);if(0<c)l=d-1;else{if(!(c<0))return{container:i,offset:n(o)};s=d+1}}if(-1==d){if(a.moveToElementText(i),a.setEndPoint("StartToStart",e),a=a.text.replace(/(\r\n|\r)/g,"\n").length,r=i.childNodes,!a)return{container:o=r[r.length-1],offset:o.nodeValue.length};for(n=r.length;0<a;)a-=r[--n].nodeValue.length;return{container:r[n],offset:-a}}if(a.collapse(0<c),a.setEndPoint(0<c?"StartToStart":"EndToStart",e),!(a=a.text.replace(/(\r\n|\r)/g,"\n").length))return w.$empty[o.tagName]||w.$nonChild[o.tagName]?{container:i,offset:n(o)+(0<c?0:1)}:{container:o,offset:0<c?0:o.childNodes.length};for(;0<a;)try{a-=(o=(r=o)[0<c?"previousSibling":"nextSibling"]).nodeValue.length}catch(e){return{container:i,offset:n(r)}}return{container:o,offset:0<c?-a:o.nodeValue.length+a}}function n(e){var t;try{t=e.getNative().createRange()}catch(e){return null}var n=t.item?t.item(0):t.parentElement();return(n.ownerDocument||n)===e.document?t:null}(M.Selection=function(e){var t=this;t.document=e,r.ie9below&&(e=f.getWindow(e).frameElement,f.on(e,"beforedeactivate",function(){t._bakIERange=t.getIERange()}),f.on(e,"activate",function(){try{!n(t)&&t._bakIERange&&t._bakIERange.select()}catch(e){}t._bakIERange=null})),e=e=null}).prototype={rangeInBody:function(e,t){var n=r.ie9below||t?e.item?e.item():e.parentElement():e.startContainer;return n===this.document.body||f.inDoc(n,this.document)},getNative:function(){var e=this.document;try{return e?r.ie9below?e.selection:f.getWindow(e).getSelection():null}catch(e){return null}},getIERange:function(){var e=n(this);return!e&&this._bakIERange?this._bakIERange:e},cache:function(){this.clear(),this._cachedRange=this.getRange(),this._cachedStartElement=this.getStart(),this._cachedStartElementPath=this.getStartElementPath()},getStartElementPath:function(){if(this._cachedStartElementPath)return this._cachedStartElementPath;var e=this.getStart();return e?f.findParents(e,!0,null,!0):[]},clear:function(){this._cachedStartElementPath=this._cachedRange=this._cachedStartElement=null},isFocus:function(){try{if(r.ie9below){var e=n(this);return!(!e||!this.rangeInBody(e))}return!!this.getNative().rangeCount}catch(e){return!1}},getRange:function(){function n(e){for(var t=i.document.body.firstChild,n=e.collapsed;t&&t.firstChild;)e.setStart(t,0),t=t.firstChild;e.startContainer||e.setStart(i.document.body,0),n&&e.collapse(!0)}var i=this;if(null!=i._cachedRange)return this._cachedRange;var o=new t.editor.dom.Range(i.document);if(r.ie9below){var e=i.getIERange();if(e)try{!function(e,t){if(e.item)t.selectNode(e.item(0));else{var n=s(e,!0);t.setStart(n.container,n.offset),0!=e.compareEndPoints("StartToEnd",e)&&(n=s(e,!1),t.setEnd(n.container,n.offset))}}(e,o)}catch(e){n(o)}else n(o)}else{var a=i.getNative();if(a&&a.rangeCount)e=a.getRangeAt(0),a=a.getRangeAt(a.rangeCount-1),o.setStart(e.startContainer,e.startOffset).setEnd(a.endContainer,a.endOffset),o.collapsed&&f.isBody(o.startContainer)&&!o.startOffset&&n(o);else{if(this._bakRange&&f.inDoc(this._bakRange.startContainer,this.document))return this._bakRange;n(o)}}return this._bakRange=o},getStart:function(){if(this._cachedStartElement)return this._cachedStartElement;var e,t,n=r.ie9below?this.getIERange():this.getRange();if(r.ie9below){if(!n)return this.document.body.firstChild;if(n.item)return n.item(0);for(0<(e=n.duplicate()).text.length&&e.moveStart("character",1),e.collapse(1),e=e.parentElement(),t=n=n.parentElement();n=n.parentNode;)if(n==e){e=t;break}}else if(n.shrinkBoundary(),1==(e=n.startContainer).nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,n.startOffset)]),3==e.nodeType)return e.parentNode;return e},getText:function(){var e;return this.isFocus()&&(e=this.getNative())?(e=r.ie9below?e.createRange():e.getRangeAt(0),r.ie9below?e.text:e.toString()):""},clearRange:function(){this.getNative()[r.ie9below?"empty":"removeAllRanges"]()}}}(),function(){function s(e,t){var n;if(t.textarea)if(p.isString(t.textarea)){for(var i,o=0,r=f.getElementsByTagName(e,"textarea");i=r[o++];)if(i.id=="ueditor_textarea_"+t.options.textarea){n=i;break}}else n=t.textarea;n||(e.appendChild(n=f.createElement(document,"textarea",{name:t.options.textarea,id:"ueditor_textarea_"+t.options.textarea,style:"display:none"})),t.textarea=n),!n.getAttribute("name")&&n.setAttribute("name",t.options.textarea),n.value=t.hasContents()?t.options.allHtmlEnabled?t.getAllHtml():t.getContent(null,null,!0):""}function n(e){e.langIsReady=!0,e.fireEvent("langReady")}var t,i=0,o=UE.Editor=function(e){var t=this;t.uid=i++,ba.call(t),t.commands={},t.options=p.extend(p.clone(e||{}),UEDITOR_CONFIG,!0),t.shortcutkeys={},t.inputRules=[],t.outputRules=[],t.setOpt(o.defaultOptions(t)),t.loadServerConfig(),p.isEmptyObject(UE.I18N)?p.loadFile(document,{src:t.options.langPath+t.options.lang+"/"+t.options.lang+".js",tag:"script",type:"text/javascript",defer:"defer"},function(){UE.plugin.load(t),n(t)}):(t.options.lang=function(e){for(var t in e)return t}(UE.I18N),UE.plugin.load(t),n(t)),UE.instants["ueditorInstant"+t.uid]=t};o.prototype={registerCommand:function(e,t){this.commands[e]=t},ready:function(e){e&&(this.isReady?e.apply(this):this.addListener("ready",e))},setOpt:function(e,t){var n={};p.isString(e)?n[e]=t:n=e,p.extend(this.options,n,!0)},getOpt:function(e){return this.options[e]},destroy:function(){this.fireEvent("destroy");var e=this.container.parentNode,t=this.textarea;t?t.style.display="":(t=document.createElement("textarea"),e.parentNode.insertBefore(t,e)),t.style.width=this.iframe.offsetWidth+"px",t.style.height=this.iframe.offsetHeight+"px",t.value=this.getContent(),t.id=this.key,e.innerHTML="",f.remove(e);var n;e=this.key;for(n in this)this.hasOwnProperty(n)&&delete this[n];UE.delEditor(e)},render:function(e){var t=this.options;if(p.isString(e)&&(e=document.getElementById(e)),e){t.minFrameWidth=t.initialFrameWidth?t.initialFrameWidth:t.initialFrameWidth=e.offsetWidth,t.initialFrameHeight?t.minFrameHeight=t.initialFrameHeight:t.initialFrameHeight=t.minFrameHeight=e.offsetHeight,e.style.width=/%$/.test(t.initialFrameWidth)?"100%":t.initialFrameWidth-parseInt(f.getComputedStyle(e,"padding-left"))-parseInt(f.getComputedStyle(e,"padding-right"))+"px",e.style.height=/%$/.test(t.initialFrameHeight)?"100%":t.initialFrameHeight-parseInt(f.getComputedStyle(e,"padding-top"))-parseInt(f.getComputedStyle(e,"padding-bottom"))+"px",e.style.zIndex=t.zIndex;var n=(J&&r.version<9?"":"<!DOCTYPE html>")+"<html xmlns='http://www.w3.org/1999/xhtml' class='view' ><head><style type='text/css'>.view{padding:0;word-wrap:break-word;cursor:text;height:90%;}\nbody{margin:8px;font-family:sans-serif;font-size:16px;}p{margin:5px 0;}</style>"+(t.iframeCssUrl?"<link rel='stylesheet' type='text/css' href='"+p.unhtml(t.iframeCssUrl)+"'/>":"")+(t.initialStyle?"<style>"+t.initialStyle+"</style>":"")+"</head><body class='view' ></body><script type='text/javascript' "+(J?"defer='defer'":"")+" id='_initialScript'>setTimeout(function(){editor = window.parent.UE.instants['ueditorInstant"+this.uid+"'];editor._setup(document);},0);var _tmpScript = document.getElementById('_initialScript');_tmpScript.parentNode.removeChild(_tmpScript);<\/script></html>";e.appendChild(f.createElement(document,"iframe",{id:"ueditor_"+this.uid,width:"100%",height:"100%",frameborder:"0",src:"javascript:void(function(){document.open();"+(t.customDomain&&document.domain!=location.hostname?'document.domain="'+document.domain+'";':"")+'document.write("'+n+'");document.close();}())'})),e.style.overflow="hidden",setTimeout(function(){/%$/.test(t.initialFrameWidth)&&(t.minFrameWidth=t.initialFrameWidth=e.offsetWidth),/%$/.test(t.initialFrameHeight)&&(t.minFrameHeight=t.initialFrameHeight=e.offsetHeight,e.style.height=t.initialFrameHeight+"px")})}},_setup:function(e){var t,n=this,i=n.options;J?(e.body.disabled=!0,e.body.contentEditable=!0,e.body.disabled=!1):e.body.contentEditable=!0,e.body.spellcheck=!1,n.document=e,n.window=e.defaultView||e.parentWindow,n.iframe=n.window.frameElement,n.body=e.body,n.selection=new M.Selection(e),r.gecko&&(t=this.selection.getNative())&&t.removeAllRanges(),this._initEvents();for(var o=this.iframe.parentNode;!f.isBody(o);o=o.parentNode)if("FORM"==o.tagName){n.form=o,n.options.autoSyncData?f.on(n.window,"blur",function(){s(o,n)}):f.on(o,"submit",function(){s(this,n)});break}if(i.initialContent)if(i.autoClearinitialContent){var a=n.execCommand;n.execCommand=function(){return n.fireEvent("firstBeforeExecCommand"),a.apply(n,arguments)},this._setDefaultContent(i.initialContent)}else this.setContent(i.initialContent,!1,!0);f.isEmptyNode(n.body)&&(n.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>"),i.focus&&setTimeout(function(){n.focus(n.options.focusInEnd),!n.options.autoClearinitialContent&&n._selectionChange()},0),n.container||(n.container=this.iframe.parentNode),i.fullscreen&&n.ui&&n.ui.setFullScreen(!0);try{n.document.execCommand("2D-position",!1,!1)}catch(e){}try{n.document.execCommand("enableInlineTableEditing",!1,!1)}catch(e){}try{n.document.execCommand("enableObjectResizing",!1,!1)}catch(e){}n._bindshortcutKeys(),n.isReady=1,n.fireEvent("ready"),i.onready&&i.onready.call(n),r.ie9below||f.on(n.window,["blur","focus"],function(e){if("blur"==e.type){n._bakRange=n.selection.getRange();try{n._bakNativeRange=n.selection.getNative().getRangeAt(0),n.selection.getNative().removeAllRanges()}catch(e){n._bakNativeRange=null}}else try{n._bakRange&&n._bakRange.select()}catch(e){}}),r.gecko&&r.version<=10902&&(n.body.contentEditable=!1,setTimeout(function(){n.body.contentEditable=!0},100),setInterval(function(){n.body.style.height=n.iframe.offsetHeight-20+"px"},100)),!i.isShow&&n.setHide(),i.readonly&&n.setDisabled()},sync:function(e){(e=e?document.getElementById(e):f.findParent(this.iframe.parentNode,function(e){return"FORM"==e.tagName},!0))&&s(e,this)},setHeight:function(e,t){e!==parseInt(this.iframe.parentNode.style.height)&&(this.iframe.parentNode.style.height=e+"px"),!t&&(this.options.minFrameHeight=this.options.initialFrameHeight=e),this.body.style.height=e+"px",!t&&this.trigger("setHeight")},addshortcutkey:function(e,t){var n={};t?n[e]=t:n=e,p.extend(this.shortcutkeys,n)},_bindshortcutKeys:function(){var l=this,d=this.shortcutkeys;l.addListener("keydown",function(e,t){var n,i=t.keyCode||t.which;for(n in d)for(var o,r=d[n].split(","),a=0;o=r[a++];){var s=(o=o.split(":"))[0];o=o[1],(/^(ctrl)(\+shift)?\+(\d+)$/.test(s.toLowerCase())||/^(\d+)$/.test(s))&&("ctrl"==RegExp.$1&&(t.ctrlKey||t.metaKey)&&(""==RegExp.$2||t[RegExp.$2.slice(1)+"Key"])&&i==RegExp.$3||i==RegExp.$1)&&(-1!=l.queryCommandState(n,o)&&l.execCommand(n,o),f.preventDefault(t))}})},getContent:function(e,t,n,i,o){return e&&p.isFunction(e)&&(t=e,e=""),(t?t():this.hasContents())?(this.fireEvent("beforegetcontent"),t=UE.htmlparser(this.body.innerHTML,i),this.filterOutputRule(t),this.fireEvent("aftergetcontent",e,t),t.toHtml(o)):""},getAllHtml:function(){var e=[];if(this.fireEvent("getAllHtml",e),r.ie&&8<r.version){var t="";p.each(this.document.styleSheets,function(e){t+=e.href?'<link rel="stylesheet" type="text/css" href="'+e.href+'" />':"<style>"+e.cssText+"</style>"}),p.each(this.document.getElementsByTagName("script"),function(e){t+=e.outerHTML})}return"<html><head>"+(this.options.charset?'<meta http-equiv="Content-Type" content="text/html; charset='+this.options.charset+'"/>':"")+(t||this.document.getElementsByTagName("head")[0].innerHTML)+e.join("\n")+"</head><body "+(J&&r.version<9?'class="view"':"")+">"+this.getContent(null,null,!0)+"</body></html>"},getPlainTxt:function(){var e=new RegExp(f.fillChar,"g");return this.body.innerHTML.replace(/[\n\r]/g,"").replace(/<(p|div)[^>]*>(<br\/?>|&nbsp;)<\/\1>/gi,"\n").replace(/<br\/?>/gi,"\n").replace(/<[^>/]+>/g,"").replace(/(\n)?<\/([^>]+)>/g,function(e,t,n){return w.$block[n]?"\n":t||""}).replace(e,"").replace(/\u00a0/g," ").replace(/&nbsp;/g," ")},getContentTxt:function(){return this.body[r.ie?"innerText":"textContent"].replace(new RegExp(f.fillChar,"g"),"").replace(/\u00a0/g," ")},setContent:function(e,t,n){if(this.fireEvent("beforesetcontent",e),e=UE.htmlparser(e),this.filterInputRule(e),e=e.toHtml(),this.body.innerHTML=(t?this.body.innerHTML:"")+e,"p"==this.options.enterTag)if(!(t=this.body.firstChild)||1==t.nodeType&&(w.$cdata[t.tagName]||"DIV"==t.tagName&&t.getAttribute("cdata_tag")||f.isCustomeNode(t))&&t===this.body.lastChild)this.body.innerHTML="<p>"+(r.ie?"&nbsp;":"<br/>")+"</p>"+this.body.innerHTML;else for(var i=this.document.createElement("p");t;){for(;t&&(3==t.nodeType||1==t.nodeType&&w.p[t.tagName]&&!w.$cdata[t.tagName]);)e=t.nextSibling,i.appendChild(t),t=e;if(i.firstChild){if(!t){this.body.appendChild(i);break}t.parentNode.insertBefore(i,t),i=this.document.createElement("p")}t=t.nextSibling}var o;this.fireEvent("aftersetcontent"),this.fireEvent("contentchange"),!n&&this._selectionChange(),this._bakRange=this._bakIERange=this._bakNativeRange=null,r.gecko&&(o=this.selection.getNative())&&o.removeAllRanges(),this.options.autoSyncData&&this.form&&s(this.form,this)},focus:function(e){try{var t=this.selection.getRange();if(e){var n=this.body.lastChild;n&&1==n.nodeType&&!w.$empty[n.tagName]&&(f.isEmptyBlock(n)?t.setStartAtFirst(n):t.setStartAtLast(n),t.collapse(!0)),t.setCursor(!0)}else!t.collapsed&&f.isBody(t.startContainer)&&0==t.startOffset&&(n=this.body.firstChild)&&1==n.nodeType&&!w.$empty[n.tagName]&&t.setStartAtFirst(n).collapse(!0),t.select(!0);this.fireEvent("focus selectionchange")}catch(e){}},isFocus:function(){return this.selection.isFocus()},blur:function(){var e=this.selection.getNative();if(e.empty&&r.ie){var t=document.body.createTextRange();t.moveToElementText(document.body),t.collapse(!0),t.select(),e.empty()}else e.removeAllRanges()},_initEvents:function(){var t=this,e=t.document,n=t.window;t._proxyDomEvent=p.bind(t._proxyDomEvent,t),f.on(e,"click contextmenu mousedown keydown keyup keypress mouseup mouseover mouseout selectstart".split(" "),t._proxyDomEvent),f.on(n,["focus","blur"],t._proxyDomEvent),f.on(t.body,"drop",function(e){r.gecko&&e.stopPropagation&&e.stopPropagation(),t.fireEvent("contentchange")}),f.on(e,["mouseup","keydown"],function(e){"keydown"==e.type&&(e.ctrlKey||e.metaKey||e.shiftKey||e.altKey)||2!=e.button&&t._selectionChange(250,e)})},_proxyDomEvent:function(e){return!1!==this.fireEvent("before"+e.type.replace(/^on/,"").toLowerCase())&&!1!==this.fireEvent(e.type.replace(/^on/,""),e)&&this.fireEvent("after"+e.type.replace(/^on/,"").toLowerCase())},_selectionChange:function(e,n){var i,o,a=this,s=!1;r.ie&&r.version<9&&n&&"mouseup"==n.type&&!this.selection.getRange().collapsed&&(s=!0,i=n.clientX,o=n.clientY),clearTimeout(t),t=setTimeout(function(){if(a.selection&&a.selection.getNative()){var t,e;if(s&&"None"==a.selection.getNative().type){t=a.document.body.createTextRange();try{t.moveToPoint(i,o)}catch(e){t=null}}t&&(e=a.selection.getIERange,a.selection.getIERange=function(){return t}),a.selection.cache(),e&&(a.selection.getIERange=e),a.selection._cachedRange&&a.selection._cachedStartElement&&(a.fireEvent("beforeselectionchange"),a.fireEvent("selectionchange",!!n),a.fireEvent("afterselectionchange"),a.selection.clear())}},e||50)},_callCmdFn:function(e,t){var n,i=t[0].toLowerCase();return n=(i=this.commands[i]||UE.commands[i])&&i[e],i&&n||"queryCommandState"!=e?n?n.apply(this,t):void 0:0},execCommand:function(e){e=e.toLowerCase();var t,n=this.commands[e]||UE.commands[e];return n&&n.execCommand?(n.notNeedUndo||this.__hasEnterExecCommand?(t=this._callCmdFn("execCommand",arguments),this.__hasEnterExecCommand||n.ignoreContentChange||this._ignoreContentChange||this.fireEvent("contentchange")):(this.__hasEnterExecCommand=!0,-1!=this.queryCommandState.apply(this,arguments)&&(this.fireEvent("saveScene"),this.fireEvent.apply(this,["beforeexeccommand",e].concat(arguments)),t=this._callCmdFn("execCommand",arguments),this.fireEvent.apply(this,["afterexeccommand",e].concat(arguments)),this.fireEvent("saveScene")),this.__hasEnterExecCommand=!1),this.__hasEnterExecCommand||n.ignoreContentChange||this._ignoreContentChange||this._selectionChange(),t):null},queryCommandState:function(e){return this._callCmdFn("queryCommandState",arguments)},queryCommandValue:function(e){return this._callCmdFn("queryCommandValue",arguments)},hasContents:function(e){if(e)for(var t,n=0;t=e[n++];)if(0<this.document.getElementsByTagName(t).length)return!0;if(!f.isEmptyBlock(this.body))return!0;for(e=["div"],n=0;t=e[n++];){t=f.getElementsByTagName(this.document,t);for(var i,o=0;i=t[o++];)if(f.isCustomeNode(i))return!0}return!1},reset:function(){this.fireEvent("reset")},setEnabled:function(){var t;if("false"==this.body.contentEditable){this.body.contentEditable=!0,t=this.selection.getRange();try{t.moveToBookmark(this.lastBk),delete this.lastBk}catch(e){t.setStartAtFirst(this.body).collapse(!0)}t.select(!0),this.bkqueryCommandState&&(this.queryCommandState=this.bkqueryCommandState,delete this.bkqueryCommandState),this.bkqueryCommandValue&&(this.queryCommandValue=this.bkqueryCommandValue,delete this.bkqueryCommandValue),this.fireEvent("selectionchange")}},enable:function(){return this.setEnabled()},setDisabled:function(t){var n=this;t=t?p.isArray(t)?t:[t]:[],"true"==n.body.contentEditable&&(n.lastBk||(n.lastBk=n.selection.getRange().createBookmark(!0)),n.body.contentEditable=!1,n.bkqueryCommandState=n.queryCommandState,n.bkqueryCommandValue=n.queryCommandValue,n.queryCommandState=function(e){return-1!=p.indexOf(t,e)?n.bkqueryCommandState.apply(n,arguments):-1},n.queryCommandValue=function(e){return-1!=p.indexOf(t,e)?n.bkqueryCommandValue.apply(n,arguments):null},n.fireEvent("selectionchange"))},disable:function(e){return this.setDisabled(e)},_setDefaultContent:function(){function t(){var e=this;e.document.getElementById("initContent")&&(e.body.innerHTML="<p>"+(J?"":"<br/>")+"</p>",e.removeListener("firstBeforeExecCommand focus",t),setTimeout(function(){e.focus(),e._selectionChange()},0))}return function(e){this.body.innerHTML='<p id="initContent">'+e+"</p>",this.addListener("firstBeforeExecCommand focus",t)}}(),setShow:function(){var t=this.selection.getRange();if("none"==this.container.style.display){try{t.moveToBookmark(this.lastBk),delete this.lastBk}catch(e){t.setStartAtFirst(this.body).collapse(!0)}setTimeout(function(){t.select(!0)},100),this.container.style.display=""}},show:function(){return this.setShow()},setHide:function(){this.lastBk||(this.lastBk=this.selection.getRange().createBookmark(!0)),this.container.style.display="none"},hide:function(){return this.setHide()},getLang:function(e){var t=UE.I18N[this.options.lang];if(!t)throw Error("not import language file");e=(e||"").split(".");for(var n,i=0;(n=e[i++])&&(t=t[n]););return t},getContentLength:function(e,t){var n=this.getContent(!1,!1,!0).length;if(e){t=(t||[]).concat(["hr","img","iframe"]);n=this.getContentTxt().replace(/[\t\r\n]+/g,"").length;for(var i,o=0;i=t[o++];)n+=this.document.getElementsByTagName(i).length}return n},addInputRule:function(e){this.inputRules.push(e)},filterInputRule:function(e){for(var t,n=0;t=this.inputRules[n++];)t.call(this,e)},addOutputRule:function(e){this.outputRules.push(e)},filterOutputRule:function(e){for(var t,n=0;t=this.outputRules[n++];)t.call(this,e)},getActionUrl:function(e){e=this.getOpt(e)||e;var t=this.getOpt("imageUrl"),n=this.getOpt("serverUrl");return!n&&t&&(n=t.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2")),n?(n=n+(-1==n.indexOf("?")?"?":"&")+"action="+(e||""),p.formatUrl(n)):""}},p.inherits(o,ba)}(),UE.Editor.defaultOptions=function(e){return{isShow:!0,initialContent:"",initialStyle:"",autoClearinitialContent:!1,iframeCssUrl:(e=e.options.UEDITOR_HOME_URL)+"themes/iframe.css",textarea:"editorValue",focus:!1,focusInEnd:!0,autoClearEmptyNode:!0,fullscreen:!1,readonly:!1,zIndex:999,imagePopup:!0,enterTag:"p",customDomain:!1,lang:"zh-cn",langPath:e+"lang/",theme:"default",themePath:e+"themes/",allHtmlEnabled:!1,scaleEnabled:!1,tableNativeEditInFF:!1,autoSyncData:!0,fileNameFormat:"{time}{rand:6}"}},function(){UE.Editor.prototype.loadServerConfig=function(){function d(e){console&&console.error(e)}var b=this;setTimeout(function(){try{b.options.imageUrl&&b.setOpt("serverUrl",b.options.imageUrl.replace(/^(.*[\/]).+([\.].+)$/,"$1controller$2"));var c=b.getActionUrl("config"),a=p.isCrossDomainUrl(c);b._serverConfigLoaded=!1,c&&UE.ajax.request(c,{method:"GET",dataType:a?"jsonp":"",onsuccess:function(c){try{var e=a?c:eval("("+c.responseText+")");p.extend(b.options,e),b.fireEvent("serverConfigLoaded"),b._serverConfigLoaded=!0}catch(e){d(b.getLang("loadconfigFormatError"))}},onerror:function(){d(b.getLang("loadconfigHttpError"))}})}catch(e){d(b.getLang("loadconfigError"))}})},UE.Editor.prototype.isServerConfigLoaded=function(){return this._serverConfigLoaded||!1},UE.Editor.prototype.afterConfigReady=function(e){if(e&&p.isFunction(e)){var t=this,n=function(){e.apply(t,arguments),t.removeListener("serverConfigLoaded",n)};t.isServerConfigLoaded()?e.call(t,"serverConfigLoaded"):t.addListener("serverConfigLoaded",n)}}}(),UE.ajax=function(){function b(e){var t,n=[];for(t in e)if("method"!=t&&"timeout"!=t&&"async"!=t&&"dataType"!=t&&"callback"!=t&&null!=e[t]&&null!=e[t])if("function"!=(typeof e[t]).toLowerCase()&&"object"!=(typeof e[t]).toLowerCase())n.push(encodeURIComponent(t)+"="+encodeURIComponent(e[t]));else if(p.isArray(e[t]))for(var i=0;i<e[t].length;i++)n.push(encodeURIComponent(t)+"[]="+encodeURIComponent(e[t][i]));return n.join("&")}function i(e,t){function n(e){return function(){try{if(e)u.onerror&&u.onerror();else try{clearTimeout(o),d.apply(window,arguments)}catch(e){}}catch(e){u.onerror&&u.onerror.call(window,e)}finally{u.oncomplete&&u.oncomplete.apply(window,arguments),c.parentNode&&c.parentNode.removeChild(c),window[i]=null;try{delete window[i]}catch(e){}}}}var i,o,r,a,s,l,d=t.onsuccess||function(){},c=document.createElement("SCRIPT"),u=t||{},f=u.charset,m=u.jsonp||"callback",h=u.timeOut||0,g=new RegExp("(\\?|&)"+m+"=([^&]*)");p.isFunction(d)?(i="bd__editor__"+Math.floor(2147483648*Math.random()).toString(36),window[i]=n(0)):p.isString(d)?i=d:(r=g.exec(e))&&(i=r[2]),(e=e.replace(g,"$1"+m+"="+i)).search(g)<0&&(e+=(e.indexOf("?")<0?"?":"&")+m+"="+i),m=b(t),p.isEmptyObject(t.data)||(m+=(m?"&":"")+b(t.data)),m&&(e=e.replace(/\?/,"?"+m+"&")),c.onerror=n(1),h&&(o=setTimeout(n(1),h)),s=e,l=f,(a=c).setAttribute("type","text/javascript"),a.setAttribute("defer","defer"),l&&a.setAttribute("charset",l),a.setAttribute("src",s),document.getElementsByTagName("head")[0].appendChild(a)}var t="XMLHttpRequest()";try{new ActiveXObject("Msxml2.XMLHTTP"),t="ActiveXObject('Msxml2.XMLHTTP')"}catch(e){try{new ActiveXObject("Microsoft.XMLHTTP"),t="ActiveXObject('Microsoft.XMLHTTP')"}catch(e){}}var d=new Function("return new "+t);return{request:function(e,t){t&&"jsonp"==t.dataType?i(e,t):function(e,t){var n=d(),i=!1,o={method:"POST",timeout:5e3,async:!0,data:{},onsuccess:function(){},onerror:function(){}};if("object"==typeof e&&(e=(t=e).url),n&&e){var r=t?p.extend(o,t):o;o=b(r),p.isEmptyObject(r.data)||(o+=(o?"&":"")+b(r.data));var a=setTimeout(function(){4!=n.readyState&&(i=!0,n.abort(),clearTimeout(a))},r.timeout),s=r.method.toUpperCase(),l=e+(-1==e.indexOf("?")?"?":"&")+("POST"==s?"":o+"&noCache="+ +new Date);n.open(s,l,r.async),n.onreadystatechange=function(){4==n.readyState&&(i||200!=n.status?r.onerror(n):r.onsuccess(n))},"POST"==s?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),n.send(o)):n.send(null)}}(e,t)},getJSONP:function(e,t,n){i(e,{data:t,oncomplete:n})}}}(),UE.filterWord=function(){function s(e){return e.replace(/[\d.]+\w+/g,function(e){return p.transUnitToPx(e)})}return function(e){return/(class="?Mso|style="[^"]*\bmso\-|w:WordDocument|<(v|o):|lang=)/gi.test(e)?e.replace(/[\t\r\n]+/g," ").replace(/\x3c!--[\s\S]*?--\x3e/gi,"").replace(/<v:shape [^>]*>[\s\S]*?.<\/v:shape>/gi,function(e){if(r.opera)return"";try{if(/Bitmap/i.test(e))return"";var t=e.match(/width:([ \d.]*p[tx])/i)[1],n=e.match(/height:([ \d.]*p[tx])/i)[1],i=e.match(/src=\s*"([^"]*)"/i)[1];return'<img width="'+s(t)+'" height="'+s(n)+'" src="'+i+'" />'}catch(e){return""}}).replace(/<\/?div[^>]*>/g,"").replace(/v:\w+=(["']?)[^'"]+\1/g,"").replace(/<(!|script[^>]*>.*?<\/script(?=[>\s])|\/?(\?xml(:\w+)?|xml|meta|link|style|\w+:\w+)(?=[\s\/>]))[^>]*>/gi,"").replace(/<p [^>]*class="?MsoHeading"?[^>]*>(.*?)<\/p>/gi,"<p><strong>$1</strong></p>").replace(/\s+(class|lang|align)\s*=\s*(['"]?)([\w-]+)\2/gi,function(e,t,n,i){return"class"==t&&"MsoListParagraph"==i?e:""}).replace(/<(font|span)[^>]*>(\s*)<\/\1>/gi,function(e,t,n){return n.replace(/[\t\r\n ]+/g," ")}).replace(/(<[a-z][^>]*)\sstyle=(["'])([^\2]*?)\2/gi,function(e,t,n,i){e=[],i=i.replace(/^\s+|\s+$/,"").replace(/&#39;/g,"'").replace(/&quot;/gi,"'").replace(/[\d.]+(cm|pt)/g,function(e){return p.transUnitToPx(e)}).split(/;\s*/g),n=0;for(var o;o=i[n];n++){var r,a=o.split(":");if(2==a.length&&(o=a[0].toLowerCase(),r=a[1].toLowerCase(),!(/^(background)\w*/.test(o)&&0==r.replace(/(initial|\s)/g,"").length||/^(margin)\w*/.test(o)&&/^0\w+$/.test(r)))){switch(o){case"mso-padding-alt":case"mso-padding-top-alt":case"mso-padding-right-alt":case"mso-padding-bottom-alt":case"mso-padding-left-alt":case"mso-margin-alt":case"mso-margin-top-alt":case"mso-margin-right-alt":case"mso-margin-bottom-alt":case"mso-margin-left-alt":case"mso-height":case"mso-width":case"mso-vertical-align-alt":/<table/.test(t)||(e[n]=o.replace(/^mso-|-alt$/g,"")+":"+s(r));continue;case"horiz-align":e[n]="text-align:"+r;continue;case"vert-align":e[n]="vertical-align:"+r;continue;case"font-color":case"mso-foreground":e[n]="color:"+r;continue;case"mso-background":case"mso-highlight":e[n]="background:"+r;continue;case"mso-default-height":e[n]="min-height:"+s(r);continue;case"mso-default-width":e[n]="min-width:"+s(r);continue;case"mso-padding-between-alt":e[n]="border-collapse:separate;border-spacing:"+s(r);continue;case"text-line-through":"single"!=r&&"double"!=r||(e[n]="text-decoration:line-through");continue;case"mso-zero-height":"yes"==r&&(e[n]="display:none");continue;case"margin":if(!/[1-9]/.test(r))continue}/^(mso|column|font-emph|lang|layout|line-break|list-image|nav|panose|punct|row|ruby|sep|size|src|tab-|table-border|text-(?:decor|trans)|top-bar|version|vnd|word-break)/.test(o)||/text\-indent|padding|margin/.test(o)&&/\-[\d.]+/.test(r)||(e[n]=o+":"+a[1])}}return t+(e.length?' style="'+e.join(";").replace(/;{2,}/g,";")+'"':"")}):e}}(),function(){function s(e,t,n){return e.push("\n"),t+(n?1:-1)}function l(e,t){for(var n=0;n<t;n++)e.push("    ")}function d(e,t,n,i){switch(e.type){case"root":for(var o,r=0;o=e.children[r++];)n&&"element"==o.type&&!w.$inlineWithA[o.tagName]&&1<r&&(s(t,i,!0),l(t,i)),d(o,t,n,i);break;case"text":"pre"==e.parentNode.tagName?t.push(e.data):t.push(u[e.parentNode.tagName]?p.html(e.data):e.data.replace(/[ ]{2}/g," &nbsp;"));break;case"element":!function(e,t,n,i){var o="";if(e.attrs){var r,o=[],a=e.attrs;for(r in a)o.push(r+(void 0!==a[r]?'="'+(c[r]?p.html(a[r]).replace(/["]/g,function(e){return"&quot;"}):p.unhtml(a[r]))+'"':""));o=o.join(" ")}if(t.push("<"+e.tagName+(o?" "+o:"")+(w.$empty[e.tagName]?"/":"")+">"),n&&!w.$inlineWithA[e.tagName]&&"pre"!=e.tagName&&e.children&&e.children.length&&(i=s(t,i,!0),l(t,i)),e.children&&e.children.length)for(o=0;a=e.children[o++];)n&&"element"==a.type&&!w.$inlineWithA[a.tagName]&&1<o&&(s(t,i),l(t,i)),d(a,t,n,i);w.$empty[e.tagName]||(n&&!w.$inlineWithA[e.tagName]&&"pre"!=e.tagName&&e.children&&e.children.length&&(i=s(t,i),l(t,i)),t.push("</"+e.tagName+">"))}(e,t,n,i);break;case"comment":t.push("\x3c!--"+e.data+"--\x3e")}return t}function o(e,t){var n;if("element"==e.type&&e.getAttr("id")==t)return e;if(e.children&&e.children.length)for(var i=0;n=e.children[i++];)if(n=o(n,t))return n}function r(e,t,n){if("element"==e.type&&e.tagName==t&&n.push(e),e.children&&e.children.length)for(var i,o=0;i=e.children[o++];)r(i,t,n)}var a=UE.uNode=function(e){this.type=e.type,this.data=e.data,this.tagName=e.tagName,this.parentNode=e.parentNode,this.attrs=e.attrs||{},this.children=e.children},c={href:1,src:1,_src:1,_href:1,cdata_data:1},u={style:1,script:1};a.createElement=function(e){return/[<>]/.test(e)?UE.htmlparser(e).children[0]:new a({type:"element",children:[],tagName:e})},a.createText=function(e,t){return new UE.uNode({type:"text",data:t?e:p.unhtml(e||"")})},a.prototype={toHtml:function(e){var t=[];return d(this,t,e,0),t.join("")},innerHTML:function(e){if("element"!=this.type||w.$empty[this.tagName])return this;if(p.isString(e)){if(this.children)for(var t,n=0;t=this.children[n++];)t.parentNode=null;for(this.children=[],e=UE.htmlparser(e),n=0;t=e.children[n++];)this.children.push(t),t.parentNode=this;return this}return(e=new UE.uNode({type:"root",children:this.children})).toHtml()},innerText:function(e,t){if("element"!=this.type||w.$empty[this.tagName])return this;if(e){if(this.children)for(var n,i=0;n=this.children[i++];)n.parentNode=null;return this.children=[],this.appendChild(a.createText(e,t)),this}return this.toHtml().replace(/<[^>]+>/g,"")},getData:function(){return"element"==this.type?"":this.data},firstChild:function(){return this.children?this.children[0]:null},lastChild:function(){return this.children?this.children[this.children.length-1]:null},previousSibling:function(){for(var e,t=this.parentNode,n=0;e=t.children[n];n++)if(e===this)return 0==n?null:t.children[n-1]},nextSibling:function(){for(var e,t=this.parentNode,n=0;e=t.children[n++];)if(e===this)return t.children[n]},replaceChild:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n,i=0;n=this.children[i];i++)if(n===t)return this.children.splice(i,1,e),t.parentNode=null,e.parentNode=this,e}},appendChild:function(e){if("root"==this.type||"element"==this.type&&!w.$empty[this.tagName]){this.children||(this.children=[]),e.parentNode&&e.parentNode.removeChild(e);for(var t,n=0;t=this.children[n];n++)if(t===e){this.children.splice(n,1);break}return this.children.push(e),e.parentNode=this,e}},insertBefore:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n,i=0;n=this.children[i];i++)if(n===t)return this.children.splice(i,0,e),e.parentNode=this,e}},insertAfter:function(e,t){if(this.children){e.parentNode&&e.parentNode.removeChild(e);for(var n,i=0;n=this.children[i];i++)if(n===t)return this.children.splice(i+1,0,e),e.parentNode=this,e}},removeChild:function(e,t){if(this.children)for(var n,i=0;n=this.children[i];i++)if(n===e){if(this.children.splice(i,1),n.parentNode=null,t&&n.children&&n.children.length)for(var o,r=0;o=n.children[r];r++)this.children.splice(i+r,0,o),o.parentNode=this;return n}},getAttr:function(e){return this.attrs&&this.attrs[e.toLowerCase()]},setAttr:function(e,t){if(e)if(this.attrs||(this.attrs={}),p.isObject(e))for(var n in e)e[n]?this.attrs[n.toLowerCase()]=e[n]:delete this.attrs[n];else t?this.attrs[e.toLowerCase()]=t:delete this.attrs[e];else delete this.attrs},getIndex:function(){for(var e,t=this.parentNode,n=0;e=t.children[n];n++)if(e===this)return n;return-1},getNodeById:function(e){var t;if(this.children&&this.children.length)for(var n=0;t=this.children[n++];)if(t=o(t,e))return t},getNodesByTagName:function(e){e=p.trim(e).replace(/[ ]{2,}/g," ").split(" ");var i=[],o=this;return p.each(e,function(e){if(o.children&&o.children.length)for(var t,n=0;t=o.children[n++];)r(t,e,i)}),i},getStyle:function(e){var t=this.getAttr("style");return t&&(e=t.match(new RegExp("(^|;)\\s*"+e+":([^;]+)","i")))&&e[0]?e[2]:""},setStyle:function(e,t){function n(e,t){i=i.replace(new RegExp("(^|;)\\s*"+e+":([^;]+;?)","gi"),"$1"),t&&(i=e+":"+p.unhtml(t)+";"+i)}var i=this.getAttr("style");if(i||(i=""),p.isObject(e))for(var o in e)n(o,e[o]);else n(e,t);this.setAttr("style",p.trim(i))},traversal:function(e){return this.children&&this.children.length&&function e(t,n){if(t.children&&t.children.length)for(var i,o=0;i=t.children[o];)e(i,n),i.parentNode&&(i.children&&i.children.length&&n(i),i.parentNode&&o++);else n(t)}(this,e),this}}}(),UE.htmlparser=function(e,n){function t(e,t){if(u[e.tagName]){var n=d.createElement(u[e.tagName]);e.appendChild(n),n.appendChild(d.createText(t))}else e.appendChild(d.createText(t))}function a(e,t,n){var i;if(i=c[t]){for(var o,r=e;"root"!=r.type;){if(p.isArray(i)?-1!=p.indexOf(i,r.tagName):i==r.tagName){e=r,o=!0;break}r=r.parentNode}o||(e=a(e,p.isArray(i)?i[0]:i))}if(i=new d({parentNode:e,type:"element",tagName:t.toLowerCase(),children:w.$empty[t]?null:[]}),n){for(r={};o=s.exec(n);)r[o[1].toLowerCase()]=l[o[1].toLowerCase()]?o[2]||o[3]||o[4]:p.unhtml(o[2]||o[3]||o[4]);i.attrs=r}return e.children.push(i),w.$empty[t]?e:i}var i=/<(?:(?:\/([^>]+)>)|(?:!--([\S|\s]*?)--\x3e)|(?:([^\s\/<>]+)\s*((?:(?:"[^"]*")|(?:'[^']*')|[^"'<>])*)\/?>))/g,s=/([\w\-:.]+)(?:(?:\s*=\s*(?:(?:"([^"]*)")|(?:'([^']*)')|([^\s>]+)))|(?=\s|$))/g,o={b:1,code:1,i:1,u:1,strike:1,s:1,tt:1,strong:1,q:1,samp:1,em:1,span:1,sub:1,img:1,sup:1,font:1,big:1,small:1,iframe:1,a:1,br:1,pre:1};e=e.replace(new RegExp(f.fillChar,"g"),""),n||(e=e.replace(new RegExp("[\\r\\t\\n"+(n?"":" ")+"]*</?(\\w+)\\s*(?:[^>]*)>[\\r\\t\\n"+(n?"":" ")+"]*","g"),function(e,t){return t&&o[t.toLowerCase()]?e.replace(/(^[\n\r]+)|([\n\r]+$)/g,""):e.replace(new RegExp("^[\\r\\n"+(n?"":" ")+"]+"),"").replace(new RegExp("[\\r\\n"+(n?"":" ")+"]+$"),"")}));for(var r,l={href:1,src:1},d=UE.uNode,c={td:"tr",tr:["tbody","thead","tfoot"],tbody:"table",th:"tr",thead:"table",tfoot:"table",caption:"table",li:["ul","ol"],dt:"dl",dd:"dl",option:"select"},u={ol:"li",ul:"li"},m=0,h=0,g=new d({type:"root",children:[]}),b=g;r=i.exec(e);){m=r.index;try{if(h<m&&t(b,e.slice(h,m)),r[3])w.$cdata[b.tagName]?t(b,r[0]):b=a(b,r[3].toLowerCase(),r[4]);else if(r[1]){if("root"!=b.type)if(w.$cdata[b.tagName]&&!w.$cdata[r[1]])t(b,r[0]);else{for(m=b;"element"==b.type&&b.tagName!=r[1].toLowerCase();)if("root"==(b=b.parentNode).type)throw b=m,"break";b=b.parentNode}}else r[2]&&b.children.push(new d({type:"comment",data:r[2],parentNode:b}))}catch(e){}h=i.lastIndex}return h<e.length&&t(b,e.slice(h)),g},UE.filterNode=function(){function s(n,e){switch(n.type){case"element":var t;if(t=e[n.tagName])if("-"===t)n.parentNode.removeChild(n);else if(p.isFunction(t)){var i=n.parentNode,o=n.getIndex();if(t(n),n.parentNode){if(n.children)for(t=0;o=n.children[t];)s(o,e),o.parentNode&&t++}else for(t=o;o=i.children[t];)s(o,e),o.parentNode&&t++}else{if((t=t.$)&&n.attrs){var r;o={};for(i in t){if(r=n.getAttr(i),"style"==i&&p.isArray(t[i])){var a=[];p.each(t[i],function(e){var t;(t=n.getStyle(e))&&a.push(e+":"+t)}),r=a.join(";")}r&&(o[i]=r)}n.attrs=o}if(n.children)for(t=0;o=n.children[t];)s(o,e),o.parentNode&&t++}else if(w.$cdata[n.tagName])n.parentNode.removeChild(n);else for(i=n.parentNode,o=n.getIndex(),n.parentNode.removeChild(n,!0),t=o;o=i.children[t];)s(o,e),o.parentNode&&t++;break;case"comment":n.parentNode.removeChild(n)}}return function(e,t){if(p.isEmptyObject(t))return e;var n,i;for((n=t["-"])&&p.each(n.split(" "),function(e){t[e]="-"}),n=0;i=e.children[n];)s(i,t),i.parentNode&&n++;return e}}(),UE.plugin=(zu={},{register:function(e,t,n,i){n&&p.isFunction(n)&&(i=n,n=null),zu[e]={optionName:n||e,execFn:t,afterDisabled:i}},load:function(n){p.each(zu,function(e){var t=e.execFn.call(n);!1!==n.options[e.optionName]?t&&p.each(t,function(e,t){switch(t.toLowerCase()){case"shortcutkey":n.addshortcutkey(e);break;case"bindevents":p.each(e,function(e,t){n.addListener(t,e)});break;case"bindmultievents":p.each(p.isArray(e)?e:[e],function(t){var e=p.trim(t.type).split(/\s+/);p.each(e,function(e){n.addListener(e,t.handler)})});break;case"commands":p.each(e,function(e,t){n.commands[t]=e});break;case"outputrule":n.addOutputRule(e);break;case"inputrule":n.addInputRule(e);break;case"defaultoptions":n.setOpt(e)}}):e.afterDisabled&&e.afterDisabled.call(n)}),p.each(UE.plugins,function(e){e.call(n)})},run:function(e,t){var n=zu[e];n&&n.exeFn.call(t)}});var ja=UE.keymap={Backspace:8,Tab:9,Enter:13,Shift:16,Control:17,Alt:18,CapsLock:20,Esc:27,Spacebar:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,Insert:45,Del:46,NumLock:144,Cmd:91,"=":187,"-":189,b:66,i:73,z:90,y:89,v:86,x:88,s:83,n:78},Z=UE.LocalStorage=(Vu=window.localStorage||((Xu=document.createElement("div")).style.display="none",Xu.addBehavior?(Xu.addBehavior("#default#userdata"),{getItem:function(e){var t=null;try{document.body.appendChild(Xu),Xu.load(Wu),t=Xu.getAttribute(e),document.body.removeChild(Xu)}catch(e){}return t},setItem:function(e,t){document.body.appendChild(Xu),Xu.setAttribute(e,t),Xu.save(Wu),document.body.removeChild(Xu)},removeItem:function(e){document.body.appendChild(Xu),Xu.removeAttribute(e),Xu.save(Wu),document.body.removeChild(Xu)}}):null)||null,Wu="localStorage",{saveLocalData:function(e,t){return!(!Vu||!t||(Vu.setItem(e,t),0))},getLocalData:function(e){return Vu?Vu.getItem(e):null},removeItem:function(e){Vu&&Vu.removeItem(e)}}),Xu,Vu,Wu,hA,iA,KH,mL,x7,y7,z7,A7,O7,P7,Q7,S7,T7,U7,V7,W7,Z8,$8,_8,a9,s9,t9,u9,O9,P9,Q9,R9,X9,Y9,Z9,$9,_9,gaa,haa,iaa,jaa,kaa,laa,vaa,waa,xaa,yaa,zaa,Haa,Iaa,Jaa,qba,rba,sba,tba,uba,Fba,Gba,Hba,Iba,Jba,Qba,Rba,Sba,Tba,Lca,Mca,Nca,Oca,Pca,ida,jda,kda,bda,cda,dda,eda,fda,gda,hda,cea,dea,eea,fea,kea,lea,mea,nea,nfa,ofa,pfa,rfa,sfa,tfa,ufa;UE.Editor.prototype.setPreferences=function(e,t){var n={};p.isString(e)?n[e]=t:n=e;var i=Z.getLocalData("ueditor_preference");i&&(i=p.str2json(i))?p.extend(i,n):i=n,i&&Z.saveLocalData("ueditor_preference",p.json2str(i))},UE.Editor.prototype.getPreferences=function(e){var t=Z.getLocalData("ueditor_preference");return t&&(t=p.str2json(t))?e?t[e]:t:null},UE.Editor.prototype.removePreferences=function(e){var t=Z.getLocalData("ueditor_preference");t&&(t=p.str2json(t))&&(t[e]=void 0,delete t[e]),t&&Z.saveLocalData("ueditor_preference",p.json2str(t))},UE.plugins.defaultfilter=function(){var a=this;a.setOpt({allowDivTransToP:!0,disabledTableInTable:!0}),a.addInputRule(function(e){var n,o=this.options.allowDivTransToP;e.traversal(function(i){if("element"==i.type)if(w.$cdata[i.tagName]||!a.options.autoClearEmptyNode||!w.$inline[i.tagName]||w.$empty[i.tagName]||i.attrs&&!p.isEmptyObject(i.attrs))switch(i.tagName){case"style":case"script":i.setAttr({cdata_tag:i.tagName,cdata_data:i.innerHTML()||"",_ue_custom_node_:"true"}),i.tagName="div",i.innerHTML("");break;case"a":(n=i.getAttr("href"))&&i.setAttr("_href",n);break;case"img":if((n=i.getAttr("src"))&&/^data:/.test(n)){i.parentNode.removeChild(i);break}i.setAttr("_src",i.getAttr("src"));break;case"span":r.webkit&&(n=i.getStyle("white-space"))&&/nowrap|normal/.test(n)&&(i.setStyle("white-space",""),a.options.autoClearEmptyNode&&p.isEmptyObject(i.attrs)&&i.parentNode.removeChild(i,!0)),(n=i.getAttr("id"))&&/^_baidu_bookmark_/i.test(n)&&i.parentNode.removeChild(i);break;case"p":(n=i.getAttr("align"))&&(i.setAttr("align"),i.setStyle("text-align",n)),p.each(i.children,function(e){if("element"==e.type&&"p"==e.tagName){var t=e.nextSibling();for(i.parentNode.insertAfter(e,i);t;){var n=t.nextSibling();i.parentNode.insertAfter(t,e),e=t,t=n}return!1}}),i.firstChild()||i.innerHTML(r.ie?"&nbsp;":"<br/>");break;case"div":if(i.getAttr("cdata_tag"))break;if((n=i.getAttr("class"))&&/^line number\d+/.test(n))break;if(!o)break;for(var e,t=UE.uNode.createElement("p");e=i.firstChild();)"text"!=e.type&&UE.dom.dtd.$block[e.tagName]?t.firstChild()?(i.parentNode.insertBefore(t,i),t=UE.uNode.createElement("p")):i.parentNode.insertBefore(e,i):t.appendChild(e);t.firstChild()&&i.parentNode.insertBefore(t,i),i.parentNode.removeChild(i);break;case"dl":i.tagName="ul";break;case"dt":case"dd":i.tagName="li";break;case"li":(e=i.getAttr("class"))&&/list\-/.test(e)||i.setAttr(),e=i.getNodesByTagName("ol ul"),UE.utils.each(e,function(e){i.parentNode.insertAfter(e,i)});break;case"td":case"th":case"caption":i.children&&i.children.length||i.appendChild(r.ie11below?UE.uNode.createText(" "):UE.uNode.createElement("br"));break;case"table":a.options.disabledTableInTable&&function(e){for(;e&&"element"==e.type;){if("td"==e.tagName)return!0;e=e.parentNode}return!1}(i)&&(i.parentNode.insertBefore(UE.uNode.createText(i.innerText()),i),i.parentNode.removeChild(i))}else i.firstChild()?"span"!=i.tagName||i.attrs&&!p.isEmptyObject(i.attrs)||i.parentNode.removeChild(i,!0):i.parentNode.removeChild(i)})}),a.addOutputRule(function(e){var t;e.traversal(function(e){if("element"==e.type)if(!a.options.autoClearEmptyNode||!w.$inline[e.tagName]||w.$empty[e.tagName]||e.attrs&&!p.isEmptyObject(e.attrs))switch(e.tagName){case"div":(t=e.getAttr("cdata_tag"))&&(e.tagName=t,e.appendChild(UE.uNode.createText(e.getAttr("cdata_data"))),e.setAttr({cdata_tag:"",cdata_data:"",_ue_custom_node_:""}));break;case"a":(t=e.getAttr("_href"))&&e.setAttr({href:p.html(t),_href:""});break;case"span":(t=e.getAttr("id"))&&/^_baidu_bookmark_/i.test(t)&&e.parentNode.removeChild(e);break;case"img":(t=e.getAttr("_src"))&&e.setAttr({src:e.getAttr("_src"),_src:""})}else e.firstChild()?"span"!=e.tagName||e.attrs&&!p.isEmptyObject(e.attrs)||e.parentNode.removeChild(e,!0):e.parentNode.removeChild(e)})})},UE.commands.inserthtml={execCommand:function(e,t,n){var i,o=this;if(t&&!0!==o.fireEvent("beforeinserthtml",t)){var a;if((e=(i=o.selection.getRange()).document.createElement("div")).style.display="inline",n||(n=UE.htmlparser(t),o.options.filterRules&&UE.filterNode(n,o.options.filterRules),o.filterInputRule(n),t=n.toHtml()),e.innerHTML=p.trim(t),!i.collapsed&&(n=i.startContainer,f.isFillChar(n)&&i.setStartBefore(n),n=i.endContainer,f.isFillChar(n)&&i.setEndAfter(n),i.txtToElmBoundary(),i.endContainer&&1==i.endContainer.nodeType&&(n=i.endContainer.childNodes[i.endOffset])&&f.isBr(n)&&i.setEndAfter(n),0==i.startOffset&&(n=i.startContainer,f.isBoundaryNode(n,"firstChild")&&(n=i.endContainer,i.endOffset==(3==n.nodeType?n.nodeValue.length:n.childNodes.length)&&f.isBoundaryNode(n,"lastChild")&&(o.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>",i.setStart(o.body.firstChild,0).collapse(!0)))),!i.collapsed&&i.deleteContents(),1==i.startContainer.nodeType))if((n=i.startContainer.childNodes[i.startOffset])&&f.isBlockElm(n)&&(a=n.previousSibling)&&f.isBlockElm(a)){for(i.setEnd(a,a.childNodes.length).collapse();n.firstChild;)a.appendChild(n.firstChild);f.remove(n)}var s,l,d,c=0;i.inFillChar()&&(n=i.startContainer,f.isFillChar(n)?(i.setStartBefore(n).collapse(!0),f.remove(n)):f.isFillChar(n,!0)&&(n.nodeValue=n.nodeValue.replace(Q,""),i.startOffset--,i.collapsed&&i.collapse(!0)));var u=f.findParentByTagName(i.startContainer,"li",!0);if(u){for(var m;n=e.firstChild;){for(;n&&(3==n.nodeType||!f.isBlockElm(n)||"HR"==n.tagName);)m=n.nextSibling,i.insertNode(n).collapse(),s=n,n=m;if(n)if(/^(ol|ul)$/i.test(n.tagName)){for(;n.firstChild;)s=n.firstChild,f.insertAfter(u,n.firstChild),u=u.nextSibling;f.remove(n)}else m=n.nextSibling,a=o.document.createElement("li"),f.insertAfter(u,a),a.appendChild(n),s=n,n=m,u=a}u=f.findParentByTagName(i.startContainer,"li",!0),f.isEmptyBlock(u)&&f.remove(u),s&&i.setStartAfter(s).collapse(!0).select(!0)}else{for(;n=e.firstChild;){if(c){for(s=o.document.createElement("p");n&&(3==n.nodeType||!w.$block[n.tagName]);)d=n.nextSibling,s.appendChild(n),n=d;s.firstChild&&(n=s)}if(i.insertNode(n),d=n.nextSibling,!c&&n.nodeType==f.NODE_ELEMENT&&f.isBlockElm(n)&&(s=f.findParent(n,function(e){return f.isBlockElm(e)}))&&"body"!=s.tagName.toLowerCase()&&(!w[s.tagName][n.nodeName]||n.parentNode!==s)){if(w[s.tagName][n.nodeName])for(l=n.parentNode;l!==s;)l=(a=l).parentNode;else a=s;f.breakParent(n,a||l),a=n.previousSibling,f.trimWhiteTextNode(a),a.childNodes.length||f.remove(a),!r.ie&&(m=n.nextSibling)&&f.isBlockElm(m)&&m.lastChild&&!f.isBr(m.lastChild)&&m.appendChild(o.document.createElement("br")),c=1}if(m=n.nextSibling,!e.firstChild&&m&&f.isBlockElm(m)){i.setStart(m,0).collapse(!0);break}i.setEndAfter(n).collapse()}if(n=i.startContainer,d&&f.isBr(d)&&f.remove(d),f.isBlockElm(n)&&f.isEmptyNode(n))if(d=n.nextSibling)f.remove(n),1==d.nodeType&&w.$block[d.tagName]&&i.setStart(d,0).collapse(!0).shrinkBoundary();else try{n.innerHTML=r.ie?f.fillChar:"<br/>"}catch(e){i.setStartBefore(n),f.remove(n)}try{i.select(!0)}catch(e){}}setTimeout(function(){(i=o.selection.getRange()).scrollToView(o.autoHeightEnabled,o.autoHeightEnabled?f.getXY(o.iframe).y:0),o.fireEvent("afterinserthtml",t)},200)}}},UE.plugins.autotypeset=function(){function c(e,t){return e&&3!=e.nodeType?f.isBr(e)?1:e&&e.parentNode&&i[e.tagName.toLowerCase()]?m&&m.contains(e)||e.getAttribute("pagebreak")?0:t?!f.isEmptyBlock(e):f.isEmptyBlock(e,new RegExp("[\\s"+f.fillChar+"]","g")):void 0:0}function u(e){e.style.cssText||(f.removeAttributes(e,["style"]),"span"==e.tagName.toLowerCase()&&f.hasNoAttributes(e)&&f.remove(e,!0))}function e(e,t){var n;if(t){if(!h.pasteFilter)return;(n=this.document.createElement("div")).innerHTML=t.html}else n=this.document.body;for(var i,o=f.getElementsByTagName(n,"*"),r=0;i=o[r++];)if(!0!==this.fireEvent("excludeNodeinautotype",i)){if(h.clearFontSize&&i.style.fontSize&&(f.removeStyle(i,"font-size"),u(i)),h.clearFontFamily&&i.style.fontFamily&&(f.removeStyle(i,"font-family"),u(i)),c(i)){if(h.mergeEmptyline)for(var a,s=i.nextSibling,l=f.isBr(i);c(s)&&(s=(a=s).nextSibling,!l||s&&(!s||f.isBr(s)));)f.remove(a);if(h.removeEmptyline&&f.inDoc(i,n)&&!b[i.parentNode.tagName.toLowerCase()]){if(f.isBr(i)&&(s=i.nextSibling)&&!f.isBr(s))continue;f.remove(i);continue}}if(c(i,!0)&&"SPAN"!=i.tagName&&(h.indent&&(i.style.textIndent=h.indentValue),h.textAlign&&(i.style.textAlign=h.textAlign)),h.removeClass&&i.className&&!g[i.className.toLowerCase()]){if(m&&m.contains(i))continue;f.removeAttributes(i,["class"])}if(h.imageBlockLine&&"img"==i.tagName.toLowerCase()&&!i.getAttribute("emotion"))if(t)switch(l=i,h.imageBlockLine){case"left":case"right":case"none":var d;for(s=l.parentNode;w.$inline[s.tagName]||"A"==s.tagName;)s=s.parentNode;if("P"==(a=s).tagName&&"center"==f.getStyle(a,"text-align")&&!f.isBody(a)&&1==f.getChildCount(a,function(e){return!f.isBr(e)&&!f.isWhitespace(e)}))if(d=a.previousSibling,s=a.nextSibling,d&&s&&1==d.nodeType&&1==s.nodeType&&d.tagName==s.tagName&&f.isBlockElm(d)){for(d.appendChild(a.firstChild);s.firstChild;)d.appendChild(s.firstChild);f.remove(a),f.remove(s)}else f.setStyle(a,"text-align","");f.setStyle(l,"float",h.imageBlockLine);break;case"center":if("center"!=this.queryCommandValue("imagefloat")){for(s=l.parentNode,f.setStyle(l,"float","none"),a=l;s&&1==f.getChildCount(s,function(e){return!f.isBr(e)&&!f.isWhitespace(e)})&&(w.$inline[s.tagName]||"A"==s.tagName);)s=(a=s).parentNode;s=this.document.createElement("p"),f.setAttributes(s,{style:"text-align:center"}),a.parentNode.insertBefore(s,a),s.appendChild(a),f.setStyle(a,"float","")}}else this.selection.getRange().selectNode(i).select(),this.execCommand("imagefloat",h.imageBlockLine);h.removeEmptyNode&&h.removeTagNames[i.tagName.toLowerCase()]&&f.hasNoAttributes(i)&&f.isEmptyBlock(i)&&f.remove(i)}h.tobdc&&((o=UE.htmlparser(n.innerHTML)).traversal(function(e){if("text"==e.type){for(var t=e.data,n=(t=p.html(t),""),i=0;i<t.length;i++)n=32==t.charCodeAt(i)?n+String.fromCharCode(12288):t.charCodeAt(i)<127?n+String.fromCharCode(t.charCodeAt(i)+65248):n+t.charAt(i);e.data=n}}),n.innerHTML=o.toHtml()),h.bdc2sb&&((o=UE.htmlparser(n.innerHTML)).traversal(function(e){if("text"==e.type){for(var t=e.data,n="",i=0;i<t.length;i++){var o=t.charCodeAt(i);n=65281<=o&&o<=65373?n+String.fromCharCode(t.charCodeAt(i)-65248):12288==o?n+String.fromCharCode(t.charCodeAt(i)-12288+32):n+t.charAt(i)}e.data=n}}),n.innerHTML=o.toHtml()),t&&(t.html=n.innerHTML)}this.setOpt({autotypeset:{mergeEmptyline:!0,removeClass:!0,removeEmptyline:!1,textAlign:"left",imageBlockLine:"center",pasteFilter:!1,clearFontSize:!1,clearFontFamily:!1,removeEmptyNode:!1,removeTagNames:p.extend({div:1},w.$removeEmpty),indent:!1,indentValue:"2em",bdc2sb:!1,tobdc:!1}});var m,t,n=this,h=n.options.autotypeset,g={selectTdClass:1,pagebreak:1,anchorclass:1},b={li:1},i={div:1,p:1,blockquote:1,center:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,span:1};h&&(t=n.getPreferences("autotypeset"),p.extend(n.options.autotypeset,t),h.pasteFilter&&n.addListener("beforepaste",e),n.commands.autotypeset={execCommand:function(){n.removeListener("beforepaste",e),h.pasteFilter&&n.addListener("beforepaste",e),e.call(n)}})},UE.plugin.register("autosubmit",function(){return{shortcutkey:{autosubmit:"ctrl+13"},commands:{autosubmit:{execCommand:function(){var e=f.findParentByTagName(this.iframe,"form",!1);e&&!1!==this.fireEvent("beforesubmit")&&(this.sync(),e.submit())}}}}}),UE.plugin.register("background",function(){function n(e){var i={};return e=e.split(";"),p.each(e,function(e){var t=e.indexOf(":"),n=p.trim(e.substr(0,t)).toLowerCase();n&&(i[n]=p.trim(e.substr(t+1)||""))}),i}function i(e){if(e){var t,n=[];for(t in e)e.hasOwnProperty(t)&&n.push(t+":"+e[t]+"; ");p.cssRule("editor_background",n.length?"body{"+n.join("")+"}":"",s.document)}else p.cssRule("editor_background","",s.document)}var o,s=this,a=/body[\s]*\{(.+)\}/i,e=s.hasContents;return s.hasContents=function(){return!!s.queryCommandValue("background")||e.apply(s,arguments)},{bindEvents:{getAllHtml:function(e,t){var n,i=this.body,o=0<(a=f.getComputedStyle(i,"background-image")).indexOf(s.options.imagePath)?a.substring(a.indexOf(s.options.imagePath),a.length-1).replace(/"|\(|\)/gi,""):"none"!=a?a.replace(/url\("?|"?\)/gi,""):"",a='<style type="text/css">body{';i={"background-color":f.getComputedStyle(i,"background-color")||"#ffffff","background-image":o?"url("+o+")":"","background-repeat":f.getComputedStyle(i,"background-repeat")||"","background-position":r.ie?f.getComputedStyle(i,"background-position-x")+" "+f.getComputedStyle(i,"background-position-y"):f.getComputedStyle(i,"background-position"),height:f.getComputedStyle(i,"height")};for(n in i)i.hasOwnProperty(n)&&(a+=n+":"+i[n]+"; ");t.push(a+"}</style> ")},aftersetcontent:function(){0==o&&i()}},inputRule:function(e){o=!1,p.each(e.getNodesByTagName("p"),function(e){var t=e.getAttr("data-background");t&&(o=!0,i(n(t)),e.parentNode.removeChild(e))})},outputRule:function(e){var t=(p.cssRule("editor_background",this.document)||"").replace(/[\n\r]+/g,"").match(a);t&&e.appendChild(UE.uNode.createElement('<p style="display:none;" data-background="'+p.trim(t[1].replace(/"/g,"").replace(/[\s]+/g," "))+'"><br/></p>'))},commands:{background:{execCommand:function(e,t){i(t)},queryCommandValue:function(){var e=(p.cssRule("editor_background",this.document)||"").replace(/[\n\r]+/g,"").match(a);return e?n(e[1]):null},notNeedUndo:!0}}}}),UE.commands.imagefloat={execCommand:function(e,t){var n=this.selection.getRange();if(!n.collapsed){var i=n.getClosedNode();if(i&&"IMG"==i.tagName)switch(t){case"left":case"right":case"none":for(var o,r,a=i.parentNode;w.$inline[a.tagName]||"A"==a.tagName;)a=a.parentNode;if("P"==(o=a).tagName&&"center"==f.getStyle(o,"text-align")){if(!f.isBody(o)&&1==f.getChildCount(o,function(e){return!f.isBr(e)&&!f.isWhitespace(e)}))if(a=o.previousSibling,r=o.nextSibling,a&&r&&1==a.nodeType&&1==r.nodeType&&a.tagName==r.tagName&&f.isBlockElm(a)){for(a.appendChild(o.firstChild);r.firstChild;)a.appendChild(r.firstChild);f.remove(o),f.remove(r)}else f.setStyle(o,"text-align","");n.selectNode(i).select()}f.setStyle(i,"float","none"==t?"":t),"none"==t&&f.removeAttributes(i,"align");break;case"center":if("center"!=this.queryCommandValue("imagefloat")){for(a=i.parentNode,f.setStyle(i,"float",""),f.removeAttributes(i,"align"),o=i;a&&1==f.getChildCount(a,function(e){return!f.isBr(e)&&!f.isWhitespace(e)})&&(w.$inline[a.tagName]||"A"==a.tagName);)a=(o=a).parentNode;n.setStartBefore(o).setCursor(!1),(a=this.document.createElement("div")).appendChild(o),f.setStyle(o,"float",""),this.execCommand("insertHtml",'<p id="_img_parent_tmp" style="text-align:center">'+a.innerHTML+"</p>"),(o=this.document.getElementById("_img_parent_tmp")).removeAttribute("id"),o=o.firstChild,n.selectNode(o).select(),(r=o.parentNode.nextSibling)&&f.isEmptyNode(r)&&f.remove(r)}}}},queryCommandValue:function(){var e,t=this.selection.getRange();return t.collapsed?"none":(t=t.getClosedNode())&&1==t.nodeType&&"IMG"==t.tagName?("none"==(e=f.getComputedStyle(t,"float")||t.getAttribute("align"))&&(e="center"==f.getComputedStyle(t.parentNode,"text-align")?"center":e),{left:1,right:1,center:1}[e]?e:"none"):"none"},queryCommandState:function(){var e=this.selection.getRange();return e.collapsed?-1:(e=e.getClosedNode())&&1==e.nodeType&&"IMG"==e.tagName?0:-1}},UE.commands.insertimage={execCommand:function(e,t){if((t=p.isArray(t)?t:[t]).length){var n=(o=this.selection.getRange()).getClosedNode();if(!0!==this.fireEvent("beforeinsertimage",t)){if(!n||!/img/i.test(n.tagName)||"edui-faked-video"==n.className&&-1==n.className.indexOf("edui-upload-video")||n.getAttribute("word_img")){var i,o=[];n="";if(i=t[0],1==t.length)n='<img src="'+i.src+'" '+(i._src?' _src="'+i._src+'" ':"")+(i.width?'width="'+i.width+'" ':"")+(i.height?' height="'+i.height+'" ':"")+("left"==i.floatStyle||"right"==i.floatStyle?' style="float:'+i.floatStyle+';"':"")+(i.title&&""!=i.title?' title="'+i.title+'"':"")+(i.border&&"0"!=i.border?' border="'+i.border+'"':"")+(i.alt&&""!=i.alt?' alt="'+i.alt+'"':"")+(i.hspace&&"0"!=i.hspace?' hspace = "'+i.hspace+'"':"")+(i.vspace&&"0"!=i.vspace?' vspace = "'+i.vspace+'"':"")+"/>","center"==i.floatStyle&&(n='<p style="text-align: center">'+n+"</p>"),o.push(n);else for(var r=0;i=t[r++];)n="<p "+("center"==i.floatStyle?'style="text-align: center" ':"")+'><img src="'+i.src+'" '+(i.width?'width="'+i.width+'" ':"")+(i._src?' _src="'+i._src+'" ':"")+(i.height?' height="'+i.height+'" ':"")+' style="'+(i.floatStyle&&"center"!=i.floatStyle?"float:"+i.floatStyle+";":"")+(i.border||"")+'" '+(i.title?' title="'+i.title+'"':"")+" /></p>",o.push(n);this.execCommand("insertHtml",o.join(""))}else r=(i=t.shift()).floatStyle,delete i.floatStyle,f.setAttributes(n,i),this.execCommand("imagefloat",r),0<t.length&&(o.setStartAfter(n).setCursor(!1,!0),this.execCommand("insertimage",t));this.fireEvent("afterinsertimage",t)}}}},UE.plugins.justify=function(){var d=f.isBlockElm,t={left:1,right:1,center:1,justify:1};UE.commands.justify={execCommand:function(e,t){var n,i=this.selection.getRange();return i.collapsed&&(n=this.document.createTextNode("p"),i.insertNode(n)),function(e,t){var n=e.createBookmark(),i=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!f.isBookmarkNode(e):!f.isWhitespace(e)};e.enlarge(!0);for(var o,r=e.createBookmark(),a=f.getNextDomNode(r.start,!1,i),s=e.cloneRange();a&&!(f.getPosition(a,r.end)&f.POSITION_FOLLOWING);)if(3!=a.nodeType&&d(a))a=f.getNextDomNode(a,!0,i);else{for(s.setStartBefore(a);a&&a!==r.end&&!d(a);)o=a,a=f.getNextDomNode(a,!1,null,function(e){return!d(e)});if(s.setEndAfter(o),a=s.getCommonAncestor(),!f.isBody(a)&&d(a))f.setStyles(a,p.isString(t)?{"text-align":t}:t);else{a=e.document.createElement("p"),f.setStyles(a,p.isString(t)?{"text-align":t}:t);var l=s.extractContents();a.appendChild(l),s.insertNode(a)}a=f.getNextDomNode(a,!1,i)}e.moveToBookmark(r).moveToBookmark(n)}(i,t),n&&(i.setStartBefore(n).collapse(!0),f.remove(n)),i.select(),!0},queryCommandValue:function(){var e=this.selection.getStart();e=f.getComputedStyle(e,"text-align");return t[e]?e:"left"},queryCommandState:function(){var e=this.selection.getStart();return e&&f.findParentByTagName(e,["td","th","caption"],!0)?-1:0}}},UE.plugins.font=function(){function d(e,n,i){var t=e.collapsed,o=e.createBookmark();if(t)for(t=o.start.parentNode;w.$inline[t.tagName];)t=t.parentNode;else t=f.getCommonAncestor(o.start,o.end);p.each(f.getElementsByTagName(t,"span"),function(e){if(e.parentNode&&!f.isBookmarkNode(e))if(/\s*border\s*:\s*none;?\s*/i.test(e.style.cssText))/^\s*border\s*:\s*none;?\s*$/.test(e.style.cssText)?f.remove(e,!0):f.removeStyle(e,"border");else{if(/border/i.test(e.style.cssText)&&"SPAN"==e.parentNode.tagName&&/border/i.test(e.parentNode.style.cssText)&&(e.style.cssText=e.style.cssText.replace(/border[^:]*:[^;]+;?/gi,"")),"fontborder"!=n||"none"!=i)for(var t=e.nextSibling;t&&1==t.nodeType&&"SPAN"==t.tagName;){if(f.isBookmarkNode(t)&&"fontborder"==n)e.appendChild(t);else if(t.style.cssText==e.style.cssText&&(f.moveChild(t,e),f.remove(t)),e.nextSibling===t)break;t=e.nextSibling}!function(e){for(var t;(t=e.parentNode)&&"SPAN"==t.tagName&&1==f.getChildCount(t,function(e){return!f.isBookmarkNode(e)&&!f.isBr(e)});)t.style.cssText+=e.style.cssText,f.remove(e,!0),e=t}(e),r.ie&&8<r.version&&(t=f.findParent(e,function(e){return"SPAN"==e.tagName&&/background-color/.test(e.style.cssText)}))&&!/background-color/.test(e.style.cssText)&&(e.style.backgroundColor=t.style.backgroundColor)}}),e.moveToBookmark(o),function(e,t,n){if(a[t]&&(e.adjustmentBoundary(),!e.collapsed&&1==e.startContainer.nodeType)){var i=e.startContainer.childNodes[e.startOffset];if(i&&f.isTagNode(i,"span")){var o=e.createBookmark();p.each(f.getElementsByTagName(i,"span"),function(e){!e.parentNode||f.isBookmarkNode(e)||"backcolor"==t&&f.getComputedStyle(e,"background-color").toLowerCase()===n||(f.removeStyle(e,a[t]),0==e.style.cssText.replace(/^\s+$/,"").length&&f.remove(e,!0))}),e.moveToBookmark(o)}}}(e,n,i)}var e={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family",underline:"text-decoration",strikethrough:"text-decoration",fontborder:"border"},c={underline:1,strikethrough:1,fontborder:1},a={forecolor:"color",backcolor:"background-color",fontsize:"font-size",fontfamily:"font-family"};for(var t in this.setOpt({fontfamily:[{name:"songti",val:"宋体,SimSun"},{name:"yahei",val:"微软雅黑,Microsoft YaHei"},{name:"kaiti",val:"楷体,楷体_GB2312, SimKai"},{name:"heiti",val:"黑体, SimHei"},{name:"lishu",val:"隶书, SimLi"},{name:"andaleMono",val:"andale mono"},{name:"arial",val:"arial, helvetica,sans-serif"},{name:"arialBlack",val:"arial black,avant garde"},{name:"comicSansMs",val:"comic sans ms"},{name:"impact",val:"impact,chicago"},{name:"timesNewRoman",val:"times new roman"}],fontsize:[10,11,12,14,16,18,20,24,36]}),this.addInputRule(function(e){p.each(e.getNodesByTagName("u s del font strike"),function(e){if("font"==e.tagName){var t,n=[];for(t in e.attrs)switch(t){case"size":n.push("font-size:"+({1:"10",2:"12",3:"16",4:"18",5:"24",6:"32",7:"48"}[e.attrs[t]]||e.attrs[t])+"px");break;case"color":n.push("color:"+e.attrs[t]);break;case"face":n.push("font-family:"+e.attrs[t]);break;case"style":n.push(e.attrs[t])}e.attrs={style:n.join(";")}}else n="u"==e.tagName?"underline":"line-through",e.attrs={style:(e.getAttr("style")||"")+"text-decoration:"+n+";"};e.tagName="span"})}),e)!function(s,l){UE.commands[s]={execCommand:function(e,t){t=t||(this.queryCommandState(e)?"none":"underline"==e?"underline":"fontborder"==e?"1px solid #000":"line-through");var n,i=this.selection.getRange();if("default"==t)i.collapsed&&(n=this.document.createTextNode("font"),i.insertNode(n).select()),this.execCommand("removeFormat","span,a",l),n&&(i.setStartBefore(n).collapse(!0),f.remove(n)),d(i,e,t),i.select();else if(i.collapsed){var o=f.findParentByTagName(i.startContainer,"span",!0);if(n=this.document.createTextNode("font"),!o||o.children.length||o[r.ie?"innerText":"textContent"].replace(Q,"").length){if(i.insertNode(n),i.selectNode(n).select(),o=i.document.createElement("span"),c[s]){if(f.findParentByTagName(n,"a",!0))return i.setStartBefore(n).setCursor(),void f.remove(n);this.execCommand("removeFormat","span,a",l)}if(o.style.cssText=l+":"+t,n.parentNode.insertBefore(o,n),!r.ie||r.ie&&9==r.version)for(var a=o.parentNode;!f.isBlockElm(a);)"SPAN"==a.tagName&&(o.style.cssText=a.style.cssText+";"+o.style.cssText),a=a.parentNode;ma?setTimeout(function(){i.setStart(o,0).collapse(!0),d(i,e,t),i.select()}):(i.setStart(o,0).collapse(!0),d(i,e,t),i.select())}else i.insertNode(n),c[s]&&(i.selectNode(n).select(),this.execCommand("removeFormat","span,a",l,null),o=f.findParentByTagName(n,"span",!0),i.setStartBefore(n)),o&&(o.style.cssText+=";"+l+":"+t),i.collapse(!0).select();f.remove(n)}else c[s]&&this.queryCommandValue(s)&&this.execCommand("removeFormat","span,a",l),(i=this.selection.getRange()).applyInlineStyle("span",{style:l+":"+t}),d(i,e,t),i.select();return!0},queryCommandValue:function(e){var t=this.selection.getStart();if("underline"==e||"strikethrough"==e){for(var n=t;n&&!f.isBlockElm(n)&&!f.isBody(n);){if(1==n.nodeType&&"none"!=(e=f.getComputedStyle(n,l)))return e;n=n.parentNode}return"none"}if("fontborder"!=e)return"FontSize"==e?(n=f.getComputedStyle(t,l),(e=/^([\d\.]+)(\w+)$/.exec(n))?Math.floor(e[1])+e[2]:n):f.getComputedStyle(t,l);for(e=t;e&&w.$inline[e.tagName];){if((n=f.getComputedStyle(e,"border"))&&/1px/.test(n)&&/solid/.test(n))return n;e=e.parentNode}return""},queryCommandState:function(e){if(!c[e])return 0;var t=this.queryCommandValue(e);return"fontborder"==e?/1px/.test(t)&&/solid/.test(t):"underline"==e?/underline/.test(t):/line\-through/.test(t)}}}(t,e[t])},UE.plugins.link=function(){function d(e){var t=e.startContainer,n=e.endContainer;(t=f.findParentByTagName(t,"a",!0))&&e.setStartBefore(t),(n=f.findParentByTagName(n,"a",!0))&&e.setEndAfter(n)}UE.commands.unlink={execCommand:function(){var e,t=this.selection.getRange();t.collapsed&&!f.findParentByTagName(t.startContainer,"a",!0)||(e=t.createBookmark(),d(t),t.removeInlineStyle("a").moveToBookmark(e).select())},queryCommandState:function(){return!this.highlight&&this.queryCommandValue("link")?0:-1}},UE.commands.link={execCommand:function(e,t){var n;t._href&&(t._href=p.unhtml(t._href,/[<">]/g)),t.href&&(t.href=p.unhtml(t.href,/[<">]/g)),t.textValue&&(t.textValue=p.unhtml(t.textValue,/[<">]/g));var i=n=this.selection.getRange(),o=i.cloneRange(),a=this.queryCommandValue("link");d(i=i.adjustmentBoundary());var s=i.startContainer;if(1==s.nodeType&&a&&(s=s.childNodes[i.startOffset])&&1==s.nodeType&&"A"==s.tagName&&/^(?:https?|ftp|file)\s*:\s*\/\//.test(s[r.ie?"innerText":"textContent"])&&(s[r.ie?"innerText":"textContent"]=p.html(t.textValue||t.href)),o.collapsed&&!a||(i.removeInlineStyle("a"),o=i.cloneRange()),o.collapsed){a=i.document.createElement("a");var l="";t.textValue?(l=p.html(t.textValue),delete t.textValue):l=p.html(t.href),f.setAttributes(a,t),(s=f.findParentByTagName(o.startContainer,"a",!0))&&f.isInNodeEndBoundary(o,s)&&i.setStartAfter(s).collapse(!0),a[r.ie?"innerText":"textContent"]=l,i.insertNode(a).selectNode(a)}else i.applyInlineStyle("a",t);n.collapse().select(!0)},queryCommandValue:function(){var e;if(!(i=this.selection.getRange()).collapsed){i.shrinkBoundary();var t=3!=i.startContainer.nodeType&&i.startContainer.childNodes[i.startOffset]?i.startContainer.childNodes[i.startOffset]:i.startContainer,n=3==i.endContainer.nodeType||0==i.endOffset?i.endContainer:i.endContainer.childNodes[i.endOffset-1],i=i.getCommonAncestor();if(!(e=f.findParentByTagName(i,"a",!0))&&1==i.nodeType){i=i.getElementsByTagName("a");for(var o,r,a,s=0;a=i[s++];)if(o=f.getPosition(a,t),r=f.getPosition(a,n),(o&f.POSITION_FOLLOWING||o&f.POSITION_CONTAINS)&&(r&f.POSITION_PRECEDING||r&f.POSITION_CONTAINS)){e=a;break}}return e}if((e=1==(e=i.startContainer).nodeType?e:e.parentNode)&&(e=f.findParentByTagName(e,"a",!0))&&!f.isInNodeEndBoundary(i,e))return e},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return!e||"edui-faked-video"!=e.className&&-1==e.className.indexOf("edui-upload-video")?0:-1}}},UE.plugins.insertframe=function(){var e=this;e.addListener("selectionchange",function(){e._iframe&&delete e._iframe})},UE.commands.scrawl={queryCommandState:function(){return r.ie&&r.version<=8?-1:0}},UE.plugins.removeformat=function(){this.setOpt({removeFormatTags:"b,big,code,del,dfn,em,font,i,ins,kbd,q,samp,small,span,strike,strong,sub,sup,tt,u,var",removeFormatAttributes:"class,style,lang,width,height,align,hspace,valign"}),this.commands.removeformat={execCommand:function(e,t,o,n,a){function s(e){if(3==e.nodeType||"span"!=e.tagName.toLowerCase())return 0;if(r.ie){var t=e.attributes;if(t.length){e=0;for(var n=t.length;e<n;e++)if(t[e].specified)return 0;return 1}}return!e.attributes.length}var l=new RegExp("^(?:"+(t||this.options.removeFormatTags).replace(/,/g,"|")+")$","i"),d=o?[]:(n||this.options.removeFormatAttributes).split(",");e=new M.Range(this.document);var c,u,m=function(e){return 1==e.nodeType};(function(e){var t=e.createBookmark();(e.collapsed&&e.enlarge(!0),a)||((i=f.findParentByTagName(e.startContainer,"a",!0))&&e.setStartBefore(i),(i=f.findParentByTagName(e.endContainer,"a",!0))&&e.setEndAfter(i));for(i=(c=e.createBookmark()).start;(u=i.parentNode)&&!f.isBlockElm(u);)f.breakParent(i,u),f.clearEmptySibling(i);if(c.end){for(i=c.end;(u=i.parentNode)&&!f.isBlockElm(u);)f.breakParent(i,u),f.clearEmptySibling(i);for(var n,i=f.getNextDomNode(c.start,!1,m);i&&i!=c.end;)n=f.getNextDomNode(i,!0,m),w.$empty[i.tagName.toLowerCase()]||f.isBookmarkNode(i)||(l.test(i.tagName)?o?(f.removeStyle(i,o),s(i)&&"text-decoration"!=o&&f.remove(i,!0)):f.remove(i,!0):w.$tableContent[i.tagName]||w.$list[i.tagName]||(f.removeAttributes(i,d),s(i)&&f.remove(i,!0))),i=n}for(i=c.start.parentNode,!f.isBlockElm(i)||w.$tableContent[i.tagName]||w.$list[i.tagName]||f.removeAttributes(i,d),i=c.end.parentNode,c.end&&f.isBlockElm(i)&&!w.$tableContent[i.tagName]&&!w.$list[i.tagName]&&f.removeAttributes(i,d),e.moveToBookmark(c).moveToBookmark(t),i=e.startContainer,n=e.collapsed;1==i.nodeType&&f.isEmptyNode(i)&&w.$removeEmpty[i.tagName];)t=i.parentNode,e.setStartBefore(i),e.startContainer===e.endContainer&&e.endOffset--,f.remove(i),i=t;if(!n)for(i=e.endContainer;1==i.nodeType&&f.isEmptyNode(i)&&w.$removeEmpty[i.tagName];)t=i.parentNode,e.setEndBefore(i),f.remove(i),i=t})(e=this.selection.getRange()),e.select()}}},UE.plugins.blockquote=function(){this.commands.blockquote={execCommand:function(e,t){var n=this.selection.getRange(),i=f.filterNodeList(this.selection.getStartElementPath(),"blockquote"),o=w.blockquote,r=n.createBookmark();if(i){o=n.startContainer,o=f.isBlockElm(o)?o:f.findParent(o,function(e){return f.isBlockElm(e)});var a=n.endContainer;a=f.isBlockElm(a)?a:f.findParent(a,function(e){return f.isBlockElm(e)}),o=f.findParentByTagName(o,"li",!0)||o,a=f.findParentByTagName(a,"li",!0)||a;"LI"==o.tagName||"TD"==o.tagName||o===i||f.isBody(o)?f.remove(i,!0):f.breakParent(o,i),o!==a&&(i=f.findParentByTagName(a,"blockquote"))&&("LI"==a.tagName||"TD"==a.tagName||f.isBody(a)?i.parentNode&&f.remove(i,!0):f.breakParent(a,i));var s,l=f.getElementsByTagName(this.document,"blockquote");for(i=0;s=l[i++];)s.childNodes.length?f.getPosition(s,o)&f.POSITION_FOLLOWING&&f.getPosition(s,a)&f.POSITION_PRECEDING&&f.remove(s,!0):f.remove(s)}else{for(l=a=1==(i=n.cloneRange()).startContainer.nodeType?i.startContainer:i.startContainer.parentNode,s=1;;){if(f.isBody(a)){l!==a?n.collapsed?(i.selectNode(l),s=0):i.setStartBefore(l):i.setStart(a,0);break}if(!o[a.tagName]){n.collapsed?i.selectNode(l):i.setStartBefore(l);break}a=(l=a).parentNode}if(s)for(l=a=a=1==i.endContainer.nodeType?i.endContainer:i.endContainer.parentNode;;){if(f.isBody(a)){l!==a?i.setEndAfter(l):i.setEnd(a,a.childNodes.length);break}if(!o[a.tagName]){i.setEndAfter(l);break}a=(l=a).parentNode}for(a=n.document.createElement("blockquote"),f.setAttributes(a,t),a.appendChild(i.extractContents()),i.insertNode(a),o=f.getElementsByTagName(a,"blockquote"),i=0;a=o[i++];)a.parentNode&&f.remove(a,!0)}n.moveToBookmark(r).select()},queryCommandState:function(){return f.filterNodeList(this.selection.getStartElementPath(),"blockquote")?1:0}}},UE.commands.touppercase=UE.commands.tolowercase={execCommand:function(e){var t=this.selection.getRange();if(t.collapsed)return t;for(var n=t.createBookmark(),i=n.end,o=function(e){return!f.isBr(e)&&!f.isWhitespace(e)},r=f.getNextDomNode(n.start,!1,o);r&&f.getPosition(r,i)&f.POSITION_PRECEDING&&(3==r.nodeType&&(r.nodeValue=r.nodeValue["touppercase"==e?"toUpperCase":"toLowerCase"]()),(r=f.getNextDomNode(r,!0,o))!==i););t.moveToBookmark(n).select()}},UE.commands.indent={execCommand:function(){var e=this.queryCommandState("indent")?"0em":this.options.indentValue||"2em";this.execCommand("Paragraph","p",{style:"text-indent:"+e})},queryCommandState:function(){var e=f.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e&&e.style.textIndent&&parseInt(e.style.textIndent)?1:0}},UE.commands.print={execCommand:function(){this.window.print()},notNeedUndo:1},UE.commands.preview={execCommand:function(){var e=window.open("","_blank","").document;e.open(),e.write('<!DOCTYPE html><html><head><meta charset="utf-8"/><script src="'+this.options.UEDITOR_HOME_URL+"ueditor.parse.js\"><\/script><script>setTimeout(function(){uParse('div',{rootPath: '"+this.options.UEDITOR_HOME_URL+"'})},300)<\/script></head><body><div>"+this.getContent(null,null,!0)+"</div></body></html>"),e.close()},notNeedUndo:1},UE.plugins.selectall=function(){this.commands.selectall={execCommand:function(){var e=this.body,t=this.selection.getRange();t.selectNodeContents(e),f.isEmptyBlock(e)&&(r.opera&&e.firstChild&&1==e.firstChild.nodeType&&t.setStartAtFirst(e.firstChild),t.collapse(!0)),t.select(!0)},notNeedUndo:1},this.addshortcutkey({selectAll:"ctrl+65"})},UE.plugins.paragraph=function(){var u=f.isBlockElm,m=["TD","LI","PRE"];this.setOpt("paragraph",{p:"",h1:"",h2:"",h3:"",h4:"",h5:"",h6:""}),this.commands.paragraph={execCommand:function(e,t,n,i){if((e=this.selection.getRange()).collapsed){var o=this.document.createTextNode("p");if(e.insertNode(o),r.ie){var a=o.previousSibling;a&&f.isWhitespace(a)&&f.remove(a),(a=o.nextSibling)&&f.isWhitespace(a)&&f.remove(a)}}return e=function(e,t,n,i){var o,r=e.createBookmark(),a=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase()&&!f.isBookmarkNode(e):!f.isWhitespace(e)};e.enlarge(!0);var s=e.createBookmark();o=f.getNextDomNode(s.start,!1,a);for(var l,d=e.cloneRange();o&&!(f.getPosition(o,s.end)&f.POSITION_FOLLOWING);)if(3!=o.nodeType&&u(o))o=f.getNextDomNode(o,!0,a);else{for(d.setStartBefore(o);o&&o!==s.end&&!u(o);)l=o,o=f.getNextDomNode(o,!1,null,function(e){return!u(e)});d.setEndAfter(l),o=e.document.createElement(t),n&&(f.setAttributes(o,n),i&&"customstyle"==i&&n.style&&(o.style.cssText=n.style)),o.appendChild(d.extractContents()),f.isEmptyNode(o)&&f.fillChar(e.document,o),d.insertNode(o);var c=o.parentNode;u(c)&&!f.isBody(o.parentNode)&&-1==p.indexOf(m,c.tagName)&&(i&&"customstyle"==i||(c.getAttribute("dir")&&o.setAttribute("dir",c.getAttribute("dir")),c.style.cssText&&(o.style.cssText=c.style.cssText+";"+o.style.cssText),c.style.textAlign&&!o.style.textAlign&&(o.style.textAlign=c.style.textAlign),c.style.textIndent&&!o.style.textIndent&&(o.style.textIndent=c.style.textIndent),c.style.padding&&!o.style.padding&&(o.style.padding=c.style.padding)),n&&/h\d/i.test(c.tagName)&&!/h\d/i.test(o.tagName)?(f.setAttributes(c,n),i&&"customstyle"==i&&n.style&&(c.style.cssText=n.style),f.remove(o,!0),o=c):f.remove(o.parentNode,!0)),o=-1!=p.indexOf(m,c.tagName)?c:o,o=f.getNextDomNode(o,!1,a)}return e.moveToBookmark(s).moveToBookmark(r)}(e,t,n,i),o&&(e.setStartBefore(o).collapse(!0),pN=o.parentNode,f.remove(o),f.isBlockElm(pN)&&f.isEmptyNode(pN)&&f.fillNode(this.document,pN)),r.gecko&&e.collapsed&&1==e.startContainer.nodeType&&(n=e.startContainer.childNodes[e.startOffset])&&1==n.nodeType&&n.tagName.toLowerCase()==t&&e.setStart(n,0).collapse(!0),e.select(),!0},queryCommandValue:function(){var e=f.filterNodeList(this.selection.getStartElementPath(),"p h1 h2 h3 h4 h5 h6");return e?e.tagName.toLowerCase():""}}},hA=f.isBlockElm,iA=function(e){return f.filterNodeList(e.selection.getStartElementPath(),function(e){return e&&1==e.nodeType&&e.getAttribute("dir")})},UE.commands.directionality={execCommand:function(e,t){var n=this.selection.getRange();if(n.collapsed){var i=this.document.createTextNode("d");n.insertNode(i)}return function(e,t,n){var i=function(e){return 1==e.nodeType?!f.isBookmarkNode(e):!f.isWhitespace(e)};if((t=iA(t))&&e.collapsed)return t.setAttribute("dir",n);t=e.createBookmark(),e.enlarge(!0);for(var o,r=e.createBookmark(),a=f.getNextDomNode(r.start,!1,i),s=e.cloneRange();a&&!(f.getPosition(a,r.end)&f.POSITION_FOLLOWING);)if(3!=a.nodeType&&hA(a))a=f.getNextDomNode(a,!0,i);else{for(s.setStartBefore(a);a&&a!==r.end&&!hA(a);)o=a,a=f.getNextDomNode(a,!1,null,function(e){return!hA(e)});if(s.setEndAfter(o),a=s.getCommonAncestor(),!f.isBody(a)&&hA(a))a.setAttribute("dir",n);else{(a=e.document.createElement("p")).setAttribute("dir",n);var l=s.extractContents();a.appendChild(l),s.insertNode(a)}a=f.getNextDomNode(a,!1,i)}e.moveToBookmark(r).moveToBookmark(t)}(n,this,t),i&&(n.setStartBefore(i).collapse(!0),f.remove(i)),n.select(),!0},queryCommandValue:function(){var e=iA(this);return e?e.getAttribute("dir"):"ltr"}},UE.plugins.horizontal=function(){this.commands.horizontal={execCommand:function(e){if(-1!==this.queryCommandState(e)){this.execCommand("insertHtml","<hr>");var t,n=(e=this.selection.getRange()).startContainer;if(1==n.nodeType&&!n.childNodes[e.startOffset])(t=n.childNodes[e.startOffset-1])&&1==t.nodeType&&"HR"==t.tagName&&("p"==this.options.enterTag?(t=this.document.createElement("p"),e.insertNode(t),e.setStart(t,0).setCursor()):(t=this.document.createElement("br"),e.insertNode(t),e.setStartBefore(t).setCursor()));return!0}},queryCommandState:function(){return f.filterNodeList(this.selection.getStartElementPath(),"table")?-1:0}},this.addListener("delkeydown",function(e,t){var n=this.selection.getRange();if(n.txtToElmBoundary(!0),f.isStartInblock(n)){var i=n.startContainer.previousSibling;if(i&&f.isTagNode(i,"hr"))return f.remove(i),n.select(),f.preventDefault(t),!0}})},UE.commands.time=UE.commands.date={execCommand:function(e,t){var n,i,o,r,a,s,l,d,c,u,f,m=new Date;this.execCommand("insertHtml","time"==e?(d=t,c=("0"+(l=m).getHours()).slice(-2),u=("0"+l.getMinutes()).slice(-2),f=("0"+l.getSeconds()).slice(-2),(d||"hh:ii:ss").replace(/hh/gi,c).replace(/ii/gi,u).replace(/ss/gi,f)):(i=t,o=("000"+(n=m).getFullYear()).slice(-4),r=o.slice(-2),a=("0"+(n.getMonth()+1)).slice(-2),s=("0"+n.getDate()).slice(-2),(i||"yyyy-mm-dd").replace(/yyyy/gi,o).replace(/yy/gi,r).replace(/mm/gi,a).replace(/dd/gi,s)))}},UE.plugins.rowspacing=function(){this.setOpt({rowspacingtop:["5","10","15","20","25"],rowspacingbottom:["5","10","15","20","25"]}),this.commands.rowspacing={execCommand:function(e,t,n){return this.execCommand("paragraph","p",{style:"margin-"+n+":"+t+"px"}),!0},queryCommandValue:function(e,t){var n=f.filterNodeList(this.selection.getStartElementPath(),function(e){return f.isBlockElm(e)});return n&&(n=f.getComputedStyle(n,"margin-"+t).replace(/[^\d]/g,""))?n:0}}},UE.plugins.lineheight=function(){this.setOpt({lineheight:"1 1.5 1.75 2 3 4 5".split(" ")}),this.commands.lineheight={execCommand:function(e,t){return this.execCommand("paragraph","p",{style:"line-height:"+("1"==t?"normal":t+"em")}),!0},queryCommandValue:function(){var e=f.filterNodeList(this.selection.getStartElementPath(),function(e){return f.isBlockElm(e)});if(e)return"normal"==(e=f.getComputedStyle(e,"line-height"))?1:e.replace(/[^\d.]*/gi,"")}}},UE.plugins.insertcode=function(){var s=this;s.ready(function(){p.cssRule("pre","pre{margin:.5em 0;padding:.4em .6em;border-radius:8px;background:#f8f8f8;}",s.document)}),s.setOpt("insertcode",{as3:"ActionScript3",bash:"Bash/Shell",cpp:"C/C++",css:"Css",cf:"CodeFunction","c#":"C#",delphi:"Delphi",diff:"Diff",erlang:"Erlang",groovy:"Groovy",html:"Html",java:"Java",jfx:"JavaFx",js:"Javascript",pl:"Perl",php:"Php",plain:"Plain Text",ps:"PowerShell",python:"Python",ruby:"Ruby",scala:"Scala",sql:"Sql",vb:"Vb",xml:"Xml"}),s.commands.insertcode={execCommand:function(e,t){var n=this.selection.getRange(),i=f.findParentByTagName(n.startContainer,"pre",!0);if(i)i.className="brush:"+t+";toolbar:false;";else{var o="";n.collapsed?o=r.ie&&r.ie11below?r.version<=8?"&nbsp;":"":"<br/>":(i=n.extractContents(),(n=this.document.createElement("div")).appendChild(i),p.each(UE.filterNode(UE.htmlparser(n.innerHTML.replace(/[\r\t]/g,"")),this.options.filterTxtRules).children,function(t){r.ie&&r.ie11below&&8<r.version?("element"==t.type?"br"==t.tagName?o+="\n":w.$empty[t.tagName]||(p.each(t.children,function(e){"element"==e.type?"br"==e.tagName?o+="\n":w.$empty[t.tagName]||(o+=e.innerText()):o+=e.data}),/\n$/.test(o)||(o+="\n")):o+=t.data+"\n",!t.nextSibling()&&/\n$/.test(o)&&(o=o.replace(/\n$/,""))):r.ie&&r.ie11below?("element"==t.type?"br"==t.tagName?o+="<br>":w.$empty[t.tagName]||(p.each(t.children,function(e){"element"==e.type?"br"==e.tagName?o+="<br>":w.$empty[t.tagName]||(o+=e.innerText()):o+=e.data}),/br>$/.test(o)||(o+="<br>")):o+=t.data+"<br>",!t.nextSibling()&&/<br>$/.test(o)&&(o=o.replace(/<br>$/,""))):(o+="element"==t.type?w.$empty[t.tagName]?"":t.innerText():t.data,!/br\/?\s*>$/.test(o)&&t.nextSibling()&&(o+="<br>"))})),this.execCommand("inserthtml",'<pre id="coder"class="brush:'+t+';toolbar:false">'+o+"</pre>",!0),i=this.document.getElementById("coder"),f.removeAttributes(i,"id"),(n=i.previousSibling)&&(3==n.nodeType&&1==n.nodeValue.length&&r.ie&&6==r.version||f.isEmptyBlock(n))&&f.remove(n),n=this.selection.getRange(),f.isEmptyBlock(i)?n.setStart(i,0).setCursor(!1,!0):n.selectNodeContents(i).select()}},queryCommandValue:function(){var e=this.selection.getStartElementPath(),t="";return p.each(e,function(e){if("PRE"==e.nodeName)return t=(e=e.className.match(/brush:([^;]+)/))&&e[1]?e[1]:"",!1}),t}},s.addInputRule(function(e){p.each(e.getNodesByTagName("pre"),function(t){var e=t.getNodesByTagName("br");e.length?r.ie&&r.ie11below&&8<r.version&&p.each(e,function(e){var t=UE.uNode.createText("\n");e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}):r.ie&&r.ie11below&&8<r.version||(e=t.innerText().split(/\n/),t.innerHTML(""),p.each(e,function(e){e.length&&t.appendChild(UE.uNode.createText(e)),t.appendChild(UE.uNode.createElement("br"))}))})}),s.addOutputRule(function(e){p.each(e.getNodesByTagName("pre"),function(e){var t="";p.each(e.children,function(e){t="text"==e.type?t+e.data.replace(/[ ]/g,"&nbsp;").replace(/\n$/,""):"br"==e.tagName?t+"\n":t+(w.$empty[e.tagName]?e.innerText():"")}),e.innerText(t.replace(/(&nbsp;|\n)+$/,""))})}),s.notNeedCodeQuery={help:1,undo:1,redo:1,source:1,print:1,searchreplace:1,fullscreen:1,preview:1,insertparagraph:1,elementpath:1,insertcode:1,inserthtml:1,selectall:1},s.queryCommandState=function(e){return!this.notNeedCodeQuery[e.toLowerCase()]&&this.selection&&this.queryCommandValue("insertcode")?-1:UE.Editor.prototype.queryCommandState.apply(this,arguments)},s.addListener("beforeenterkeydown",function(){var e=s.selection.getRange();if(n=f.findParentByTagName(e.startContainer,"pre",!0)){if(s.fireEvent("saveScene"),e.collapsed||e.deleteContents(),!r.ie||r.ie9above){n=s.document.createElement("br"),e.insertNode(n).setStartAfter(n).collapse(!0),n.nextSibling||r.ie&&!(10<r.version)?e.setStartAfter(n):e.insertNode(n.cloneNode(!1));for(var t,n=n.previousSibling;n;)if(!(n=(t=n).previousSibling)||"BR"==n.nodeName){n=t;break}if(n){for(t="";n&&"BR"!=n.nodeName&&new RegExp("^[\\s"+f.fillChar+"]*$").test(n.nodeValue);)t+=n.nodeValue,n=n.nextSibling;"BR"!=n.nodeName&&(n=n.nodeValue.match(new RegExp("^([\\s"+f.fillChar+"]+)")))&&n[1]&&(t+=n[1]),t&&(t=s.document.createTextNode(t),e.insertNode(t).setStartAfter(t))}e.collapse(!0).select(!0)}else if(8<r.version)if(n=s.document.createTextNode("\n"),t=e.startContainer,0==e.startOffset){if(t.previousSibling){e.insertNode(n);var i=s.document.createTextNode(" ");e.setStartAfter(n).insertNode(i).setStart(i,0).collapse(!0).select(!0)}}else e.insertNode(n).setStartAfter(n),i=s.document.createTextNode(" "),(t=e.startContainer.childNodes[e.startOffset])&&!/^\n/.test(t.nodeValue)&&e.setStartBefore(n),e.insertNode(i).setStart(i,0).collapse(!0).select(!0);else{for(n=s.document.createElement("br"),e.insertNode(n),e.insertNode(s.document.createTextNode(f.fillChar)),e.setStartAfter(n),n=n.previousSibling;n;)if(!(n=(t=n).previousSibling)||"BR"==n.nodeName){n=t;break}if(n){for(t="";n&&"BR"!=n.nodeName&&new RegExp("^[ "+f.fillChar+"]*$").test(n.nodeValue);)t+=n.nodeValue,n=n.nextSibling;"BR"!=n.nodeName&&(n=n.nodeValue.match(new RegExp("^([ "+f.fillChar+"]+)")))&&n[1]&&(t+=n[1]),t=s.document.createTextNode(t),e.insertNode(t).setStartAfter(t)}e.collapse(!0).select()}return s.fireEvent("saveScene"),!0}}),s.addListener("tabkeydown",function(e,t){var n=s.selection.getRange(),i=f.findParentByTagName(n.startContainer,"pre",!0);if(i){if(s.fireEvent("saveScene"),!t.shiftKey)if(n.collapsed)i=s.document.createTextNode("    "),n.insertNode(i).setStartAfter(i).collapse(!0).select(!0);else{for(var o=n.createBookmark(),r=o.start.previousSibling;r;){if(i.firstChild===r&&!f.isBr(r)){i.insertBefore(s.document.createTextNode("    "),r);break}if(f.isBr(r)){i.insertBefore(s.document.createTextNode("    "),r.nextSibling);break}r=r.previousSibling}var a=o.end;r=o.start.nextSibling;for(i.firstChild===o.start&&i.insertBefore(s.document.createTextNode("    "),r.nextSibling);r&&r!==a;){if(f.isBr(r)&&r.nextSibling){if(r.nextSibling===a)break;i.insertBefore(s.document.createTextNode("    "),r.nextSibling)}r=r.nextSibling}n.moveToBookmark(o).select()}return s.fireEvent("saveScene"),!0}}),s.addListener("beforeinserthtml",function(e,t){var n=this,i=n.selection.getRange();if(f.findParentByTagName(i.startContainer,"pre",!0)){i.collapsed||i.deleteContents();var o="";if(r.ie&&8<r.version){p.each(UE.filterNode(UE.htmlparser(t),n.options.filterTxtRules).children,function(t){"element"==t.type?"br"==t.tagName?o+="\n":w.$empty[t.tagName]||(p.each(t.children,function(e){"element"==e.type?"br"==e.tagName?o+="\n":w.$empty[t.tagName]||(o+=e.innerText()):o+=e.data}),/\n$/.test(o)||(o+="\n")):o+=t.data+"\n",!t.nextSibling()&&/\n$/.test(o)&&(o=o.replace(/\n$/,""))});var a=n.document.createTextNode(p.html(o.replace(/&nbsp;/g," ")));i.insertNode(a).selectNode(a).select()}else{var s=n.document.createDocumentFragment();p.each(UE.filterNode(UE.htmlparser(t),n.options.filterTxtRules).children,function(t){"element"==t.type?"br"==t.tagName?s.appendChild(n.document.createElement("br")):w.$empty[t.tagName]||(p.each(t.children,function(e){"element"==e.type?"br"==e.tagName?s.appendChild(n.document.createElement("br")):w.$empty[t.tagName]||s.appendChild(n.document.createTextNode(p.html(e.innerText().replace(/&nbsp;/g," ")))):s.appendChild(n.document.createTextNode(p.html(e.data.replace(/&nbsp;/g," "))))}),"BR"!=s.lastChild.nodeName&&s.appendChild(n.document.createElement("br"))):s.appendChild(n.document.createTextNode(p.html(t.data.replace(/&nbsp;/g," ")))),t.nextSibling()||"BR"!=s.lastChild.nodeName||s.removeChild(s.lastChild)}),i.insertNode(s).select()}return!0}}),s.addListener("keydown",function(e,t){if(40==(t.keyCode||t.which)){var n,i=this.selection.getRange(),o=i.startContainer;if(i.collapsed&&(n=f.findParentByTagName(i.startContainer,"pre",!0))&&!n.nextSibling){for(var r=n.lastChild;r&&"BR"==r.nodeName;)r=r.previousSibling;(r===o||i.startContainer===n&&i.startOffset==n.childNodes.length)&&(this.execCommand("insertparagraph"),f.preventDefault(t))}}}),s.addListener("delkeydown",function(e,t){var n=this.selection.getRange();n.txtToElmBoundary(!0);var i=n.startContainer;if(f.isTagNode(i,"pre")&&n.collapsed&&f.isStartInblock(n)){var o=s.document.createElement("p");return f.fillNode(s.document,o),i.parentNode.insertBefore(o,i),f.remove(i),n.setStart(o,0).setCursor(!1,!0),f.preventDefault(t),!0}})},UE.commands.cleardoc={execCommand:function(e){var t=this;e=t.options.enterTag;var n=t.selection.getRange();"br"==e?(t.body.innerHTML="<br/>",n.setStart(t.body,0).setCursor()):(t.body.innerHTML="<p>"+(J?"":"<br/>")+"</p>",n.setStart(t.body.firstChild,0).setCursor(!1,!0)),setTimeout(function(){t.fireEvent("clearDoc")},0)}},UE.plugin.register("anchor",function(){return{bindEvents:{ready:function(){p.cssRule("anchor",".anchorclass{background: url('"+this.options.themePath+this.options.theme+"/images/anchor.gif') no-repeat scroll left center transparent;cursor: auto;display: inline-block;height: 16px;width: 15px;}",this.document)}},outputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){var t;(t=e.getAttr("anchorname"))&&(e.tagName="a",e.setAttr({anchorname:"",name:t,class:""}))})},inputRule:function(e){p.each(e.getNodesByTagName("a"),function(e){e.getAttr("name")&&!e.getAttr("href")&&(e.tagName="img",e.setAttr({anchorname:e.getAttr("name"),class:"anchorclass"}),e.setAttr("name"))})},commands:{anchor:{execCommand:function(e,t){var n=this.selection.getRange(),i=n.getClosedNode();i&&i.getAttribute("anchorname")?t?i.setAttribute("anchorname",t):(n.setStartBefore(i).setCursor(),f.remove(i)):t&&(i=this.document.createElement("img"),n.collapse(!0),f.setAttributes(i,{anchorname:t,class:"anchorclass"}),n.insertNode(i).setStartAfter(i).setCursor(!1,!0))}}}}}),UE.plugins.wordcount=function(){var n,e=this;e.setOpt("wordCount",!0),e.addListener("contentchange",function(){e.fireEvent("wordcount")}),e.addListener("ready",function(){var t=this;f.on(t.body,"keyup",function(e){(e.keyCode||e.which)in{16:1,18:1,20:1,37:1,38:1,39:1,40:1}||(clearTimeout(n),n=setTimeout(function(){t.fireEvent("wordcount")},200))})})},UE.plugins.pagebreak=function(){function o(e){if(f.isEmptyBlock(e)){for(var t,n=e.firstChild;n&&1==n.nodeType&&f.isEmptyBlock(n);)n=(t=n).firstChild;!t&&(t=e),f.fillNode(a.document,t)}}function r(e){return e&&1==e.nodeType&&"HR"==e.tagName&&"pagebreak"==e.className}var a=this,s=["td"];a.setOpt("pageBreakTag","_ueditor_page_break_tag_"),a.ready(function(){p.cssRule("pagebreak",".pagebreak{display:block;clear:both !important;cursor:default !important;width: 100% !important;margin:0;}",a.document)}),a.addInputRule(function(e){e.traversal(function(e){if("text"==e.type&&e.data==a.options.pageBreakTag){var t=UE.uNode.createElement('<hr class="pagebreak" noshade="noshade" size="5" style="-webkit-user-select: none;">');e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),a.addOutputRule(function(e){p.each(e.getNodesByTagName("hr"),function(e){if("pagebreak"==e.getAttr("class")){var t=UE.uNode.createText(a.options.pageBreakTag);e.parentNode.insertBefore(t,e),e.parentNode.removeChild(e)}})}),a.commands.pagebreak={execCommand:function(){var e=a.selection.getRange(),t=a.document.createElement("hr");f.setAttributes(t,{class:"pagebreak",noshade:"noshade",size:"5"}),f.unSelectable(t);var n=f.findParentByTagName(e.startContainer,s,!0),i=[];if(n)switch(n.tagName){case"TD":t!==(n=(i=(n=n.parentNode).previousSibling?(n.parentNode.insertBefore(t,n),f.findParents(t)):((e=f.findParentByTagName(n,"table")).parentNode.insertBefore(t,e),f.findParents(t,!0)))[1])&&f.breakParent(t,n),a.fireEvent("afteradjusttable",a.document)}else{if(!e.collapsed)for(e.deleteContents(),n=e.startContainer;!f.isBody(n)&&f.isBlockElm(n)&&f.isEmptyNode(n);)e.setStartBefore(n).collapse(!0),f.remove(n),n=e.startContainer;for(e.insertNode(t),n=t.parentNode;!f.isBody(n);)f.breakParent(t,n),(n=t.nextSibling)&&f.isEmptyBlock(n)&&f.remove(n),n=t.parentNode;n=t.nextSibling,r(i=t.previousSibling)?f.remove(i):i&&o(i),n?(r(n)?f.remove(n):o(n),e.setEndAfter(t).collapse(!1)):(n=a.document.createElement("p"),t.parentNode.appendChild(n),f.fillNode(a.document,n),e.setStart(n,0).collapse(!0)),e.select(!0)}}}},UE.plugin.register("wordimage",function(){var r=this,n=[];return{commands:{wordimage:{execCommand:function(){for(var e,t=f.getElementsByTagName(r.body,"img"),n=[],i=0;e=t[i++];)(e=e.getAttribute("word_img"))&&n.push(e);return n},queryCommandState:function(){n=f.getElementsByTagName(r.body,"img");for(var e,t=0;e=n[t++];)if(e.getAttribute("word_img"))return 1;return-1},notNeedUndo:!0}},inputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){var t=e.attrs,n=parseInt(t.width)<128||parseInt(t.height)<43,i=r.options,o=i.UEDITOR_HOME_URL+"themes/default/images/spacer.gif";t.src&&/^(?:(file:\/+))/.test(t.src)&&e.setAttr({width:t.width,height:t.height,alt:t.alt,word_img:t.src,src:o,style:"background:url("+(n?i.themePath+i.theme+"/images/word.gif":i.langPath+i.lang+"/images/localimage.png")+") no-repeat center center;border:1px solid #ddd"})})}}}),UE.plugins.dragdrop=function(){var o=this;o.ready(function(){f.on(this.body,"dragend",function(){var e=o.selection.getRange(),t=e.getClosedNode()||o.selection.getStart();if(t&&"IMG"==t.tagName){for(var n,i=t.previousSibling;(n=t.nextSibling)&&1==n.nodeType&&"SPAN"==n.tagName&&!n.firstChild;)f.remove(n);(!i||1!=i.nodeType||f.isEmptyBlock(i))&&i||n&&(!n||f.isEmptyBlock(n))||(i&&"P"==i.tagName&&!f.isEmptyBlock(i)?(i.appendChild(t),f.moveChild(n,i),f.remove(n)):n&&"P"==n.tagName&&!f.isEmptyBlock(n)&&n.insertBefore(t,n.firstChild),i&&"P"==i.tagName&&f.isEmptyBlock(i)&&f.remove(i),n&&"P"==n.tagName&&f.isEmptyBlock(n)&&f.remove(n),e.selectNode(t).select(),o.fireEvent("saveScene"))}})}),o.addListener("keyup",function(e,t){if(13==(t.keyCode||t.which)){var n,i=o.selection.getRange();(n=f.findParentByTagName(i.startContainer,"p",!0))&&"center"==f.getComputedStyle(n,"text-align")&&f.removeStyle(n,"text-align")}})},UE.plugins.undo=function(){function a(e,t){if(e.length!=t.length)return 0;for(var n=0,i=e.length;n<i;n++)if(e[n]!=t[n])return 0;return 1}var s,l=this,d=l.options.maxUndoCount||20,o=l.options.maxInputCount||20,c=new RegExp(f.fillChar+"|</hr>","gi"),u={ol:1,ul:1,table:1,tbody:1,tr:1,body:1},m=l.options.autoClearEmptyNode;l.undoManger=new function(){this.list=[],this.index=0,this.hasRedo=this.hasUndo=!1,this.undo=function(){if(this.hasUndo)if(this.list[this.index-1]||1!=this.list.length){for(;this.list[this.index].content==this.list[this.index-1].content;)if(this.index--,0==this.index)return this.restore(0);this.restore(--this.index)}else this.reset()},this.redo=function(){if(this.hasRedo){for(;this.list[this.index].content==this.list[this.index+1].content;)if(this.index++,this.index==this.list.length-1)return this.restore(this.index);this.restore(++this.index)}},this.restore=function(){var t=this.editor,e=this.list[this.index],n=UE.htmlparser(e.content.replace(c,""));t.options.autoClearEmptyNode=!1,t.filterInputRule(n),t.options.autoClearEmptyNode=m,t.document.body.innerHTML=n.toHtml(),t.fireEvent("afterscencerestore"),r.ie&&p.each(f.getElementsByTagName(t.document,"td th caption p"),function(e){f.isEmptyNode(e)&&f.fillNode(t.document,e)});try{var i=new M.Range(t.document).moveToAddress(e.address);i.select(u[i.startContainer.nodeName.toLowerCase()])}catch(e){}this.update(),this.clearKey(),t.fireEvent("reset",!0)},this.getScene=function(){var e=this.editor,t=e.selection.getRange().createAddress(!1,!0);e.fireEvent("beforegetscene");var n=UE.htmlparser(e.body.innerHTML);return e.options.autoClearEmptyNode=!1,e.filterOutputRule(n),e.options.autoClearEmptyNode=m,n=n.toHtml(),e.fireEvent("aftergetscene"),{address:t,content:n}},this.save=function(e,t){clearTimeout(s);var n,i=this.getScene(t),o=this.list[this.index];o&&o.content!=i.content&&l.trigger("contentchange"),(n=o&&o.content==i.content)&&(n=o=e?1:(o=o.address,n=i.address,o.collapsed!=n.collapsed?0:a(o.startAddress,n.startAddress)&&a(o.endAddress,n.endAddress)?1:0)),n||(this.list=this.list.slice(0,this.index+1),this.list.push(i),this.list.length>d&&this.list.shift(),this.index=this.list.length-1,this.clearKey(),this.update())},this.update=function(){this.hasRedo=!!this.list[this.index+1],this.hasUndo=!!this.list[this.index-1]},this.reset=function(){this.list=[],this.index=0,this.hasRedo=this.hasUndo=!1,this.clearKey()},this.clearKey=function(){g=0}},(l.undoManger.editor=l).addListener("saveScene",function(){var e=Array.prototype.splice.call(arguments,1);this.undoManger.save.apply(this.undoManger,e)}),l.addListener("reset",function(e,t){t||this.undoManger.reset()}),l.commands.redo=l.commands.undo={execCommand:function(e){this.undoManger[e]()},queryCommandState:function(e){return this.undoManger["has"+("undo"==e.toLowerCase()?"Undo":"Redo")]?0:-1},notNeedUndo:1};var h={16:1,17:1,18:1,37:1,38:1,39:1,40:1},g=0,b=!1;l.addListener("ready",function(){f.on(this.body,"compositionstart",function(){b=!0}),f.on(this.body,"compositionend",function(){b=!1})}),l.addshortcutkey({Undo:"ctrl+90",Redo:"ctrl+89"});var v=!0;l.addListener("keydown",function(e,t){var n=this;if(!(h[t.keyCode||t.which]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey)){var i=function(e){e.undoManger.save(!1,!0),e.fireEvent("selectionchange")};b||(n.selection.getRange().collapsed?(0==n.undoManger.list.length&&n.undoManger.save(!0),clearTimeout(s),s=setTimeout(function(){if(b)var e=setInterval(function(){b||(i(n),clearInterval(e))},300);else i(n)},200),o<=++g&&i(n)):(n.undoManger.save(!1,!0),v=!1))}}),l.addListener("keyup",function(e,t){h[t.keyCode||t.which]||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||b||v||(this.undoManger.save(!1,!0),v=!0)}),l.stopCmdUndo=function(){l.__hasEnterExecCommand=!0},l.startCmdUndo=function(){l.__hasEnterExecCommand=!1}},UE.plugin.register("copy",function(){function e(){ZeroClipboard.config({debug:!1,swfPath:i.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.swf"});var e=i.zeroclipboard=new ZeroClipboard;e.on("copy",function(e){e=e.client;var t=i.selection.getRange(),n=document.createElement("div");n.appendChild(t.cloneContents()),e.setText(n.innerText||n.textContent),e.setHtml(n.innerHTML),t.select()}),e.on("mouseover mouseout",function(e){var t=e.target;"mouseover"==e.type?f.addClass(t,"edui-state-hover"):"mouseout"==e.type&&f.removeClasses(t,"edui-state-hover")}),e.on("wrongflash noflash",function(){ZeroClipboard.destroy()})}var i=this;return{bindEvents:{ready:function(){r.ie||(window.ZeroClipboard?e():p.loadFile(document,{src:i.options.UEDITOR_HOME_URL+"third-party/zeroclipboard/ZeroClipboard.js",tag:"script",type:"text/javascript",defer:"defer"},function(){e()}))}},commands:{copy:{execCommand:function(e){i.document.execCommand("copy")||alert(i.getLang("copymsg"))}}}}}),UE.plugins.paste=function(){function t(i){var o=this.document;if(!o.getElementById("baidu_pastebin")){var a=this.selection.getRange(),s=a.createBookmark(),l=o.createElement("div");l.id="baidu_pastebin",r.webkit&&l.appendChild(o.createTextNode(f.fillChar+f.fillChar)),o.body.appendChild(l),s.start.style.display="",l.style.cssText="position:absolute;width:1px;height:1px;overflow:hidden;left:-1000px;white-space:nowrap;top:"+f.getXY(s.start).y+"px",a.selectNodeContents(l).select(!0),setTimeout(function(){if(r.webkit)for(var e,t=0,n=o.querySelectorAll("#baidu_pastebin");e=n[t++];){if(!f.isEmptyNode(e)){l=e;break}f.remove(e)}try{l.parentNode.removeChild(l)}catch(e){}a.moveToBookmark(s).select(!0),i(l)},0)}}function a(e){return e.replace(/<(\/?)([\w\-]+)([^>]*)>/gi,function(e,t,n,i){return{img:1}[n=n.toLowerCase()]?e:(i=i.replace(/([\w\-]*?)\s*=\s*(("([^"]*)")|('([^']*)')|([^\s>]+))/gi,function(e,t,n){return{src:1,href:1,name:1}[t.toLowerCase()]?t+"="+n+" ":""}),{span:1,div:1}[n]?"":"<"+t+n+" "+p.trim(i)+">")})}function n(e){var t;if(e.firstChild){var n,i=f.getElementsByTagName(e,"span");for(t=0;n=i[t++];)"_baidu_cut_start"!=n.id&&"_baidu_cut_end"!=n.id||f.remove(n);if(r.webkit){for(n=e.querySelectorAll("div br"),t=0;i=n[t++];)"DIV"==(i=i.parentNode).tagName&&1==i.childNodes.length&&(i.innerHTML="<p><br/></p>",f.remove(i));for(i=e.querySelectorAll("#baidu_pastebin"),t=0;n=i[t++];){var o=c.document.createElement("p");for(n.parentNode.insertBefore(o,n);n.firstChild;)o.appendChild(n.firstChild);f.remove(n)}for(n=e.querySelectorAll("meta"),t=0;i=n[t++];)f.remove(i);for(n=e.querySelectorAll("br"),t=0;i=n[t++];)/^apple-/i.test(i.className)&&f.remove(i)}if(r.gecko)for(n=e.querySelectorAll("[_moz_dirty]"),t=0;i=n[t++];)i.removeAttribute("_moz_dirty");if(!r.ie)for(n=e.querySelectorAll("span.Apple-style-span"),t=0;i=n[t++];)f.remove(i,!0);t=e.innerHTML,t=UE.filterWord(t),e=UE.htmlparser(t),c.options.filterRules&&UE.filterNode(e,c.options.filterRules),c.filterInputRule(e),r.webkit&&((t=e.lastChild())&&"element"==t.type&&"br"==t.tagName&&e.removeChild(t),p.each(c.body.querySelectorAll("div"),function(e){f.isEmptyBlock(e)&&f.remove(e,!0)})),t={html:e.toHtml()},c.fireEvent("beforepaste",t,e),t.html&&(e=UE.htmlparser(t.html,!0),1===c.queryCommandState("pasteplain")?c.execCommand("insertHtml",UE.filterNode(e,c.options.filterTxtRules).toHtml(),!0):(UE.filterNode(e,c.options.filterTxtRules),s=e.toHtml(),l=t.html,d=c.selection.getRange().createAddress(!0),c.execCommand("insertHtml",!0===c.getOpt("retainOnlyLabelPasted")?a(l):l,!0)),c.fireEvent("afterpaste",t))}}var s,l,d,c=this;c.setOpt({retainOnlyLabelPasted:!1}),c.addListener("pasteTransfer",function(e,t){if(d&&s&&l&&s!=l){var n=c.selection.getRange();if(n.moveToAddress(d,!0),!n.collapsed){for(;!f.isBody(n.startContainer);){var i=n.startContainer;if(1==i.nodeType){if(!(i=i.childNodes[n.startOffset])){n.setStartBefore(n.startContainer);continue}(i=i.previousSibling)&&3==i.nodeType&&new RegExp("^[\n\r\t "+f.fillChar+"]*$").test(i.nodeValue)&&n.setStartBefore(i)}if(0!=n.startOffset)break;n.setStartBefore(n.startContainer)}for(;!f.isBody(n.endContainer);){if(1==(i=n.endContainer).nodeType){if(!(i=i.childNodes[n.endOffset])){n.setEndAfter(n.endContainer);continue}(i=i.nextSibling)&&3==i.nodeType&&new RegExp("^[\n\r\t"+f.fillChar+"]*$").test(i.nodeValue)&&n.setEndAfter(i)}if(n.endOffset!=n.endContainer[3==n.endContainer.nodeType?"nodeValue":"childNodes"].length)break;n.setEndAfter(n.endContainer)}}for(n.deleteContents(),n.select(!0),c.__hasEnterExecCommand=!0,n=l,2===t?n=a(n):t&&(n=s),c.execCommand("inserthtml",n,!0),c.__hasEnterExecCommand=!1,n=c.selection.getRange();!f.isBody(n.startContainer)&&!n.startOffset&&n.startContainer[3==n.startContainer.nodeType?"nodeValue":"childNodes"].length;)n.setStartBefore(n.startContainer);n=n.createAddress(!0),d.endAddress=n.startAddress}}),c.addListener("ready",function(){f.on(c.body,"cut",function(){!c.selection.getRange().collapsed&&c.undoManger&&c.undoManger.save()}),f.on(c.body,r.ie||r.opera?"keydown":"paste",function(e){(!r.ie&&!r.opera||(e.ctrlKey||e.metaKey)&&"86"==e.keyCode)&&t.call(c,function(e){n(e)})})}),c.commands.paste={execCommand:function(e){r.ie?(t.call(c,function(e){n(e)}),c.document.execCommand("paste")):alert(c.getLang("pastemsg"))}}},UE.plugins.pasteplain=function(){this.setOpt({pasteplain:!1,filterTxtRules:function(){function e(e){e.tagName="p",e.setStyle()}function t(e){e.parentNode.removeChild(e,!0)}return{"-":"script style object iframe embed input select",p:{$:{}},br:{$:{}},div:function(e){for(var t,n=UE.uNode.createElement("p");t=e.firstChild();)"text"!=t.type&&UE.dom.dtd.$block[t.tagName]?n.firstChild()?(e.parentNode.insertBefore(n,e),n=UE.uNode.createElement("p")):e.parentNode.insertBefore(t,e):n.appendChild(t);n.firstChild()&&e.parentNode.insertBefore(n,e),e.parentNode.removeChild(e)},ol:t,ul:t,dl:t,dt:t,dd:t,li:t,caption:e,th:e,tr:e,h1:e,h2:e,h3:e,h4:e,h5:e,h6:e,td:function(e){e.innerText()&&e.parentNode.insertAfter(UE.uNode.createText(" &nbsp; &nbsp;"),e),e.parentNode.removeChild(e,e.innerText())}}}()});var e=this.options.pasteplain;this.commands.pasteplain={queryCommandState:function(){return e?1:0},execCommand:function(){e=0|!e},notNeedUndo:1}},UE.plugins.list=function(){function e(e){var t,n=[];for(t in e)n.push(t);return n}function b(e){var t=e.className;return f.hasClass(e,/custom_/)?t.match(/custom_(\w+)/)[1]:f.getStyle(e,"list-style-type")}function a(n,r){p.each(f.getElementsByTagName(n,"ol ul"),function(i){if(f.inDoc(i,n)){var e=i.parentNode;if(e.tagName==i.tagName)(t=b(i)||("OL"==i.tagName?"decimal":"disc"))==(b(e)||("OL"==e.tagName?"decimal":"disc"))&&(t=(t=p.indexOf(d[i.tagName],t))+1==d[i.tagName].length?0:t+1,y(i,d[i.tagName][t]));var o=0,t=2;f.hasClass(i,/custom_/)?/[ou]l/i.test(e.tagName)&&f.hasClass(e,/custom_/)||(t=1):/[ou]l/i.test(e.tagName)&&f.hasClass(e,/custom_/)&&(t=3),(e=f.getStyle(i,"list-style-type"))&&(i.style.cssText="list-style-type:"+e),i.className=p.trim(i.className.replace(/list-paddingleft-\w+/,""))+" list-paddingleft-"+t,p.each(f.getElementsByTagName(i,"li"),function(e){if(e.style.cssText&&(e.style.cssText=""),e.firstChild){if(e.parentNode===i){if(o++,f.hasClass(i,/custom_/)){var t=1,n=b(i);if("OL"==i.tagName){if(n)switch(n){case"cn":case"cn1":case"cn2":10<o&&(0==o%10||10<o&&o<20)?t=2:20<o&&(t=3);break;case"num2":9<o&&(t=2)}e.className="list-"+h[n]+o+" list-"+n+"-paddingleft-"+t}else e.className="list-"+h[n]+" list-"+n+"-paddingleft"}else e.className=e.className.replace(/list-[\w\-]+/gi,"");null===(t=e.getAttribute("class"))||t.replace(/\s/g,"")||f.removeAttributes(e,"class")}}else f.remove(e)}),!r&&v(i,i.tagName.toLowerCase(),b(i)||f.getStyle(i,"list-style-type"),!0)}})}function v(e,t,n,i){var o=e.nextSibling;o&&1==o.nodeType&&o.tagName.toLowerCase()==t&&(b(o)||f.getStyle(o,"list-style-type")||("ol"==t?"decimal":"disc"))==n&&(f.moveChild(o,e),0==o.childNodes.length&&f.remove(o)),o&&f.isFillChar(o)&&f.remove(o),(o=e.previousSibling)&&1==o.nodeType&&o.tagName.toLowerCase()==t&&(b(o)||f.getStyle(o,"list-style-type")||("ol"==t?"decimal":"disc"))==n&&f.moveChild(e,o),o&&f.isFillChar(o)&&f.remove(o),!i&&f.isEmptyBlock(e)&&f.remove(e),b(e)&&a(e.ownerDocument,!0)}function y(e,t){h[t]&&(e.className="custom_"+t);try{f.setStyle(e,"list-style-type",t)}catch(e){}}function u(e){var t=e.previousSibling;t&&f.isEmptyBlock(t)&&f.remove(t),(t=e.nextSibling)&&f.isEmptyBlock(t)&&f.remove(t)}function C(e){for(;e&&!f.isBody(e);){if("TABLE"==e.nodeName)return null;if("LI"==e.nodeName)return e;e=e.parentNode}}var m=this,x={TD:1,PRE:1,BLOCKQUOTE:1},h={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};m.setOpt({autoTransWordToList:!1,insertorderedlist:{num:"",num1:"",num2:"",cn:"",cn1:"",cn2:"",decimal:"","lower-alpha":"","lower-roman":"","upper-alpha":"","upper-roman":""},insertunorderedlist:{circle:"",disc:"",square:"",dash:"",dot:""},listDefaultPaddingLeft:"30",listiconpath:"http://bs.baidu.com/listicon/",maxListLevel:-1,disablePInList:!1});var t,d={OL:e(m.options.insertorderedlist),UL:e(m.options.insertunorderedlist)},i=m.options.listiconpath;for(t in h)m.options.insertorderedlist.hasOwnProperty(t)||m.options.insertunorderedlist.hasOwnProperty(t)||delete h[t];m.ready(function(){var e,t=[];for(e in h){if("dash"==e||"dot"==e)t.push("li.list-"+h[e]+"{background-image:url("+i+h[e]+".gif)}"),t.push("ul.custom_"+e+"{list-style:none;}ul.custom_"+e+" li{background-position:0 3px;background-repeat:no-repeat}");else{for(var n=0;n<99;n++)t.push("li.list-"+h[e]+n+"{background-image:url("+i+"list-"+h[e]+n+".gif)}");t.push("ol.custom_"+e+"{list-style:none;}ol.custom_"+e+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(e){case"cn":t.push("li.list-"+e+"-paddingleft-1{padding-left:25px}"),t.push("li.list-"+e+"-paddingleft-2{padding-left:40px}"),t.push("li.list-"+e+"-paddingleft-3{padding-left:55px}");break;case"cn1":t.push("li.list-"+e+"-paddingleft-1{padding-left:30px}"),t.push("li.list-"+e+"-paddingleft-2{padding-left:40px}"),t.push("li.list-"+e+"-paddingleft-3{padding-left:55px}");break;case"cn2":t.push("li.list-"+e+"-paddingleft-1{padding-left:40px}"),t.push("li.list-"+e+"-paddingleft-2{padding-left:55px}"),t.push("li.list-"+e+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":t.push("li.list-"+e+"-paddingleft-1{padding-left:25px}");break;case"num2":t.push("li.list-"+e+"-paddingleft-1{padding-left:35px}"),t.push("li.list-"+e+"-paddingleft-2{padding-left:40px}");break;case"dash":t.push("li.list-"+e+"-paddingleft{padding-left:35px}");break;case"dot":t.push("li.list-"+e+"-paddingleft{padding-left:20px}")}}t.push(".list-paddingleft-1{padding-left:0}"),t.push(".list-paddingleft-2{padding-left:"+m.options.listDefaultPaddingLeft+"px}"),t.push(".list-paddingleft-3{padding-left:"+2*m.options.listDefaultPaddingLeft+"px}"),p.cssRule("list","ol,ul{margin:0;pading:0;"+(r.ie?"":"width:95%")+"}li{clear:both;}"+t.join("\n"),m.document)}),m.ready(function(){f.on(m.body,"cut",function(){setTimeout(function(){var e,t,n=m.selection.getRange();!n.collapsed&&(e=f.findParentByTagName(n.startContainer,"li",!0))&&!e.nextSibling&&f.isEmptyBlock(e)&&((t=(e=e.parentNode).previousSibling)?(f.remove(e),n.setStartAtLast(t).collapse(!0)):(t=e.nextSibling)?(f.remove(e),n.setStartAtFirst(t).collapse(!0)):(t=m.document.createElement("p"),f.fillNode(m.document,t),e.parentNode.insertBefore(t,e),f.remove(e),n.setStart(t,0).collapse(!0)),n.select(!0))})})}),m.addListener("beforepaste",function(n,e){var t=this.selection.getRange(),i=UE.htmlparser(e.html,!0);if(t=f.findParentByTagName(t.startContainer,"li",!0)){var o=t.parentNode;p.each(i.getNodesByTagName("OL"==o.tagName?"ul":"ol"),function(e){if(e.tagName=o.tagName,e.setAttr(),e.parentNode===i)n=b(o)||("OL"==o.tagName?"decimal":"disc");else{var t=e.parentNode.getAttr("class");(n=t&&/custom_/.test(t)?t.match(/custom_(\w+)/)[1]:e.parentNode.getStyle("list-style-type"))||(n="OL"==o.tagName?"decimal":"disc")}t=p.indexOf(d[o.tagName],n),e.parentNode!==i&&(t=t+1==d[o.tagName].length?0:t+1),t=d[o.tagName][t],h[t]?e.setAttr("class","custom_"+t):e.setStyle("list-style-type",t)})}e.html=i.toHtml()}),!0===m.getOpt("disablePInList")&&m.addOutputRule(function(e){p.each(e.getNodesByTagName("li"),function(n){var i=[],o=0;p.each(n.children,function(e){if("p"==e.tagName){for(var t;t=e.children.pop();)i.splice(o,0,t),t.parentNode=n,lastNode=t;(t=i[i.length-1])&&"element"==t.type&&"br"==t.tagName||((e=UE.uNode.createElement("br")).parentNode=n,i.push(e)),o=i.length}}),i.length&&(n.children=i)})}),m.addInputRule(function(e){if(p.each(e.getNodesByTagName("li"),function(e){for(var t,n=UE.uNode.createElement("p"),i=0;t=e.children[i];)"text"==t.type||w.p[t.tagName]?n.appendChild(t):n.firstChild()?(e.insertBefore(n,t),n=UE.uNode.createElement("p"),i+=2):i++;(n.firstChild()&&!n.parentNode||!e.firstChild())&&e.appendChild(n),n.firstChild()||n.innerHTML(r.ie?"&nbsp;":"<br/>"),(n=(e=e.firstChild()).lastChild())&&"text"==n.type&&/^\s*$/.test(n.data)&&e.removeChild(n)}),m.options.autoTransWordToList){var d=function(e,t){var n=t.firstChild();if(n&&"element"==n.type&&"span"==n.tagName&&/Wingdings|Symbol/.test(n.getStyle("font-family"))){for(var i in o)if(o[i]==n.data)return i;return"disc"}for(i in c)if(c[i].test(e))return i},c={num1:/^\d+\)/,decimal:/^\d+\./,"lower-alpha":/^[a-z]+\)/,"upper-alpha":/^[A-Z]+\./,cn:/^[\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+[\u3001]/,cn2:/^\([\u4E00\u4E8C\u4E09\u56DB\u516d\u4e94\u4e03\u516b\u4e5d]+\)/},o={square:"n"};p.each(e.getNodesByTagName("p"),function(e){if("MsoListParagraph"==e.getAttr("class")){e.setStyle("margin",""),e.setStyle("margin-left",""),e.setAttr("class","");var t,n=e,i=e;if("li"!=e.parentNode.tagName&&(t=d(e.innerText(),e))){var o=UE.uNode.createElement(m.options.insertorderedlist.hasOwnProperty(t)?"ol":"ul");for(h[t]?o.setAttr("class","custom_"+t):o.setStyle("list-style-type",t);e&&"li"!=e.parentNode.tagName&&d(e.innerText(),e);){(n=e.nextSibling())||e.parentNode.insertBefore(o,e);var a=o,s=t;if("ol"==a.tagName)if(r.ie){var l=e.firstChild();"element"==l.type&&"span"==l.tagName&&c[s].test(l.innerText())&&e.removeChild(l)}else e.innerHTML(e.innerHTML().replace(c[s],""));else e.removeChild(e.firstChild());(s=UE.uNode.createElement("li")).appendChild(e),a.appendChild(s),e=n}!o.parentNode&&e&&e.parentNode&&e.parentNode.insertBefore(o,e)}(n=i.firstChild())&&"element"==n.type&&"span"==n.tagName&&/^\s*(&nbsp;)+\s*$/.test(n.innerText())&&n.parentNode.removeChild(n)}})}}),m.addListener("contentchange",function(){a(m.document)}),m.addListener("keydown",function(e,t){function n(){t.preventDefault?t.preventDefault():t.returnValue=!1,m.fireEvent("contentchange"),m.undoManger&&m.undoManger.save()}function i(e,t){for(;e&&!f.isBody(e)&&!t(e);){if(1==e.nodeType&&/[ou]l/i.test(e.tagName))return e;e=e.parentNode}return null}var o=t.keyCode||t.which;if(13==o&&!t.shiftKey){var r=m.selection.getRange(),a=f.findParent(r.startContainer,function(e){return f.isBlockElm(e)},!0),s=f.findParentByTagName(r.startContainer,"li",!0);if(a&&"PRE"!=a.tagName&&!s&&(s=a.innerHTML.replace(new RegExp(f.fillChar,"g"),""),/^\s*1\s*\.[^\d]/.test(s)&&(a.innerHTML=s.replace(/^\s*1\s*\./,""),r.setStartAtLast(a).collapse(!0).select(),m.__hasEnterExecCommand=!0,m.execCommand("insertorderedlist"),m.__hasEnterExecCommand=!1)),a=i((r=m.selection.getRange()).startContainer,function(e){return"TABLE"==e.tagName}),s=r.collapsed?a:i(r.endContainer,function(e){return"TABLE"==e.tagName}),a&&s&&a===s){if(!r.collapsed){if(a=f.findParentByTagName(r.startContainer,"li",!0),s=f.findParentByTagName(r.endContainer,"li",!0),!a||!s||a!==s){var l=(a=r.cloneRange()).collapse(!1).createBookmark();return r.deleteContents(),a.moveToBookmark(l),u(s=f.findParentByTagName(a.startContainer,"li",!0)),a.select(),void n()}if(r.deleteContents(),(s=f.findParentByTagName(r.startContainer,"li",!0))&&f.isEmptyBlock(s))return c=s.previousSibling,next=s.nextSibling,a=m.document.createElement("p"),f.fillNode(m.document,a),d=s.parentNode,c&&next?(r.setStart(next,0).collapse(!0).select(!0),f.remove(s)):((c||next)&&c?s.parentNode.parentNode.insertBefore(a,d.nextSibling):d.parentNode.insertBefore(a,d),f.remove(s),d.firstChild||f.remove(d),r.setStart(a,0).setCursor()),void n()}if(s=f.findParentByTagName(r.startContainer,"li",!0)){if(f.isEmptyBlock(s)){l=r.createBookmark();var d=s.parentNode;if(s!==d.lastChild?(f.breakParent(s,d),u(s)):(d.parentNode.insertBefore(s,d.nextSibling),f.isEmptyNode(d)&&f.remove(d)),!w.$list[s.parentNode.tagName])if(f.isBlockElm(s.firstChild))f.remove(s,!0);else{for(a=m.document.createElement("p"),s.parentNode.insertBefore(a,s);s.firstChild;)a.appendChild(s.firstChild);f.remove(s)}r.moveToBookmark(l).select()}else{if(!(a=s.firstChild)||!f.isBlockElm(a)){for(a=m.document.createElement("p"),!s.firstChild&&f.fillNode(m.document,a);s.firstChild;)a.appendChild(s.firstChild);s.appendChild(a)}l=m.document.createElement("span"),r.insertNode(l),f.breakParent(l,s),(a=(c=l.nextSibling).firstChild)||(a=m.document.createElement("p"),f.fillNode(m.document,a),c.appendChild(a)),f.isEmptyNode(a)&&(a.innerHTML="",f.fillNode(m.document,a)),r.setStart(a,0).collapse(!0).shrinkBoundary().select(),f.remove(l);var c=c.previousSibling;c&&f.isEmptyBlock(c)&&(c.innerHTML="<p></p>",f.fillNode(m.document,c.firstChild))}n()}}}if(8==o&&((r=m.selection.getRange()).collapsed&&f.isStartInblock(r)&&(a=r.cloneRange().trimBoundary(),(s=f.findParentByTagName(r.startContainer,"li",!0))&&f.isStartInblock(a))))if((a=f.findParentByTagName(r.startContainer,"p",!0))&&a!==s.firstChild)d=f.findParentByTagName(a,["ol","ul"]),f.breakParent(a,d),u(a),m.fireEvent("contentchange"),r.setStart(a,0).setCursor(!1,!0),m.fireEvent("saveScene"),f.preventDefault(t);else if(s&&(c=s.previousSibling)){if(46!=o||!s.childNodes.length){if(w.$list[c.tagName]&&(c=c.lastChild),m.undoManger&&m.undoManger.save(),a=s.firstChild,f.isBlockElm(a))if(f.isEmptyNode(a))for(c.appendChild(a),r.setStart(a,0).setCursor(!1,!0);s.firstChild;)c.appendChild(s.firstChild);else l=m.document.createElement("span"),r.insertNode(l),f.isEmptyBlock(c)&&(c.innerHTML=""),f.moveChild(s,c),r.setStartBefore(l).collapse(!0).select(!0),f.remove(l);else if(f.isEmptyNode(s))a=m.document.createElement("p"),c.appendChild(a),r.setStart(a,0).setCursor();else for(r.setEnd(c,c.childNodes.length).collapse().select(!0);s.firstChild;)c.appendChild(s.firstChild);f.remove(s),m.fireEvent("contentchange"),m.fireEvent("saveScene"),f.preventDefault(t)}}else if(s&&!s.previousSibling){if(d=s.parentNode,l=r.createBookmark(),f.isTagNode(d.parentNode,"ol ul"))d.parentNode.insertBefore(s,d);else{for(;s.firstChild;)d.parentNode.insertBefore(s.firstChild,d);f.remove(s)}f.isEmptyNode(d)&&f.remove(d),r.moveToBookmark(l).setCursor(!1,!0),m.fireEvent("contentchange"),m.fireEvent("saveScene"),f.preventDefault(t)}}),m.addListener("keyup",function(e,t){if(8==(t.keyCode||t.which)){var n,i=m.selection.getRange();(n=f.findParentByTagName(i.startContainer,["ol","ul"],!0))&&v(n,n.tagName.toLowerCase(),b(n)||f.getComputedStyle(n,"list-style-type"),!0)}}),m.addListener("tabkeydown",function(){function e(e){if(-1!=m.options.maxListLevel){e=e.parentNode;for(var t=0;/[ou]l/i.test(e.tagName);)t++,e=e.parentNode;if(t>=m.options.maxListLevel)return!0}}var t=m.selection.getRange(),n=f.findParentByTagName(t.startContainer,"li",!0);if(n){var i;if(!t.collapsed){m.fireEvent("saveScene"),i=t.createBookmark();var o,r;for(a=0,s=f.findParents(n);r=s[a++];)if(f.isTagNode(r,"ol ul")){o=r;break}if(r=n,i.end)for(;r&&!(f.getPosition(r,i.end)&f.POSITION_FOLLOWING);)if(e(r))r=f.getNextDomNode(r,!1,null,function(e){return e!==o});else{for(a=r.parentNode,s=m.document.createElement(a.tagName),l=p.indexOf(d[s.tagName],b(a)||f.getComputedStyle(a,"list-style-type")),y(s,l=d[s.tagName][l+1==d[s.tagName].length?0:l+1]),a.insertBefore(s,r);r&&!(f.getPosition(r,i.end)&f.POSITION_FOLLOWING);){if(n=r.nextSibling,s.appendChild(r),!n||f.isTagNode(n,"ol ul")){if(n)for(;(n=n.firstChild)&&"LI"!=n.tagName;);else n=f.getNextDomNode(r,!1,null,function(e){return e!==o});break}r=n}v(s,s.tagName.toLowerCase(),l),r=n}return m.fireEvent("contentchange"),t.moveToBookmark(i).select(),!0}if(e(n))return!0;var a=n.parentNode,s=m.document.createElement(a.tagName),l=(l=p.indexOf(d[s.tagName],b(a)||f.getComputedStyle(a,"list-style-type")))+1==d[s.tagName].length?0:l+1;if(y(s,l=d[s.tagName][l]),f.isStartInblock(t))return m.fireEvent("saveScene"),i=t.createBookmark(),a.insertBefore(s,n),s.appendChild(n),v(s,s.tagName.toLowerCase(),l),m.fireEvent("contentchange"),t.moveToBookmark(i).select(!0),!0}}),m.commands.insertorderedlist=m.commands.insertunorderedlist={execCommand:function(e,t){t||(t="insertorderedlist"==e.toLowerCase()?"decimal":"disc");var n=this.selection.getRange(),i=function(e){return 1==e.nodeType?"br"!=e.tagName.toLowerCase():!f.isWhitespace(e)},o="insertorderedlist"==e.toLowerCase()?"ol":"ul",r=this.document.createDocumentFragment();n.adjustmentBoundary().shrinkBoundary();var a,s,l,d,c=n.createBookmark(!0),u=C(this.document.getElementById(c.start)),m=0,h=C(this.document.getElementById(c.end)),p=0;if(u||h){if(u&&(a=u.parentNode),c.end||(h=u),h&&(s=h.parentNode),a===s){for(;u!==h;){if(u=(d=u).nextSibling,!f.isBlockElm(d.firstChild)){for(i=this.document.createElement("p");d.firstChild;)i.appendChild(d.firstChild);d.appendChild(i)}r.appendChild(d)}if(d=this.document.createElement("span"),a.insertBefore(d,h),!f.isBlockElm(h.firstChild)){for(i=this.document.createElement("p");h.firstChild;)i.appendChild(h.firstChild);h.appendChild(i)}if(r.appendChild(h),f.breakParent(d,a),f.isEmptyNode(d.previousSibling)&&f.remove(d.previousSibling),f.isEmptyNode(d.nextSibling)&&f.remove(d.nextSibling),i=b(a)||f.getComputedStyle(a,"list-style-type")||("insertorderedlist"==e.toLowerCase()?"decimal":"disc"),a.tagName.toLowerCase()==o&&i==t){for(h=0,h=this.document.createDocumentFragment();i=r.firstChild;)if(f.isTagNode(i,"ol ul"))h.appendChild(i);else for(;i.firstChild;)h.appendChild(i.firstChild),f.remove(i);d.parentNode.insertBefore(h,d)}else y(l=this.document.createElement(o),t),l.appendChild(r),d.parentNode.insertBefore(l,d);return f.remove(d),l&&v(l,o,t),void n.moveToBookmark(c).select()}if(u){for(;u;){if(d=u.nextSibling,f.isTagNode(u,"ol ul"))r.appendChild(u);else{l=this.document.createDocumentFragment();for(var g=0;u.firstChild;)f.isBlockElm(u.firstChild)&&(g=1),l.appendChild(u.firstChild);g?r.appendChild(l):((g=this.document.createElement("p")).appendChild(l),r.appendChild(g)),f.remove(u)}u=d}a.parentNode.insertBefore(r,a.nextSibling),f.isEmptyNode(a)?(n.setStartBefore(a),f.remove(a)):n.setStartAfter(a),m=1}if(h&&f.inDoc(s,this.document)){for(u=s.firstChild;u&&u!==h;){if(d=u.nextSibling,f.isTagNode(u,"ol ul"))r.appendChild(u);else{for(l=this.document.createDocumentFragment(),g=0;u.firstChild;)f.isBlockElm(u.firstChild)&&(g=1),l.appendChild(u.firstChild);g?r.appendChild(l):((g=this.document.createElement("p")).appendChild(l),r.appendChild(g)),f.remove(u)}u=d}d=f.createElement(this.document,"div",{tmpDiv:1}),f.moveChild(h,d),r.appendChild(d),f.remove(h),s.parentNode.insertBefore(r,s),n.setEndBefore(s),f.isEmptyNode(s)&&f.remove(s),p=1}}for(m||n.setStartBefore(this.document.getElementById(c.start)),c.end&&!p&&n.setEndAfter(this.document.getElementById(c.end)),n.enlarge(!0,function(e){return x[e.tagName]}),r=this.document.createDocumentFragment(),h=n.createBookmark(),a=f.getNextDomNode(h.start,!1,i),l=n.cloneRange(),m=f.isBlockElm;a&&a!==h.end&&f.getPosition(a,h.end)&f.POSITION_PRECEDING;)if(3==a.nodeType||w.li[a.tagName])if(1==a.nodeType&&w.$list[a.tagName]){for(;a.firstChild;)r.appendChild(a.firstChild);u=f.getNextDomNode(a,!1,i),f.remove(a),a=u}else{for(u=a,l.setStartBefore(a);a&&a!==h.end&&(!m(a)||f.isBookmarkNode(a));)u=a,a=f.getNextDomNode(a,!1,null,function(e){return!x[e.tagName]});if(a&&m(a)&&(d=f.getNextDomNode(u,!1,i))&&f.isBookmarkNode(d)&&(a=f.getNextDomNode(d,!1,i),u=d),l.setEndAfter(u),a=f.getNextDomNode(u,!1,i),(d=n.document.createElement("li")).appendChild(l.extractContents()),f.isEmptyNode(d)){for(u=n.document.createElement("p");d.firstChild;)u.appendChild(d.firstChild);d.appendChild(u)}r.appendChild(d)}else a=f.getNextDomNode(a,!0,i);for(n.moveToBookmark(h).collapse(!0),y(l=this.document.createElement(o),t),l.appendChild(r),n.insertNode(l),v(l,o,t),h=0,o=f.getElementsByTagName(l,"div");i=o[h++];)i.getAttribute("tmpDiv")&&f.remove(i,!0);n.moveToBookmark(c).select()},queryCommandState:function(e){e="insertorderedlist"==e.toLowerCase()?"ol":"ul";for(var t,n=this.selection.getStartElementPath(),i=0;(t=n[i++])&&"TABLE"!=t.nodeName;)if(e==t.nodeName.toLowerCase())return 1;return 0},queryCommandValue:function(e){e="insertorderedlist"==e.toLowerCase()?"ol":"ul";for(var t,n,i=this.selection.getStartElementPath(),o=0;n=i[o++];){if("TABLE"==n.nodeName){t=null;break}if(e==n.nodeName.toLowerCase()){t=n;break}}return t?b(t)||f.getComputedStyle(t,"list-style-type"):null}}},KH={textarea:function(e,t){var n=t.ownerDocument.createElement("textarea");return n.style.cssText="position:absolute;resize:none;width:100%;height:100%;border:0;padding:0;margin:0;overflow-y:auto;",r.ie&&r.version<8&&(n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px",t.onresize=function(){n.style.width=t.offsetWidth+"px",n.style.height=t.offsetHeight+"px"}),t.appendChild(n),{setContent:function(e){n.value=e},getContent:function(){return n.value},select:function(){var e;r.ie?((e=n.createTextRange()).collapse(!0),e.select()):(n.setSelectionRange(0,0),n.focus())},dispose:function(){t.removeChild(n),t=n=t.onresize=null}}},codemirror:function(e,t){var n=window.CodeMirror(t,{mode:"text/html",tabMode:"indent",lineNumbers:!0,lineWrapping:!0}),i=n.getWrapperElement();return i.style.cssText='position:absolute;left:0;top:0;width:100%;height:100%;font-family:consolas,"Courier new",monospace;font-size:13px;',n.getScrollerElement().style.cssText="position:absolute;left:0;top:0;width:100%;height:100%;",n.refresh(),{getCodeMirror:function(){return n},setContent:function(e){n.setValue(e)},getContent:function(){return n.getValue()},select:function(){n.focus()},dispose:function(){t.removeChild(i),n=i=null}}}},UE.plugins.source=function(){var n,i,o,a,s,l=this,d=this.options,c=!1;d.sourceEditor=r.ie?"textarea":d.sourceEditor||"codemirror",l.setOpt({sourceEditorFirst:!1}),l.commands.source={execCommand:function(){if(c=!c){s=l.selection.getRange().createAddress(!1,!0),l.undoManger&&l.undoManger.save(!0),r.gecko&&(l.body.contentEditable=!1),o=l.iframe.style.cssText,l.iframe.style.cssText+="position:absolute;left:-32768px;top:-32768px;",l.fireEvent("beforegetcontent");var e=UE.htmlparser(l.body.innerHTML);l.filterOutputRule(e),e.traversal(function(e){if("element"==e.type)switch(e.tagName){case"td":case"th":case"caption":e.children&&1==e.children.length&&"br"==e.firstChild().tagName&&e.removeChild(e.firstChild());break;case"pre":e.innerText(e.innerText().replace(/&nbsp;/g," "))}}),l.fireEvent("aftergetcontent"),e=e.toHtml(!0),(n=KH["codemirror"==d.sourceEditor&&window.CodeMirror?"codemirror":"textarea"](l,l.iframe.parentNode)).setContent(e),i=l.setContent,l.setContent=function(e){e=UE.htmlparser(e),l.filterInputRule(e),e=e.toHtml(),n.setContent(e)},setTimeout(function(){n.select(),l.addListener("fullscreenchanged",function(){try{n.getCodeMirror().refresh()}catch(e){}})}),a=l.getContent,l.getContent=function(){return n.getContent()||"<p>"+(r.ie?"":"<br/>")+"</p>"}}else if(l.iframe.style.cssText=o,e=(e=n.getContent()||"<p>"+(r.ie?"":"<br/>")+"</p>").replace(RegExp("[\\r\\t\\n ]*</?(\\w+)\\s*(?:[^>]*)>","g"),function(e,t){return t&&!w.$inlineWithA[t.toLowerCase()]?e.replace(/(^[\n\r\t ]*)|([\n\r\t ]*$)/g,""):e.replace(/(^[\n\r\t]*)|([\n\r\t]*$)/g,"")}),l.setContent=i,l.setContent(e),n.dispose(),n=null,l.getContent=a,(e=l.body.firstChild)||(l.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>",e=l.body.firstChild),l.undoManger&&l.undoManger.save(!0),r.gecko){var t=document.createElement("input");t.style.cssText="position:absolute;left:0;top:-32768px",document.body.appendChild(t),l.body.contentEditable=!1,setTimeout(function(){f.setViewportOffset(t,{left:-32768,top:0}),t.focus(),setTimeout(function(){l.body.contentEditable=!0,l.selection.getRange().moveToAddress(s).select(!0),f.remove(t)})})}else try{l.selection.getRange().moveToAddress(s).select(!0)}catch(e){}this.fireEvent("sourcemodechanged",c)},queryCommandState:function(){return 0|c},notNeedUndo:1};var t=l.queryCommandState;l.queryCommandState=function(e){return e=e.toLowerCase(),c?e in{source:1,fullscreen:1}?1:-1:t.apply(this,arguments)},"codemirror"==d.sourceEditor&&l.addListener("ready",function(){p.loadFile(document,{src:d.codeMirrorJsUrl||d.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.js",tag:"script",type:"text/javascript",defer:"defer"},function(){d.sourceEditorFirst&&setTimeout(function(){l.execCommand("source")},0)}),p.loadFile(document,{tag:"link",rel:"stylesheet",type:"text/css",href:d.codeMirrorCssUrl||d.UEDITOR_HOME_URL+"third-party/codemirror/codemirror.css"})})},UE.plugins.enterkey=function(){var s,l=this,a=l.options.enterTag;l.addListener("keyup",function(e,t){if(13==(t.keyCode||t.which)){var n,i=l.selection.getRange(),o=i.startContainer;if(r.ie)l.fireEvent("saveScene",!0,!0);else{if(/h\d/i.test(s)){if(r.gecko)f.findParentByTagName(o,"h1 h2 h3 h4 h5 h6 blockquote caption table".split(" "),!0)||(l.document.execCommand("formatBlock",!1,"<p>"),n=1);else if(1==o.nodeType){var a;o=l.document.createTextNode("");if(i.insertNode(o),a=f.findParentByTagName(o,"div",!0)){for(n=l.document.createElement("p");a.firstChild;)n.appendChild(a.firstChild);a.parentNode.insertBefore(n,a),f.remove(a),i.setStartBefore(o).setCursor(),n=1}f.remove(o)}l.undoManger&&n&&l.undoManger.save()}r.opera&&i.select()}}}),l.addListener("keydown",function(e,t){if(13==(t.keyCode||t.which))if(l.fireEvent("beforeenterkeydown"))f.preventDefault(t);else{l.fireEvent("saveScene",!0,!0),s="";var n=l.selection.getRange();if(!n.collapsed){var i=n.startContainer,o=n.endContainer;i=f.findParentByTagName(i,"td",!0),o=f.findParentByTagName(o,"td",!0);if(i&&o&&i!==o||!i&&o||i&&!o)return void(t.preventDefault?t.preventDefault():t.returnValue=!1)}if("p"==a)r.ie||((i=f.findParentByTagName(n.startContainer,"ol ul p h1 h2 h3 h4 h5 h6 blockquote caption".split(" "),!0))||r.opera?(s=i.tagName,"p"==i.tagName.toLowerCase()&&r.gecko&&f.removeDirtyAttr(i)):(l.document.execCommand("formatBlock",!1,"<p>"),r.gecko&&(n=l.selection.getRange(),(i=f.findParentByTagName(n.startContainer,"p",!0))&&f.removeDirtyAttr(i))));else if(t.preventDefault?t.preventDefault():t.returnValue=!1,n.collapsed)o=n.document.createElement("br"),n.insertNode(o),o.parentNode.lastChild===o?(o.parentNode.insertBefore(o.cloneNode(!0),o),n.setStartBefore(o)):n.setStartAfter(o),n.setCursor();else if(n.deleteContents(),1==(i=n.startContainer).nodeType&&(i=i.childNodes[n.startOffset])){for(;1==i.nodeType;){if(w.$empty[i.tagName])return n.setStartBefore(i).setCursor(),l.undoManger&&l.undoManger.save(),!1;if(!i.firstChild)return o=n.document.createElement("br"),i.appendChild(o),n.setStart(i,0).setCursor(),l.undoManger&&l.undoManger.save(),!1;i=i.firstChild}i===n.startContainer.childNodes[n.startOffset]?(o=n.document.createElement("br"),n.insertNode(o).setCursor()):n.setStart(i,0).setCursor()}else o=n.document.createElement("br"),n.insertNode(o).setStartAfter(o).setCursor()}})},UE.plugins.keystrokes=function(){var u=this,m=!0;u.addListener("keydown",function(e,t){var n=t.keyCode||t.which,i=u.selection.getRange();if(!(i.collapsed||t.ctrlKey||t.shiftKey||t.altKey||t.metaKey)&&(65<=n&&n<=90||48<=n&&n<=57||96<=n&&n<=111||{13:1,8:1,46:1}[n])){var o=i.startContainer;if(f.isFillChar(o)&&i.setStartBefore(o),o=i.endContainer,f.isFillChar(o)&&i.setEndAfter(o),i.txtToElmBoundary(),i.endContainer&&1==i.endContainer.nodeType&&(o=i.endContainer.childNodes[i.endOffset])&&f.isBr(o)&&i.setEndAfter(o),0==i.startOffset&&(o=i.startContainer,f.isBoundaryNode(o,"firstChild")&&(o=i.endContainer,i.endOffset==(3==o.nodeType?o.nodeValue.length:o.childNodes.length)&&f.isBoundaryNode(o,"lastChild"))))return u.fireEvent("saveScene"),u.body.innerHTML="<p>"+(r.ie?"":"<br/>")+"</p>",i.setStart(u.body.firstChild,0).setCursor(!1,!0),void u._selectionChange()}if(n==ja.Backspace){if(i=u.selection.getRange(),m=i.collapsed,u.fireEvent("delkeydown",t))return;var a,s;if(i.collapsed&&i.inFillChar()&&(a=i.startContainer,f.isFillChar(a)?(i.setStartBefore(a).shrinkBoundary(!0).collapse(!0),f.remove(a)):(a.nodeValue=a.nodeValue.replace(new RegExp("^"+f.fillChar),""),i.startOffset--,i.collapse(!0).select(!0))),a=i.getClosedNode())return u.fireEvent("saveScene"),i.setStartBefore(a),f.remove(a),i.setCursor(),u.fireEvent("saveScene"),void f.preventDefault(t);if(!r.ie&&(a=f.findParentByTagName(i.startContainer,"table",!0),s=f.findParentByTagName(i.endContainer,"table",!0),a&&!s||!a&&s||a!==s))return void t.preventDefault()}if(n==ja.Tab){var l={ol:1,ul:1,table:1};if(u.fireEvent("tabkeydown",t))return void f.preventDefault(t);i=u.selection.getRange(),u.fireEvent("saveScene");o=0;var d="";for(a=u.options.tabSize||4,s=u.options.tabNode||"&nbsp;";o<a;o++)d+=s;if((o=u.document.createElement("span")).innerHTML=d+f.fillChar,i.collapsed)i.insertNode(o.cloneNode(!0).firstChild).setCursor(!0);else if(d=function(e){return f.isBlockElm(e)&&!l[e.tagName.toLowerCase()]},a=f.findParent(i.startContainer,d,!0),s=f.findParent(i.endContainer,d,!0),a&&s&&a===s)i.deleteContents(),i.insertNode(o.cloneNode(!0).firstChild).setCursor(!0);else{a=i.createBookmark(),i.enlarge(!0),s=i.createBookmark();for(var c=f.getNextDomNode(s.start,!1,d);c&&!(f.getPosition(c,s.end)&f.POSITION_FOLLOWING);)c.insertBefore(o.cloneNode(!0).firstChild,c.firstChild),c=f.getNextDomNode(c,!1,d);i.moveToBookmark(s).moveToBookmark(a).select()}f.preventDefault(t)}if(r.gecko&&46==n&&((i=u.selection.getRange()).collapsed&&(a=i.startContainer,f.isEmptyBlock(a)))){for(n=a.parentNode;1==f.getChildCount(n)&&!f.isBody(n);)n=(a=n).parentNode;a===n.lastChild&&t.preventDefault()}}),u.addListener("keyup",function(e,t){var n;if((t.keyCode||t.which)==ja.Backspace&&!this.fireEvent("delkeyup")){if((n=this.selection.getRange()).collapsed){var i;if((i=f.findParentByTagName(n.startContainer,"h1 h2 h3 h4 h5 h6".split(" "),!0))&&f.isEmptyBlock(i)){var o=i.previousSibling;if(o&&"TABLE"!=o.nodeName)return f.remove(i),void n.setStartAtLast(o).setCursor(!1,!0);if((o=i.nextSibling)&&"TABLE"!=o.nodeName)return f.remove(i),void n.setStartAtFirst(o).setCursor(!1,!0)}f.isBody(n.startContainer)&&(i=f.createElement(this.document,"p",{innerHTML:r.ie?f.fillChar:"<br/>"}),n.insertNode(i).setStart(i,0).setCursor(!1,!0))}!m&&(3==n.startContainer.nodeType||1==n.startContainer.nodeType&&f.isEmptyBlock(n.startContainer))&&(r.ie?(i=n.document.createElement("span"),n.insertNode(i).setStartBefore(i).collapse(!0),n.select(),f.remove(i)):n.select())}})},UE.plugins.fiximgclick=function(){function l(){this.cover=this.resizer=this.editor=null,this.doc=document,this.prePos={x:0,y:0},this.startPos={x:0,y:0}}var o,n=!1;return o=[[0,0,-1,-1],[0,0,0,-1],[0,0,1,-1],[0,0,-1,0],[0,0,1,0],[0,0,-1,1],[0,0,0,1],[0,0,1,1]],l.prototype={init:function(e){var t=this;t.editor=e,t.startPos=this.prePos={x:0,y:0},t.dragId=-1,e=[];var n=t.cover=document.createElement("div"),o=t.resizer=document.createElement("div");for(n.id=t.editor.ui.id+"_imagescale_cover",n.style.cssText="position:absolute;display:none;z-index:"+t.editor.options.zIndex+";filter:alpha(opacity=0); opacity:0;background:#CCC;",f.on(n,"mousedown click",function(){t.hide()}),i=0;i<8;i++)e.push('<span class="edui-editor-imagescale-hand'+i+'"></span>');o.id=t.editor.ui.id+"_imagescale",o.className="edui-editor-imagescale",o.innerHTML=e.join(""),o.style.cssText+=";display:none;border:1px solid #3b77ff;z-index:"+t.editor.options.zIndex+";",t.editor.ui.getDom().appendChild(n),t.editor.ui.getDom().appendChild(o),t.initStyle(),t.initEvents()},initStyle:function(){p.cssRule("imagescale",".edui-editor-imagescale{display:none;position:absolute;border:1px solid #38B2CE;cursor:hand;-webkit-box-sizing: content-box;-moz-box-sizing: content-box;box-sizing: content-box;}.edui-editor-imagescale span{position:absolute;width:6px;height:6px;overflow:hidden;font-size:0px;display:block;background-color:#3C9DD0;}.edui-editor-imagescale .edui-editor-imagescale-hand0{cursor:nw-resize;top:0;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand1{cursor:n-resize;top:0;margin-top:-4px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand2{cursor:ne-resize;top:0;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand3{cursor:w-resize;top:50%;margin-top:-4px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand4{cursor:e-resize;top:50%;margin-top:-4px;left:100%;margin-left:-3px;}.edui-editor-imagescale .edui-editor-imagescale-hand5{cursor:sw-resize;top:100%;margin-top:-3px;left:0;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand6{cursor:s-resize;top:100%;margin-top:-3px;left:50%;margin-left:-4px;}.edui-editor-imagescale .edui-editor-imagescale-hand7{cursor:se-resize;top:100%;margin-top:-3px;left:100%;margin-left:-3px;}")},initEvents:function(){this.startPos.x=this.startPos.y=0,this.isDraging=!1},_eventHandler:function(e){switch(e.type){case"mousedown":var t=e.target||e.srcElement;-1!=t.className.indexOf("edui-editor-imagescale-hand")&&-1==this.dragId&&(this.dragId=t.className.slice(-1),this.startPos.x=this.prePos.x=e.clientX,this.startPos.y=this.prePos.y=e.clientY,f.on(this.doc,"mousemove",this.proxy(this._eventHandler,this)));break;case"mousemove":-1!=this.dragId&&(this.updateContainerStyle(this.dragId,{x:e.clientX-this.prePos.x,y:e.clientY-this.prePos.y}),this.prePos.x=e.clientX,this.prePos.y=e.clientY,n=!0,this.updateTargetElement());break;case"mouseup":-1!=this.dragId&&(this.updateContainerStyle(this.dragId,{x:e.clientX-this.prePos.x,y:e.clientY-this.prePos.y}),this.updateTargetElement(),this.target.parentNode&&this.attachTo(this.target),this.dragId=-1),f.un(this.doc,"mousemove",this.proxy(this._eventHandler,this)),n&&(n=!1,this.editor.fireEvent("contentchange"))}},updateTargetElement:function(){f.setStyles(this.target,{width:this.resizer.style.width,height:this.resizer.style.height}),this.target.width=parseInt(this.resizer.style.width),this.target.height=parseInt(this.resizer.style.height),this.attachTo(this.target)},updateContainerStyle:function(e,t){var n,i=this.resizer;0!=o[e][0]&&(n=parseInt(i.style.left)+t.x,i.style.left=this._validScaledProp("left",n)+"px"),0!=o[e][1]&&(n=parseInt(i.style.top)+t.y,i.style.top=this._validScaledProp("top",n)+"px"),0!=o[e][2]&&(n=i.clientWidth+o[e][2]*t.x,i.style.width=this._validScaledProp("width",n)+"px"),0!=o[e][3]&&(n=i.clientHeight+o[e][3]*t.y,i.style.height=this._validScaledProp("height",n)+"px")},_validScaledProp:function(e,t){var n=this.resizer,i=document;switch(t=isNaN(t)?0:t,e){case"left":return t<0?0:t+n.clientWidth>i.clientWidth?i.clientWidth-n.clientWidth:t;case"top":return t<0?0:t+n.clientHeight>i.clientHeight?i.clientHeight-n.clientHeight:t;case"width":return t<=0?1:t+n.offsetLeft>i.clientWidth?i.clientWidth-n.offsetLeft:t;case"height":return t<=0?1:t+n.offsetTop>i.clientHeight?i.clientHeight-n.offsetTop:t}},hideCover:function(){this.cover.style.display="none"},showCover:function(){var e=f.getXY(this.editor.ui.getDom()),t=f.getXY(this.editor.iframe);f.setStyles(this.cover,{width:this.editor.iframe.offsetWidth+"px",height:this.editor.iframe.offsetHeight+"px",top:t.y-e.y+"px",left:t.x-e.x+"px",position:"absolute",display:""})},show:function(e){this.resizer.style.display="block",e&&this.attachTo(e),f.on(this.resizer,"mousedown",this.proxy(this._eventHandler,this)),f.on(this.doc,"mouseup",this.proxy(this._eventHandler,this)),this.showCover(),this.editor.fireEvent("afterscaleshow",this),this.editor.fireEvent("saveScene")},hide:function(){this.hideCover(),this.resizer.style.display="none",f.un(this.resizer,"mousedown",this.proxy(this._eventHandler,this)),f.un(this.doc,"mouseup",this.proxy(this._eventHandler,this)),this.editor.fireEvent("afterscalehide",this)},proxy:function(t,n){return function(e){return t.apply(n||this,arguments)}},attachTo:function(e){e=this.target=e;var t=this.resizer,n=f.getXY(e),i=f.getXY(this.editor.iframe),o=f.getXY(t.parentNode);f.setStyles(t,{width:e.width+"px",height:e.height+"px",left:i.x+n.x-this.editor.document.body.scrollLeft-o.x-parseInt(t.style.borderLeftWidth)+"px",top:i.y+n.y-this.editor.document.body.scrollTop-o.y-parseInt(t.style.borderTopWidth)+"px"})}},function(){var a,s=this;s.setOpt("imageScaleEnabled",!0),!r.ie&&s.options.imageScaleEnabled&&s.addListener("click",function(e,t){var n=s.selection.getRange().getClosedNode();if(n&&"IMG"==n.tagName&&"false"!=s.body.contentEditable){if(!(-1!=n.className.indexOf("edui-faked-music")||n.getAttribute("anchorname")||f.hasClass(n,"loadingclass")||f.hasClass(n,"loaderrorclass"))){if(!a){(a=new l).init(s),s.ui.getDom().appendChild(a.resizer);var i,o=function(e){a.hide(),a.target&&s.selection.getRange().selectNode(a.target).select()},r=function(e){var t=e.target||e.srcElement;!t||void 0!==t.className&&-1!=t.className.indexOf("edui-editor-imagescale")||o()};s.addListener("afterscaleshow",function(e){s.addListener("beforekeydown",o),s.addListener("beforemousedown",r),f.on(document,"keydown",o),f.on(document,"mousedown",r),s.selection.getNative().removeAllRanges()}),s.addListener("afterscalehide",function(e){s.removeListener("beforekeydown",o),s.removeListener("beforemousedown",r),f.un(document,"keydown",o),f.un(document,"mousedown",r),(e=a.target).parentNode&&s.selection.getRange().selectNode(e).select()}),f.on(a.resizer,"mousedown",function(e){s.selection.getNative().removeAllRanges();var t=e.target||e.srcElement;t&&-1==t.className.indexOf("edui-editor-imagescale-hand")&&(i=setTimeout(function(){a.hide(),a.target&&s.selection.getRange().selectNode(t).select()},200))}),f.on(a.resizer,"mouseup",function(e){(e=e.target||e.srcElement)&&-1==e.className.indexOf("edui-editor-imagescale-hand")&&clearTimeout(i)})}a.show(n)}}else a&&"none"!=a.resizer.style.display&&a.hide()}),r.webkit&&s.addListener("click",function(e,t){"IMG"==t.target.tagName&&"false"!=s.body.contentEditable&&new M.Range(s.document).selectNode(t.target).select()})}}(),UE.plugin.register("autolink",function(){return r.ie?{}:{bindEvents:{reset:function(){},keydown:function(e,t){if(32==(n=t.keyCode||t.which)||13==n){for(var n,i,o=(n=this.selection.getNative()).getRangeAt(0).cloneRange(),r=o.startContainer;1==r.nodeType&&0<o.startOffset&&(r=o.startContainer.childNodes[o.startOffset-1]);)o.setStart(r,1==r.nodeType?r.childNodes.length:r.nodeValue.length),o.collapse(!0),r=o.startContainer;do{if(0==o.startOffset){for(r=o.startContainer.previousSibling;r&&1==r.nodeType;)r=r.lastChild;if(!r||f.isFillChar(r))break;i=r.nodeValue.length}else r=o.startContainer,i=o.startOffset;o.setStart(r,i-1),i=o.toString().charCodeAt(0)}while(160!=i&&32!=i);if(o.toString().replace(new RegExp(f.fillChar,"g"),"").match(/(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i)){for(;o.toString().length&&!/^(?:https?:\/\/|ssh:\/\/|ftp:\/\/|file:\/|www\.)/i.test(o.toString());)try{o.setStart(o.startContainer,o.startOffset+1)}catch(e){for(r=o.startContainer;!(next=r.nextSibling);){if(f.isBody(r))return;r=r.parentNode}o.setStart(next,0)}if(!f.findParentByTagName(o.startContainer,"a",!0)){i=this.document.createElement("a");var a;r=this.document.createTextNode(" ");this.undoManger&&this.undoManger.save(),i.appendChild(o.extractContents()),i.href=i.innerHTML=i.innerHTML.replace(/<[^>]+>/g,""),a=i.getAttribute("href").replace(new RegExp(f.fillChar,"g"),""),a=/^(?:https?:\/\/)/gi.test(a)?a:"http://"+a,i.setAttribute("_src",p.html(a)),i.href=p.html(a),o.insertNode(i),i.parentNode.insertBefore(r,i.nextSibling),o.setStart(r,0),o.collapse(!0),n.removeAllRanges(),n.addRange(o),this.undoManger&&this.undoManger.save()}}}}}}},function(){var a={37:1,38:1,39:1,40:1,13:1,32:1};r.ie&&this.addListener("keyup",function(e,t){var n=t.keyCode;if(a[n]){var i=this.selection.getRange(),o=i.startContainer;if(13==n){for(;o&&!f.isBody(o)&&!f.isBlockElm(o);)o=o.parentNode;o&&!f.isBody(o)&&"P"==o.nodeName&&(i=o.previousSibling)&&1==i.nodeType&&(i=function(e){if(3==e.nodeType)return null;if("A"==e.nodeName)return e;for(e=e.lastChild;e;){if("A"==e.nodeName)return e;if(3==e.nodeType){if(f.isWhitespace(e)){e=e.previousSibling;continue}return null}e=e.lastChild}}(i))&&!i.getAttribute("_href")&&f.remove(i,!0)}else 32==n?3==o.nodeType&&/^\s$/.test(o.nodeValue)&&(o=o.previousSibling)&&"A"==o.nodeName&&!o.getAttribute("_href")&&f.remove(o,!0):(o=f.findParentByTagName(o,"a",!0))&&!o.getAttribute("_href")&&(n=i.createBookmark(),f.remove(o,!0),i.moveToBookmark(n).select(!0))}})}),UE.plugins.autoheight=function(){function n(){var t=this;clearTimeout(e),s||t.queryCommandState&&(!t.queryCommandState||1==t.queryCommandState("source"))||(e=setTimeout(function(){for(var e=t.body.lastChild;e&&1!=e.nodeType;)e=e.previousSibling;e&&1==e.nodeType&&(e.style.clear="both",(a=Math.max(f.getXY(e).y+e.offsetHeight+25,Math.max(d.minFrameHeight,d.initialFrameHeight)))!=l&&(a!==parseInt(t.iframe.parentNode.style.height)&&(t.iframe.parentNode.style.height=a+"px"),t.body.style.height=a+"px",l=a),f.removeStyle(e,"clear"))},50))}var i=this;if(i.autoHeightEnabled=!1!==i.options.autoHeightEnabled,i.autoHeightEnabled){var o,a,e,s,l=0,d=i.options;i.addListener("fullscreenchanged",function(e,t){s=t}),i.addListener("destroy",function(){i.removeListener("contentchange afterinserthtml keyup mouseup",n)}),i.enableAutoHeight=function(){var e=this;if(e.autoHeightEnabled){var t=e.document;e.autoHeightEnabled=!0,o=t.body.style.overflowY,t.body.style.overflowY="hidden",e.addListener("contentchange afterinserthtml keyup mouseup",n),setTimeout(function(){n.call(e)},r.gecko?100:0),e.fireEvent("autoheightchanged",e.autoHeightEnabled)}},i.disableAutoHeight=function(){i.body.style.overflowY=o||"",i.removeListener("contentchange",n),i.removeListener("keyup",n),i.removeListener("mouseup",n),i.autoHeightEnabled=!1,i.fireEvent("autoheightchanged",i.autoHeightEnabled)},i.on("setHeight",function(){i.disableAutoHeight()}),i.addListener("ready",function(){var e,t;i.enableAutoHeight(),f.on(r.ie?i.body:i.document,r.webkit?"dragover":"drop",function(){clearTimeout(e),e=setTimeout(function(){n.call(i)},100)}),window.onscroll=function(){null===t?t=this.scrollY:0==this.scrollY&&0!=t&&(i.window.scrollTo(0,0),t=null)}})}},UE.plugins.autofloat=function(){function i(){b=!0,g.parentNode&&g.parentNode.removeChild(g),l.style.cssText=s}function n(){var e=c(o.container),t=o.options.toolbarTopOffset||0;if(e.top<0&&e.bottom-l.offsetHeight>t){e=f.getXY(l),t=f.getComputedStyle(l,"position");var n=f.getComputedStyle(l,"left");l.style.width=l.offsetWidth+"px",l.style.zIndex=1*o.options.zIndex+1,l.parentNode.insertBefore(g,l),m||h&&r.ie?("absolute"!=l.style.position&&(l.style.position="absolute"),l.style.top=(document.body.scrollTop||document.documentElement.scrollTop)-d+a+"px"):(r.ie7Compat&&b&&(b=!1,l.style.left=f.getXY(l).x-document.documentElement.getBoundingClientRect().left+2+"px"),"fixed"!=l.style.position&&(l.style.position="fixed",l.style.top=a+"px",("absolute"==t||"relative"==t)&&parseFloat(n)&&(l.style.left=e.x+"px")))}else i()}var o=this,t=o.getLang();o.setOpt({topOffset:0});var a=o.options.topOffset;if(!1!==o.options.autoFloatEnabled){var s,l,d,c,u=UE.ui.uiUtils,m=r.ie&&r.version<=6,h=r.quirks,g=document.createElement("div"),b=!0,v=p.defer(function(){n()},r.ie?200:100,!0);o.addListener("destroy",function(){f.un(window,["scroll","resize"],n),o.removeListener("keydown",v)}),o.addListener("ready",function(){var e;(UE.ui?1:(alert(t.autofloatMsg),0))&&o.ui&&(c=u.getClientRect,l=o.ui.getDom("toolbarbox"),d=c(l).top,s=l.style.cssText,g.style.height=l.offsetHeight+"px",m&&((e=document.body.style).backgroundImage='url("about:blank")',e.backgroundAttachment="fixed"),f.on(window,["scroll","resize"],n),o.addListener("keydown",v),o.addListener("beforefullscreenchange",function(e,t){t&&i()}),o.addListener("fullscreenchanged",function(e,t){t||n()}),o.addListener("sourcemodechanged",function(e,t){setTimeout(function(){n()},0)}),o.addListener("clearDoc",function(){setTimeout(function(){n()},0)}))})}},UE.plugins.video=function(){function s(e,t,n,i,o,r,a){var s;switch(a){case"image":s="<img "+(i?'id="'+i+'"':"")+' width="'+t+'" height="'+n+'" _url="'+e+'" class="'+r.replace(/\bvideo-js\b/,"")+'" src="'+l.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" style="background:url('+l.options.UEDITOR_HOME_URL+"themes/default/images/videologo.gif) no-repeat center center; border:1px solid gray;"+(o?"float:"+o+";":"")+'" />';break;case"embed":s='<embed type="application/x-shockwave-flash" class="'+r+'" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+p.html(e)+'" width="'+t+'" height="'+n+'"'+(o?' style="float:'+o+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >';break;case"video":"ogv"==(a=e.substr(e.lastIndexOf(".")+1))&&(a="ogg"),s="<video"+(i?' id="'+i+'"':"")+' class="'+r+' video-js" '+(o?' style="float:'+o+'"':"")+' controls preload="none" width="'+t+'" height="'+n+'" src="'+e+'" data-setup="{}"><source src="'+e+'" type="video/'+a+'" /></video>'}return s}function t(e,i){p.each(e.getNodesByTagName(i?"img":"embed video"),function(e){var t=e.getAttr("class");if(t&&-1!=t.indexOf("edui-faked-video")){var n=s(i?e.getAttr("_url"):e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),null,e.getStyle("float")||"",t,i?"embed":"image");e.parentNode.replaceChild(UE.uNode.createElement(n),e)}t&&-1!=t.indexOf("edui-upload-video")&&(n=s(i?e.getAttr("_url"):e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),null,e.getStyle("float")||"",t,i?"video":"image"),e.parentNode.replaceChild(UE.uNode.createElement(n),e))})}var l=this;l.addOutputRule(function(e){t(e,!0)}),l.addInputRule(function(e){t(e)}),l.commands.insertvideo={execCommand:function(e,t,n){var i,o=[];e=0;for(var r,a=(t=p.isArray(t)?t:[t]).length;e<a;e++)r=t[e],i="upload"==n?"edui-upload-video video-js vjs-default-skin":"edui-faked-video",o.push(s(r.url,r.width||420,r.height||280,"tmpVedio"+e,null,i,"image"));for(l.execCommand("inserthtml",o.join(""),!0),n=this.selection.getRange(),e=0,a=t.length;e<a;e++)o=this.document.getElementById("tmpVedio"+e),f.removeAttributes(o,"id"),n.selectNode(o).select(),l.execCommand("imagefloat",t[e].align)},queryCommandState:function(){var e=l.selection.getRange().getClosedNode();return!e||"edui-faked-video"!=e.className&&-1==e.className.indexOf("edui-upload-video")?0:1}}},mL=UE.UETable=function(e){this.table=e,this.indexTable=[],this.selectedTds=[],this.cellsRange={},this.update(e)},mL.removeSelectedClass=function(e){p.each(e,function(e){f.removeClasses(e,"selectTdClass")})},mL.addSelectedClass=function(e){p.each(e,function(e){f.addClass(e,"selectTdClass")})},mL.isEmptyBlock=function(e){var t=new RegExp(f.fillChar,"g");if(0<e[r.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length)return 0;for(var n in w.$isNotEmpty)if(w.$isNotEmpty.hasOwnProperty(n)&&e.getElementsByTagName(n).length)return 0;return 1},mL.getWidth=function(e){return e?parseInt(f.getComputedStyle(e,"width"),10):0},mL.getTableCellAlignState=function(e){!p.isArray(e)&&(e=[e]);var n={},i=["align","valign"],o=null,r=!0;return p.each(e,function(t){return p.each(i,function(e){if(o=t.getAttribute(e),!n[e]&&o)n[e]=o;else if(!n[e]||o!==n[e])return r=!1}),r}),r?n:null},mL.getTableItemsByRange=function(e){(t=e.selection.getStart())&&t.id&&0===t.id.indexOf("_baidu_bookmark_start_")&&t.nextSibling&&(t=t.nextSibling);var t,n=(e=t&&f.findParentByTagName(t,["td","th"],!0))&&e.parentNode;return{cell:e,tr:n,table:(t=t&&f.findParentByTagName(t,"caption",!0))?t.parentNode:n&&n.parentNode.parentNode,caption:t}},mL.getUETableBySelected=function(e){return(e=mL.getTableItemsByRange(e).table)&&e.ueTable&&e.ueTable.selectedTds.length?e.ueTable:null},mL.getDefaultValue=function(e,t){var n,i,o,r={thin:"0px",medium:"1px",thick:"2px"};if(t)a=t.getElementsByTagName("td")[0],o=f.getComputedStyle(t,"border-left-width"),n=parseInt(r[o]||o,10),o=f.getComputedStyle(a,"padding-left"),i=parseInt(r[o]||o,10),o=f.getComputedStyle(a,"border-left-width"),r=parseInt(r[o]||o,10);else{(t=e.document.createElement("table")).insertRow(0).insertCell(0).innerHTML="xxx",e.body.appendChild(t);var a=t.getElementsByTagName("td")[0];o=f.getComputedStyle(t,"border-left-width"),n=parseInt(r[o]||o,10),o=f.getComputedStyle(a,"padding-left"),i=parseInt(r[o]||o,10),o=f.getComputedStyle(a,"border-left-width"),r=parseInt(r[o]||o,10),f.remove(t)}return{tableBorder:n,tdPadding:i,tdBorder:r}},mL.getUETable=function(e){var t=e.tagName.toLowerCase();return(e="td"==t||"th"==t||"caption"==t?f.findParentByTagName(e,"table",!0):e).ueTable||(e.ueTable=new mL(e)),e.ueTable},mL.cloneCell=function(e,t,n){if(!e||p.isString(e))return this.table.ownerDocument.createElement(e||"td");var i=f.hasClass(e,"selectTdClass");i&&f.removeClasses(e,"selectTdClass");var o=e.cloneNode(!0);return t&&(o.rowSpan=o.colSpan=1),!n&&f.removeAttributes(o,"width height"),!n&&f.removeAttributes(o,"style"),o.style.borderLeftStyle="",o.style.borderTopStyle="",o.style.borderLeftColor=e.style.borderRightColor,o.style.borderLeftWidth=e.style.borderRightWidth,o.style.borderTopColor=e.style.borderBottomColor,o.style.borderTopWidth=e.style.borderBottomWidth,i&&f.addClass(e,"selectTdClass"),o},mL.prototype={getMaxRows:function(){for(var e,t=this.table.rows,n=1,i=0;e=t[i];i++){for(var o,r=1,a=0;o=e.cells[a++];)r=Math.max(o.rowSpan||1,r);n=Math.max(r+i,n)}return n},getMaxCols:function(){for(var e,t=this.table.rows,n=0,i={},o=0;e=t[o];o++){for(var r,a=0,s=0;r=e.cells[s++];)if(a+=r.colSpan||1,r.rowSpan&&1<r.rowSpan)for(var l=1;l<r.rowSpan;l++)i["row_"+(o+l)]?i["row_"+(o+l)]++:i["row_"+(o+l)]=r.colSpan||1;a+=i["row_"+o]||0,n=Math.max(a,n)}return n},getCellColIndex:function(e){},getHSideCell:function(e,t){try{var n,i,o=this.getCellInfo(e),r=this.selectedTds.length,a=this.cellsRange;return!t&&(r?!a.beginColIndex:!o.colIndex)||t&&(r?a.endColIndex==this.colsNum-1:o.colIndex==this.colsNum-1)?null:(n=r?a.beginRowIndex:o.rowIndex,i=t?r?a.endColIndex+1:o.colIndex+1:r?a.beginColIndex-1:o.colIndex<1?0:o.colIndex-1,this.getCell(this.indexTable[n][i].rowIndex,this.indexTable[n][i].cellIndex))}catch(e){}},getTabNextCell:function(e,t){var n,i=this.getCellInfo(e),o=t||i.rowIndex;i=i.colIndex+1+(i.colSpan-1);try{n=this.getCell(this.indexTable[o][i].rowIndex,this.indexTable[o][i].cellIndex)}catch(e){try{o=1*o+1,i=0,n=this.getCell(this.indexTable[o][i].rowIndex,this.indexTable[o][i].cellIndex)}catch(e){}}return n},getVSideCell:function(e,t,n){try{var i,o,r=this.getCellInfo(e),a=this.selectedTds.length&&!n,s=this.cellsRange;return!t&&0==r.rowIndex||t&&(a?s.endRowIndex==this.rowsNum-1:r.rowIndex+r.rowSpan>this.rowsNum-1)?null:(i=t?a?s.endRowIndex+1:r.rowIndex+r.rowSpan:a?s.beginRowIndex-1:r.rowIndex-1,o=a?s.beginColIndex:r.colIndex,this.getCell(this.indexTable[i][o].rowIndex,this.indexTable[i][o].cellIndex))}catch(e){}},getSameEndPosCells:function(e,t){try{for(var n="x"===t.toLowerCase(),i=f.getXY(e)[n?"x":"y"]+e["offset"+(n?"Width":"Height")],o=this.table.rows,r=null,a=[],s=0;s<this.rowsNum;s++){r=o[s].cells;for(var l,d=0;l=r[d++];){var c=f.getXY(l)[n?"x":"y"]+l["offset"+(n?"Width":"Height")];if(i<c&&n)break;if((e==l||i==c)&&(1==l[n?"colSpan":"rowSpan"]&&a.push(l),n))break}}return a}catch(e){}},setCellContent:function(e,t){e.innerHTML=t||(r.ie?f.fillChar:"<br />")},cloneCell:mL.cloneCell,getSameStartPosXCells:function(e){try{var t,n=f.getXY(e).x+e.offsetWidth,i=this.table.rows;e=[];for(var o=0;o<this.rowsNum;o++){t=i[o].cells;for(var r,a=0;r=t[a++];){var s=f.getXY(r).x;if(n<s)break;if(s==n&&1==r.colSpan){e.push(r);break}}}return e}catch(e){}},update:function(e){this.table=e||this.table,this.selectedTds=[],this.cellsRange={},this.indexTable=[],e=this.table.rows;for(var t=this.getMaxRows(),n=t-e.length,i=this.getMaxCols();n--;)this.table.insertRow(e.length);this.rowsNum=t,this.colsNum=i,n=0;for(var o=e.length;n<o;n++)this.indexTable[n]=Array(i);var r;for(n=0;r=e[n];n++){var a;for(o=0,r=r.cells;a=r[o];o++){a.rowSpan>t&&(a.rowSpan=t);var s=o,l=a.rowSpan||1;for(a=a.colSpan||1;this.indexTable[n][s];)s++;for(var d=0;d<l;d++)for(var c=0;c<a;c++)this.indexTable[n+d][s+c]={rowIndex:n,cellIndex:o,colIndex:s,rowSpan:l,colSpan:a}}}for(d=0;d<t;d++)for(c=0;c<i;c++)void 0===this.indexTable[d][c]&&(a=(a=(r=e[d]).cells[r.cells.length-1])?a.cloneNode(!0):this.table.ownerDocument.createElement("td"),this.setCellContent(a),1!==a.colSpan&&(a.colSpan=1),1!==a.rowSpan&&(a.rowSpan=1),r.appendChild(a),this.indexTable[d][c]={rowIndex:d,cellIndex:a.cellIndex,colIndex:c,rowSpan:1,colSpan:1});e=f.getElementsByTagName(this.table,"td");var u=[];if(p.each(e,function(e){f.hasClass(e,"selectTdClass")&&u.push(e)}),u.length&&(t=u[u.length-1],e=this.getCellInfo(u[0]),t=this.getCellInfo(t),this.selectedTds=u,this.cellsRange={beginRowIndex:e.rowIndex,beginColIndex:e.colIndex,endRowIndex:t.rowIndex+t.rowSpan-1,endColIndex:t.colIndex+t.colSpan-1}),!f.hasClass(this.table.rows[0],"firstRow"))for(f.addClass(this.table.rows[0],"firstRow"),n=1;n<this.table.rows.length;n++)f.removeClasses(this.table.rows[n],"firstRow")},getCellInfo:function(e){if(e){var t=e.cellIndex;e=e.parentNode.rowIndex;for(var n=this.indexTable[e],i=this.colsNum,o=t;o<i;o++){var r=n[o];if(r.rowIndex===e&&r.cellIndex===t)return r}}},getCell:function(e,t){return e<this.rowsNum&&this.table.rows[e].cells[t]||null},deleteCell:function(e,t){t="number"==typeof t?t:e.parentNode.rowIndex,this.table.rows[t].deleteCell(e.cellIndex)},getCellsRange:function(e,t){try{var f=this,n=f.getCellInfo(e);if(e===t)return{beginRowIndex:n.rowIndex,beginColIndex:n.colIndex,endRowIndex:n.rowIndex+n.rowSpan-1,endColIndex:n.colIndex+n.colSpan-1};var i=f.getCellInfo(t);return function e(t,n,i,o){var r,a,s,l=t,d=n,c=i,u=o;if(0<t)for(a=n;a<o;a++)(s=(r=f.indexTable[t][a]).rowIndex)<t&&(l=Math.min(s,l));if(o<f.colsNum)for(s=t;s<i;s++)o<(a=(r=f.indexTable[s][o]).colIndex+r.colSpan-1)&&(u=Math.max(a,u));if(i<f.rowsNum)for(a=n;a<o;a++)i<(s=(r=f.indexTable[i][a]).rowIndex+r.rowSpan-1)&&(c=Math.max(s,c));if(0<n)for(s=t;s<i;s++)(a=(r=f.indexTable[s][n]).colIndex)<n&&(d=Math.min(r.colIndex,d));return l!=t||d!=n||c!=i||u!=o?e(l,d,c,u):{beginRowIndex:t,beginColIndex:n,endRowIndex:i,endColIndex:o}}(Math.min(n.rowIndex,i.rowIndex),Math.min(n.colIndex,i.colIndex),Math.max(n.rowIndex+n.rowSpan-1,i.rowIndex+i.rowSpan-1),Math.max(n.colIndex+n.colSpan-1,i.colIndex+i.colSpan-1))}catch(e){}},getCells:function(e){this.clearSelected();for(var t,n,i=e.beginColIndex,o=e.endRowIndex,r=e.endColIndex,a={},s=[],l=e.beginRowIndex;l<=o;l++)for(var d=i;d<=r;d++){var c=(t=(e=this.indexTable[l][d]).rowIndex)+"|"+(n=e.colIndex);if(!a[c]){if(a[c]=1,t<l||n<d||t+e.rowSpan-1>o||n+e.colSpan-1>r)return null;s.push(this.getCell(t,e.cellIndex))}}return s},clearSelected:function(){mL.removeSelectedClass(this.selectedTds),this.selectedTds=[],this.cellsRange={}},setSelected:function(e){var t=this.getCells(e);mL.addSelectedClass(t),this.selectedTds=t,this.cellsRange=e},isFullRow:function(){var e=this.cellsRange;return e.endColIndex-e.beginColIndex+1==this.colsNum},isFullCol:function(){var e=this.cellsRange,t=this.table.getElementsByTagName("th");return e=e.endRowIndex-e.beginRowIndex+1,t.length?e==this.rowsNum||e==this.rowsNum-1:e==this.rowsNum},getNextCell:function(e,t,n){try{var i,o,r=this.getCellInfo(e),a=this.selectedTds.length&&!n,s=this.cellsRange;return!t&&0==r.rowIndex||t&&(a?s.endRowIndex==this.rowsNum-1:r.rowIndex+r.rowSpan>this.rowsNum-1)?null:(i=t?a?s.endRowIndex+1:r.rowIndex+r.rowSpan:a?s.beginRowIndex-1:r.rowIndex-1,o=a?s.beginColIndex:r.colIndex,this.getCell(this.indexTable[i][o].rowIndex,this.indexTable[i][o].cellIndex))}catch(e){}},getPreviewCell:function(e,t){try{var n,i,o=this.getCellInfo(e),r=this.selectedTds.length,a=this.cellsRange;return!t&&(r?!a.beginColIndex:!o.colIndex)||t&&(r?a.endColIndex==this.colsNum-1:o.rowIndex>this.colsNum-1)?null:(n=t?r?a.beginRowIndex:o.rowIndex<1?0:o.rowIndex-1:r?a.beginRowIndex:o.rowIndex,i=t?r?a.endColIndex+1:o.colIndex:r?a.beginColIndex-1:o.colIndex<1?0:o.colIndex-1,this.getCell(this.indexTable[n][i].rowIndex,this.indexTable[n][i].cellIndex))}catch(e){}},moveContent:function(e,t){if(!mL.isEmptyBlock(t))if(mL.isEmptyBlock(e))e.innerHTML=t.innerHTML;else{var n=e.lastChild;for(3!=n.nodeType&&w.$block[n.tagName]||e.appendChild(e.ownerDocument.createElement("br"));n=t.firstChild;)e.appendChild(n)}},mergeRight:function(e){var t=this.getCellInfo(e),n=this.indexTable[t.rowIndex][t.colIndex+t.colSpan],i=this.getCell(n.rowIndex,n.cellIndex);e.colSpan=t.colSpan+n.colSpan,e.removeAttribute("width"),this.moveContent(e,i),this.deleteCell(i,n.rowIndex),this.update()},mergeDown:function(e){var t=this.getCellInfo(e),n=this.indexTable[t.rowIndex+t.rowSpan][t.colIndex],i=this.getCell(n.rowIndex,n.cellIndex);e.rowSpan=t.rowSpan+n.rowSpan,e.removeAttribute("height"),this.moveContent(e,i),this.deleteCell(i,n.rowIndex),this.update()},mergeRange:function(){var e=this.cellsRange;if("TH"==(n=this.getCell(e.beginRowIndex,this.indexTable[e.beginRowIndex][e.beginColIndex].cellIndex)).tagName&&e.endRowIndex!==e.beginRowIndex){var t=this.indexTable,n=(e=this.getCellInfo(n),this.getCell(1,t[1][e.colIndex].cellIndex));e=this.getCellsRange(n,this.getCell(t[this.rowsNum-1][e.colIndex].rowIndex,t[this.rowsNum-1][e.colIndex].cellIndex))}var i,o=this.getCells(e);for(t=0;i=o[t++];)i!==n&&(this.moveContent(n,i),this.deleteCell(i));if(n.rowSpan=e.endRowIndex-e.beginRowIndex+1,1<n.rowSpan&&n.removeAttribute("height"),n.colSpan=e.endColIndex-e.beginColIndex+1,1<n.colSpan&&n.removeAttribute("width"),n.rowSpan==this.rowsNum&&1!=n.colSpan&&(n.colSpan=1),n.colSpan==this.colsNum&&1!=n.rowSpan){if(o=n.parentNode.rowIndex,this.table.deleteRow)for(t=o+1,o+=1,e=n.rowSpan;t<e;t++)this.table.deleteRow(o);else for(t=0,e=n.rowSpan-1;t<e;t++)(i=this.table.rows[o+1]).parentNode.removeChild(i);n.rowSpan=1}this.update()},insertRow:function(e,t){function n(e,t,n){0==e?"TH"==(e=(n.nextSibling||n.previousSibling).cells[e]).tagName&&((e=t.ownerDocument.createElement("th")).appendChild(t.firstChild),n.insertBefore(e,t),f.remove(t)):"TH"==t.tagName&&((e=t.ownerDocument.createElement("td")).appendChild(t.firstChild),n.insertBefore(e,t),f.remove(t))}var i,o=this.colsNum,r=this.table.insertRow(e),a="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.rowsNum)for(var s=0;s<o;s++)i=this.cloneCell(t,!0),this.setCellContent(i),i.getAttribute("vAlign")&&i.setAttribute("vAlign",i.getAttribute("vAlign")),r.appendChild(i),a||n(s,i,r);else{var l=this.indexTable[e];for(s=0;s<o;s++){var d=l[s];d.rowIndex<e?(i=this.getCell(d.rowIndex,d.cellIndex)).rowSpan=d.rowSpan+1:(i=this.cloneCell(t,!0),this.setCellContent(i),r.appendChild(i)),a||n(s,i,r)}}return this.update(),r},deleteRow:function(e){for(var t=this.table.rows[e],n=this.indexTable[e],i=this.colsNum,o=0,r=0;r<i;){var a=n[r],s=this.getCell(a.rowIndex,a.cellIndex);if(1<s.rowSpan&&a.rowIndex==e){(a=s.cloneNode(!0)).rowSpan=s.rowSpan-1,a.innerHTML="";var l=e+(s.rowSpan=1),d=this.table.rows[l];(l=this.getPreviewMergedCellsNum(l,r)-o)<r?(l=r-l-1,f.insertAfter(d.cells[l],a)):d.cells.length&&d.insertBefore(a,d.cells[0]),o+=1}r+=s.colSpan||1}for(e=[],o={},r=0;r<i;r++)o[d=(s=n[r].rowIndex)+"_"+(a=n[r].cellIndex)]||(o[d]=1,s=this.getCell(s,a),e.push(s));var c=[];p.each(e,function(e){1==e.rowSpan?e.parentNode.removeChild(e):c.push(e)}),p.each(c,function(e){e.rowSpan--}),t.parentNode.removeChild(t),this.update()},insertCol:function(e,t,n){function i(e,t,n){0==e?"TH"==(e=t.nextSibling||t.previousSibling).tagName&&((e=t.ownerDocument.createElement("th")).appendChild(t.firstChild),n.insertBefore(e,t),f.remove(t)):"TH"==t.tagName&&((e=t.ownerDocument.createElement("td")).appendChild(t.firstChild),n.insertBefore(e,t),f.remove(t))}var o,r,a,s=this.rowsNum,l=0,d=parseInt((this.table.offsetWidth-20*(this.colsNum+1)-(this.colsNum+1))/(this.colsNum+1),10),c="string"==typeof t&&"TH"==t.toUpperCase();if(0==e||e==this.colsNum)for(;l<s;l++)a=(o=this.table.rows[l]).cells[0==e?e:o.cells.length],r=this.cloneCell(t,!0),this.setCellContent(r),r.setAttribute("vAlign",r.getAttribute("vAlign")),a&&r.setAttribute("width",a.getAttribute("width")),e?f.insertAfter(o.cells[o.cells.length-1],r):o.insertBefore(r,o.cells[0]),c||i(l,r,o);else for(;l<s;l++)(a=this.indexTable[l][e]).colIndex<e?(r=this.getCell(a.rowIndex,a.cellIndex)).colSpan=a.colSpan+1:(a=(o=this.table.rows[l]).cells[a.cellIndex],r=this.cloneCell(t,!0),this.setCellContent(r),r.setAttribute("vAlign",r.getAttribute("vAlign")),a&&r.setAttribute("width",a.getAttribute("width")),a?o.insertBefore(r,a):o.appendChild(r)),c||i(l,r,o);this.update(),this.updateWidth(d,n||{tdPadding:10,tdBorder:1})},updateWidth:function(t,e){var n=this.table,i=mL.getWidth(n)-2*e.tdPadding-e.tdBorder+t;i<n.ownerDocument.body.offsetWidth?n.setAttribute("width",i):(n=f.getElementsByTagName(this.table,"td th"),p.each(n,function(e){e.setAttribute("width",t)}))},deleteCol:function(e){for(var t=this.indexTable,n=this.table.rows,i=this.table.getAttribute("width"),o=0,r=this.rowsNum,a={},s=0;s<r;){var l=t[s][e],d=l.rowIndex+"_"+l.colIndex;a[d]||(a[d]=1,d=this.getCell(l.rowIndex,l.cellIndex),o||(o=d&&parseInt(d.offsetWidth/d.colSpan,10).toFixed(0)),1<d.colSpan?d.colSpan--:n[s].deleteCell(l.cellIndex),s+=l.rowSpan||1)}this.table.setAttribute("width",i-o),this.update()},splitToCells:function(e){var t=this;e=this.splitToRows(e),p.each(e,function(e){t.splitToCols(e)})},splitToRows:function(e){var t=this.getCellInfo(e),n=t.rowIndex,i=t.colIndex,o=[];e.rowSpan=1,o.push(e);for(var r=n,a=n+t.rowSpan;r<a;r++)if(r!=n){var s=this.table.rows[r].insertCell(i-this.getPreviewMergedCellsNum(r,i));s.colSpan=t.colSpan,this.setCellContent(s),s.setAttribute("vAlign",e.getAttribute("vAlign")),s.setAttribute("align",e.getAttribute("align")),e.style.cssText&&(s.style.cssText=e.style.cssText),o.push(s)}return this.update(),o},getPreviewMergedCellsNum:function(e,t){for(var n=this.indexTable[e],i=0,o=0;o<t;){var r=n[o].colSpan;i+=r-(n[o].rowIndex==e?1:0),o+=r}return i},splitToCols:function(e){var t=(e.offsetWidth/e.colSpan-22).toFixed(0),n=this.getCellInfo(e),i=n.rowIndex,o=n.colIndex,r=[];e.colSpan=1,e.setAttribute("width",t),r.push(e);for(var a=o,s=o+n.colSpan;a<s;a++)if(a!=o){var l=this.table.rows[i],d=l.insertCell(this.indexTable[i][a].cellIndex+1);if(d.rowSpan=n.rowSpan,this.setCellContent(d),d.setAttribute("vAlign",e.getAttribute("vAlign")),d.setAttribute("align",e.getAttribute("align")),d.setAttribute("width",t),e.style.cssText&&(d.style.cssText=e.style.cssText),"TH"==e.tagName){var c=e.ownerDocument.createElement("th");c.appendChild(d.firstChild),c.setAttribute("vAlign",e.getAttribute("vAlign")),c.rowSpan=d.rowSpan,l.insertBefore(c,d),f.remove(d)}r.push(d)}return this.update(),r},isLastCell:function(e,t,n){return t=t||this.rowsNum,n=n||this.colsNum,(e=this.getCellInfo(e)).rowIndex+e.rowSpan==t&&e.colIndex+e.colSpan==n},getLastCell:function(e){e=e||this.table.getElementsByTagName("td"),this.getCellInfo(e[0]);var t,n=this,i=e[0],o=i.parentNode,r=0,a=0;return p.each(e,function(e){e.parentNode==o&&(a+=e.colSpan||1),r+=e.rowSpan*e.colSpan||1}),t=r/a,p.each(e,function(e){if(n.isLastCell(e,t,a))return i=e,!1}),i},selectRow:function(e){var t=this.indexTable[e];e=this.getCell(t[0].rowIndex,t[0].cellIndex),t=this.getCell(t[this.colsNum-1].rowIndex,t[this.colsNum-1].cellIndex),e=this.getCellsRange(e,t),this.setSelected(e)},selectTable:function(){var e=this.table.getElementsByTagName("td");e=this.getCellsRange(e[0],e[e.length-1]),this.setSelected(e)},setBackground:function(e,t){if("string"==typeof t)p.each(e,function(e){e.style.backgroundColor=t});else if("object"==typeof t){t=p.extend({repeat:!0,colorList:["#ddd","#fff"]},t);for(var n,i=this.getCellInfo(e[0]).rowIndex,o=0,r=t.colorList,a=0;n=e[a++];){var s=this.getCellInfo(n);n.style.backgroundColor=(l=r,d=i+o==s.rowIndex?o:++o,c=t.repeat,l[d]?l[d]:c?l[d%l.length]:"")}}var l,d,c},removeBackground:function(e){p.each(e,function(e){e.style.backgroundColor=""})}},function(){function n(e,t){var n,i,o,r,a=f.getElementsByTagName(e,"td th");p.each(a,function(e){e.removeAttribute("width")}),e.setAttribute("width",(n=t,i=!0,o=c.getDefaultValue(t,e),(r=n.body).offsetWidth-(i?2*parseInt(f.getComputedStyle(r,"margin-left"),10):0)-2*o.tableBorder-(n.options.offsetWidth||0)));var s=[];setTimeout(function(){p.each(a,function(e){1==e.colSpan&&s.push(e.offsetWidth)}),p.each(a,function(e,t){1==e.colSpan&&e.setAttribute("width",s[t]+"")})},0)}function a(e){if(e=l(e).cell){var t=d(e);return t.selectedTds.length?t.selectedTds:[e]}return[]}var c=UE.UETable,l=function(e){return c.getTableItemsByRange(e)},d=function(e){return c.getUETable(e)};UE.commands.inserttable={queryCommandState:function(){return l(this).table?-1:0},execCommand:function(e,t){t||(t=p.extend({},{numCols:this.options.defaultCols,numRows:this.options.defaultRows,tdvalign:this.options.tdvalign}));var n=this.selection.getRange().startContainer,i=(n=f.findParent(n,function(e){return f.isBlockElm(e)},!0)||this.body,c.getDefaultValue(this,void 0));n=Math.floor(n.offsetWidth/t.numCols-2*i.tdPadding-i.tdBorder);!t.tdvalign&&(t.tdvalign=this.options.tdvalign),this.execCommand("inserthtml",function(e,t){for(var n=[],i=e.numRows,o=e.numCols,a=0;a<i;a++){n.push("<tr"+(0==a?' class="firstRow"':"")+">");for(var s=0;s<o;s++)n.push('<td width="'+t+'"  vAlign="'+e.tdvalign+'" >'+(r.ie&&r.version<11?f.fillChar:"<br/>")+"</td>");n.push("</tr>")}return"<table><tbody>"+n.join("")+"</tbody></table>"}(t,n))}},UE.commands.insertparagraphbeforetable={queryCommandState:function(){return l(this).cell?0:-1},execCommand:function(){var e=l(this).table;if(e){var t=this.document.createElement("p");t.innerHTML=r.ie?"&nbsp;":"<br />",e.parentNode.insertBefore(t,e),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletetable={queryCommandState:function(){var e=this.selection.getRange();return f.findParentByTagName(e.startContainer,"table",!0)?0:-1},execCommand:function(e,t){var n=this.selection.getRange();if(t=t||f.findParentByTagName(n.startContainer,"table",!0)){var i=t.nextSibling;i||(i=f.createElement(this.document,"p",{innerHTML:r.ie?f.fillChar:"<br/>"}),t.parentNode.insertBefore(i,t)),f.remove(t),n=this.selection.getRange(),3==i.nodeType?n.setStartBefore(i):n.setStart(i,0),n.setCursor(!1,!0),this.fireEvent("tablehasdeleted")}}},UE.commands.cellalign={queryCommandState:function(){return a(this).length?0:-1},execCommand:function(e,t){var n=a(this);if(n.length)for(var i,o=0;i=n[o++];)i.setAttribute("align",t)}},UE.commands.cellvalign={queryCommandState:function(){return a(this).length?0:-1},execCommand:function(e,t){var n=a(this);if(n.length)for(var i,o=0;i=n[o++];)i.setAttribute("vAlign",t)}},UE.commands.insertcaption={queryCommandState:function(){var e=l(this).table;return e&&0==e.getElementsByTagName("caption").length?1:-1},execCommand:function(){var e=l(this).table;if(e){var t=this.document.createElement("caption");t.innerHTML=r.ie?f.fillChar:"<br/>",e.insertBefore(t,e.firstChild),this.selection.getRange().setStart(t,0).setCursor()}}},UE.commands.deletecaption={queryCommandState:function(){var e=this.selection.getRange();return(e=f.findParentByTagName(e.startContainer,"table"))?0==e.getElementsByTagName("caption").length?-1:1:-1},execCommand:function(){var e=this.selection.getRange();(e=f.findParentByTagName(e.startContainer,"table"))&&(f.remove(e.getElementsByTagName("caption")[0]),this.selection.getRange().setStart(e.rows[0].cells[0],0).setCursor())}},UE.commands.inserttitle={queryCommandState:function(){var e=l(this).table;return e?"th"!=(e=e.rows[0]).cells[e.cells.length-1].tagName.toLowerCase()?0:-1:-1},execCommand:function(){var e=l(this).table;e&&d(e).insertRow(0,"th"),e=e.getElementsByTagName("th")[0],this.selection.getRange().setStart(e,0).setCursor(!1,!0)}},UE.commands.deletetitle={queryCommandState:function(){var e=l(this).table;return e?"th"==(e=e.rows[0]).cells[e.cells.length-1].tagName.toLowerCase()?0:-1:-1},execCommand:function(){var e=l(this).table;e&&f.remove(e.rows[0]),e=e.getElementsByTagName("td")[0],this.selection.getRange().setStart(e,0).setCursor(!1,!0)}},UE.commands.inserttitlecol={queryCommandState:function(){var e=l(this).table;return e?e.rows[e.rows.length-1].getElementsByTagName("th").length?-1:0:-1},execCommand:function(e){(e=l(this).table)&&d(e).insertCol(0,"th"),n(e,this),e=e.getElementsByTagName("th")[0],this.selection.getRange().setStart(e,0).setCursor(!1,!0)}},UE.commands.deletetitlecol={queryCommandState:function(){var e=l(this).table;return e&&e.rows[e.rows.length-1].getElementsByTagName("th").length?0:-1},execCommand:function(){var e=l(this).table;if(e)for(var t=0;t<e.rows.length;t++)f.remove(e.rows[t].children[0]);n(e,this),e=e.getElementsByTagName("td")[0],this.selection.getRange().setStart(e,0).setCursor(!1,!0)}},UE.commands.mergeright={queryCommandState:function(e){var t=l(this);if(e=t.table,t=t.cell,!e||!t)return-1;var n=d(e);if(n.selectedTds.length)return-1;var i=n.getCellInfo(t),o=i.colIndex+i.colSpan;return o>=n.colsNum?-1:(n=n.indexTable[i.rowIndex][o],(e=e.rows[n.rowIndex].cells[n.cellIndex])&&t.tagName==e.tagName&&n.rowIndex==i.rowIndex&&n.rowSpan==i.rowSpan?0:-1)},execCommand:function(e){var t=(e=this.selection.getRange()).createBookmark(!0),n=l(this).cell;d(n).mergeRight(n),e.moveToBookmark(t).select()}},UE.commands.mergedown={queryCommandState:function(e){var t=l(this);if(e=t.table,t=t.cell,!e||!t)return-1;var n=d(e);if(n.selectedTds.length)return-1;var i=n.getCellInfo(t),o=i.rowIndex+i.rowSpan;return o>=n.rowsNum?-1:(n=n.indexTable[o][i.colIndex],(e=e.rows[n.rowIndex].cells[n.cellIndex])&&t.tagName==e.tagName&&n.colIndex==i.colIndex&&n.colSpan==i.colSpan?0:-1)},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell;d(n).mergeDown(n),e.moveToBookmark(t).select()}},UE.commands.mergecells={queryCommandState:function(){return c.getUETableBySelected(this)?0:-1},execCommand:function(){var e=c.getUETableBySelected(this);if(e&&e.selectedTds.length){var t=e.selectedTds[0];e.mergeRange(),e=this.selection.getRange(),f.isEmptyBlock(t)?e.setStart(t,0).collapse(!0):e.selectNodeContents(t),e.select()}}},UE.commands.insertrow={queryCommandState:function(){var e=l(this),t=e.cell;return t&&("TD"==t.tagName||"TH"==t.tagName&&e.tr!==e.table.rows[0])&&d(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=(i=l(this)).cell,i=i.table,o=d(i),r=o.getCellInfo(n);if(o.selectedTds.length)for(var a=0,s=(r=o.cellsRange).endRowIndex-r.beginRowIndex+1;a<s;a++)o.insertRow(r.beginRowIndex,n);else o.insertRow(r.rowIndex,n);e.moveToBookmark(t).select(),"enabled"===i.getAttribute("interlaced")&&this.fireEvent("interlacetable",i)}},UE.commands.insertrownext={queryCommandState:function(){var e=l(this),t=e.cell;return t&&"TD"==t.tagName&&d(e.table).rowsNum<this.options.maxRowNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=(i=l(this)).cell,i=i.table,o=d(i),r=o.getCellInfo(n);if(o.selectedTds.length)for(var a=0,s=(r=o.cellsRange).endRowIndex-r.beginRowIndex+1;a<s;a++)o.insertRow(r.endRowIndex+1,n);else o.insertRow(r.rowIndex+r.rowSpan,n);e.moveToBookmark(t).select(),"enabled"===i.getAttribute("interlaced")&&this.fireEvent("interlacetable",i)}},UE.commands.deleterow={queryCommandState:function(){return l(this).cell?0:-1},execCommand:function(){var e=l(this).cell,t=d(e),n=t.cellsRange,i=t.getCellInfo(e),o=t.getVSideCell(e),r=t.getVSideCell(e,!0);e=this.selection.getRange();if(p.isEmptyObject(n))t.deleteRow(i.rowIndex);else for(var a=n.beginRowIndex;a<n.endRowIndex+1;a++)t.deleteRow(n.beginRowIndex);(a=t.table).getElementsByTagName("td").length?1==i.rowSpan||i.rowSpan==n.endRowIndex-n.beginRowIndex+1?(r||o)&&e.selectNodeContents(r||o).setCursor(!1,!0):(t=t.getCell(i.rowIndex,t.indexTable[i.rowIndex][i.colIndex].cellIndex))&&e.selectNodeContents(t).setCursor(!1,!0):(t=a.nextSibling,f.remove(a),t&&e.setStart(t,0).setCursor(!1,!0)),"enabled"===a.getAttribute("interlaced")&&this.fireEvent("interlacetable",a)}},UE.commands.insertcol={queryCommandState:function(e){var t=(e=l(this)).cell;return t&&("TD"==t.tagName||"TH"==t.tagName&&t!==e.tr.cells[0])&&d(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(e){var t=this.selection.getRange(),n=t.createBookmark(!0);if(-1!=this.queryCommandState(e)){e=l(this).cell;var i=d(e),o=i.getCellInfo(e);if(i.selectedTds.length)for(var r=0,a=(o=i.cellsRange).endColIndex-o.beginColIndex+1;r<a;r++)i.insertCol(o.beginColIndex,e);else i.insertCol(o.colIndex,e);t.moveToBookmark(n).select(!0)}}},UE.commands.insertcolnext={queryCommandState:function(){var e=l(this);return e.cell&&d(e.table).colsNum<this.options.maxColNum?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell,i=d(n),o=i.getCellInfo(n);if(i.selectedTds.length)for(var r=0,a=(o=i.cellsRange).endColIndex-o.beginColIndex+1;r<a;r++)i.insertCol(o.endColIndex+1,n);else i.insertCol(o.colIndex+o.colSpan,n);e.moveToBookmark(t).select()}},UE.commands.deletecol={queryCommandState:function(){return l(this).cell?0:-1},execCommand:function(){var e=l(this).cell,t=d(e),n=t.cellsRange,i=t.getCellInfo(e),o=t.getHSideCell(e),r=t.getHSideCell(e,!0);if(p.isEmptyObject(n))t.deleteCol(i.colIndex);else for(i=n.beginColIndex;i<n.endColIndex+1;i++)t.deleteCol(n.beginColIndex);t=t.table,n=this.selection.getRange(),t.getElementsByTagName("td").length?f.inDoc(e,this.document)?n.setStart(e,0).setCursor(!1,!0):r&&f.inDoc(r,this.document)?n.selectNodeContents(r).setCursor(!1,!0):o&&f.inDoc(o,this.document)&&n.selectNodeContents(o).setCursor(!0,!0):(e=t.nextSibling,f.remove(t),e&&n.setStart(e,0).setCursor(!1,!0))}},UE.commands.splittocells={queryCommandState:function(){var e=l(this),t=e.cell;return!t||0<d(e.table).selectedTds.length?-1:t&&(1<t.colSpan||1<t.rowSpan)?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell;d(n).splitToCells(n),e.moveToBookmark(t).select()}},UE.commands.splittorows={queryCommandState:function(){var e=l(this),t=e.cell;return!t||0<d(e.table).selectedTds.length?-1:t&&1<t.rowSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell;d(n).splitToRows(n),e.moveToBookmark(t).select()}},UE.commands.splittocols={queryCommandState:function(){var e=l(this),t=e.cell;return!t||0<d(e.table).selectedTds.length?-1:t&&1<t.colSpan?0:-1},execCommand:function(){var e=this.selection.getRange(),t=e.createBookmark(!0),n=l(this).cell;d(n).splitToCols(n),e.moveToBookmark(t).select()}},UE.commands.adaptbytext=UE.commands.adaptbywindow={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(e){var t=l(this).table;t&&("adaptbywindow"==e?n(t,this):(e=f.getElementsByTagName(t,"td th"),p.each(e,function(e){e.removeAttribute("width")}),t.removeAttribute("width")))}},UE.commands.averagedistributecol={queryCommandState:function(){var e=c.getUETableBySelected(this);return e&&(e.isFullRow()||e.isFullCol())?0:-1},execCommand:function(e){var a=this,s=c.getUETableBySelected(a);s&&s.selectedTds.length&&function(t){p.each(f.getElementsByTagName(s.table,"th"),function(e){e.setAttribute("width","")});var e=s.isFullRow()?f.getElementsByTagName(s.table,"td"):s.selectedTds;p.each(e,function(e){1==e.colSpan&&e.setAttribute("width",t)})}(function(){var e=s.table,t=0,n=0,i=c.getDefaultValue(a,e);if(s.isFullRow())t=e.offsetWidth,n=s.colsNum;else{e=s.cellsRange.endColIndex;for(var o,r=s.cellsRange.beginColIndex;r<=e;)t+=(o=s.selectedTds[r]).offsetWidth,r+=o.colSpan,n+=1}return Math.ceil(t/n)-2*i.tdBorder-2*i.tdPadding}())}},UE.commands.averagedistributerow={queryCommandState:function(){var e=c.getUETableBySelected(this);return!e||e.selectedTds&&/th/gi.test(e.selectedTds[0].tagName)?-1:e.isFullRow()||e.isFullCol()?0:-1},execCommand:function(e){var t,n,l=this,d=c.getUETableBySelected(l);d&&d.selectedTds.length&&(t=function(){var e,t=0;e=d.table;var n=c.getDefaultValue(l,e),i=parseInt(f.getComputedStyle(e.getElementsByTagName("td")[0],"padding-top"));if(d.isFullCol()){t=f.getElementsByTagName(e,"caption");var o,a,s=f.getElementsByTagName(e,"th");0<t.length&&(o=t[0].offsetHeight),0<s.length&&(a=s[0].offsetHeight),t=e.offsetHeight-(o||0)-(a||0),e=0==s.length?d.rowsNum:d.rowsNum-1}else{for(a=d.cellsRange.beginRowIndex,s=d.cellsRange.endRowIndex,o=0,e=f.getElementsByTagName(e,"tr");a<=s;a++)t+=e[a].offsetHeight,o+=1;e=o}return r.ie&&r.version<9?Math.ceil(t/e):Math.ceil(t/e)-2*n.tdBorder-2*i}(),n=d.isFullCol()?f.getElementsByTagName(d.table,"td"):d.selectedTds,p.each(n,function(e){1==e.rowSpan&&e.setAttribute("height",t)}))}},UE.commands.cellalignment={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(e,t){var n=c.getUETableBySelected(this);n?p.each(n.selectedTds,function(e){f.setAttributes(e,t)}):(n=(n=this.selection.getStart())&&f.findParentByTagName(n,["td","th","caption"],!0),/caption/gi.test(n.tagName)?(n.style.textAlign=t.align,n.style.verticalAlign=t.vAlign):f.setAttributes(n,t),this.selection.getRange().setCursor(!0))},queryCommandValue:function(e){if((e=l(this).cell)||(e=a(this)[0]),e){var t=UE.UETable.getUETable(e).selectedTds;return!t.length&&(t=e),UE.UETable.getTableCellAlignState(t)}return null}},UE.commands.tablealignment={queryCommandState:function(){return r.ie&&r.version<8?-1:l(this).table?0:-1},execCommand:function(e,t){var n=this.selection.getStart();(n=n&&f.findParentByTagName(n,["table"],!0))&&n.setAttribute("align",t)}},UE.commands.edittable={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(e,t){var n=this.selection.getRange();(n=f.findParentByTagName(n.startContainer,"table"))&&(n=f.getElementsByTagName(n,"td").concat(f.getElementsByTagName(n,"th"),f.getElementsByTagName(n,"caption")),p.each(n,function(e){e.style.borderColor=t}))}},UE.commands.edittd={queryCommandState:function(){return l(this).table?0:-1},execCommand:function(e,t){var n=c.getUETableBySelected(this);n?p.each(n.selectedTds,function(e){e.style.backgroundColor=t}):(n=(n=this.selection.getStart())&&f.findParentByTagName(n,["td","th","caption"],!0))&&(n.style.backgroundColor=t)}},UE.commands.settablebackground={queryCommandState:function(){return 1<a(this).length?0:-1},execCommand:function(e,t){var n;n=a(this),d(n[0]).setBackground(n,t)}},UE.commands.cleartablebackground={queryCommandState:function(){var e=a(this);if(!e.length)return-1;for(var t,n=0;t=e[n++];)if(""!==t.style.backgroundColor)return 0;return-1},execCommand:function(){var e=a(this);d(e[0]).removeBackground(e)}},UE.commands.interlacetable=UE.commands.uninterlacetable={queryCommandState:function(e){var t=l(this).table;return t?(t=t.getAttribute("interlaced"),"interlacetable"==e?"enabled"===t?-1:0:t&&"disabled"!==t?0:-1):-1},execCommand:function(e,t){var n=l(this).table;"interlacetable"==e?(n.setAttribute("interlaced","enabled"),this.fireEvent("interlacetable",n,t)):(n.setAttribute("interlaced","disabled"),this.fireEvent("uninterlacetable",n))}},UE.commands.setbordervisible={queryCommandState:function(e){return l(this).table?0:-1},execCommand:function(){var e=l(this).table;p.each(f.getElementsByTagName(e,"td"),function(e){e.style.borderWidth="1px",e.style.borderStyle="solid"})}}}(),UE.plugins.table=function(){function v(e,t){n(e,"width",!0),n(e,"height",!0)}function n(e,t,n){e.style[t]&&(n&&e.setAttribute(t,parseInt(e.style[t],10)),e.style[t]="")}function y(e){return"TD"==e.tagName||"TH"==e.tagName?e:(t=f.findParentByTagName(e,"td",!0)||f.findParentByTagName(e,"th",!0))?t:null;var t}function C(e){var t=new RegExp(f.fillChar,"g");if(0<e[r.ie?"innerText":"textContent"].replace(/^\s*$/,"").replace(t,"").length)return 0;for(var n in w.$isNotEmpty)if(e.getElementsByTagName(n).length)return 0;return 1}function x(e){return e.pageX||e.pageY?{x:e.pageX,y:e.pageY}:{x:e.clientX+R.document.body.scrollLeft-R.document.body.clientLeft,y:e.clientY+R.document.body.scrollTop-R.document.body.clientTop}}function t(e){if(!B())try{var t,n=y(e.target||e.srcElement);if(A&&(R.body.style.webkitUserSelect="none",10<Math.abs(D.x-e.clientX)||10<Math.abs(D.y-e.clientY))&&(k(),A=!1,L=0,_(e)),F&&j){if(L=0,R.body.style.webkitUserSelect="none",R.selection.getNative()[r.ie9below?"empty":"removeAllRanges"](),t=x(e),T(R,!0,F,t,n),"h"==F){var i,o=z.style,a=O(n=j);if(a){var s=a.getSameEndPosCells(n,"x")[0],l=a.getSameStartPosXCells(n)[0],d=x(e).x,c=(s?f.getXY(s).x:f.getXY(a.table).x)+20,u=(u=l?f.getXY(l).x+l.offsetWidth-20:R.body.offsetWidth+5||parseInt(f.getComputedStyle(R.body,"width"),10))-5;i=d<(c=c+5)?c:u<d?u:d}else i=void 0;o.left=i+"px"}else if("v"==F){var m,h=z.style;e:{try{var p=f.getXY(j).y,g=x(e).y;m=g<p?p:g;break e}catch(e){}m=void 0}h.top=m+"px"}}else if(n){if(!0!==R.fireEvent("excludetable",n)){var b=S(n,t=x(e)),v=f.findParentByTagName(n,"table",!0);E(v,n,e,!0)?!0!==R.fireEvent("excludetable",v)&&(R.body.style.cursor="url("+R.options.cursorpath+"h.png),pointer"):E(v,n,e)?!0!==R.fireEvent("excludetable",v)&&(R.body.style.cursor="url("+R.options.cursorpath+"v.png),pointer"):(R.body.style.cursor="text",/\d/.test(b)&&(b=b.replace(/\d/,""),n=O(n).getPreviewCell(n,"v"==b)),T(R,!!n&&!!b,n?b:"",t,n))}}else N(!1,v,R)}catch(e){}}function N(e,t,n){e?function(r,a){var s,e=f.getXY(r),t=r.ownerDocument;if(q&&q.parentNode)return;(q=t.createElement("div")).contentEditable=!1,q.innerHTML="",q.style.cssText="width:15px;height:15px;background-image:url("+a.options.UEDITOR_HOME_URL+"dialogs/table/dragicon.png);position: absolute;cursor:move;top:"+(e.y-15)+"px;left:"+e.x+"px;",f.unSelectable(q),q.onmouseover=function(e){V=!0},q.onmouseout=function(e){V=!1},f.on(q,"click",function(e,t){var n;n=this,clearTimeout(s),s=setTimeout(function(){a.fireEvent("tableClicked",r,n)},300)}),f.on(q,"dblclick",function(e,t){clearTimeout(s);var n=O(r),i=r.rows[0].cells[0],o=n.getLastCell(),o=n.getCellsRange(i,o);a.selection.getRange().setStart(i,0).setCursor(!1,!0),n.setSelected(o)}),f.on(q,"dragstart",function(e,t){f.preventDefault(t)}),t.body.appendChild(q)}(t,n):V||setTimeout(function(){!V&&q&&q.parentNode&&q.parentNode.removeChild(q)},2e3)}function E(e,t,n,i){return t=S(t,n=x(n)),i?(i=(i=e.getElementsByTagName("caption")[0])?i.offsetHeight:0,"v1"==t&&n.y-f.getXY(e).y-i<8):"h1"==t&&n.x-f.getXY(e).x<8}function T(e,t,n,i,o){try{e.body.style.cursor="h"==n?"col-resize":"v"==n?"row-resize":"text",r.ie&&(!n||W||U.getUETableBySelected(e)?m(e):(u(e,e.document),h(n,o))),$=t}catch(e){}}function S(e,t){var n=f.getXY(e);return n?n.x+e.offsetWidth-t.x<5?"h":t.x-n.x<5?"h1":n.y+e.offsetHeight-t.y<5?"v":t.y-n.y<5?"v1":"":""}function i(e,t){if(!B())if(D={x:t.clientX,y:t.clientY},2==t.button){var n=U.getUETableBySelected(R),i=!1;if(n){var o=g(R,t);p.each(n.selectedTds,function(e){e===o&&(i=!0)}),i?(o=n.selectedTds[0],setTimeout(function(){R.selection.getRange().setStart(o,0).setCursor(!1,!0)},0)):(P(f.getElementsByTagName(R.body,"th td")),n.clearSelected())}}else!function(e){if(P(f.getElementsByTagName(R.body,"td th")),p.each(R.document.getElementsByTagName("table"),function(e){e.ueTable=null}),H=g(R,e)){var t=f.findParentByTagName(H,"table",!0);(ut=O(t))&&ut.clearSelected(),$?(n=e,r.ie&&(n=function(e){var t="pageX pageY clientX clientY srcElement target".split(" "),n={};if(e)for(var i,o,r=0;i=t[r];r++)(o=e[i])&&(n[i]=o);return n}(n)),k(),A=!0,b=setTimeout(function(){_(n)},360)):(R.document.body.style.webkitUserSelect="",W=!0,R.addListener("mouseover",s))}var n}(t)}function k(){b&&clearTimeout(b),b=null}function _(e){A=!1,(H=e.target||e.srcElement)&&(e=S(H,x(e)),/\d/.test(e)&&(e=e.replace(/\d/,""),H=O(H).getPreviewCell(H,"v"==e)),m(R),u(R,R.document),R.fireEvent("saveScene"),h(e,H),W=!0,F=e,j=H)}function a(e,t){if(!B()){if(k(),A=!1,$&&(L=++L%3,D={x:t.clientX,y:t.clientY},setTimeout(function(){0<L&&L--},360),2===L))return L=0,void function(e){L=0;var t,n=y((e=e||R.window.event).target||e.srcElement);if(n&&(t=S(n,x(e)))&&(m(R),"h1"==t&&(t="h",E(f.findParentByTagName(n,"table"),n,e)?R.execCommand("adaptbywindow"):(n=O(n).getPreviewCell(n))&&R.selection.getRange().selectNodeContents(n).setCursor(!0,!0)),"h"==t)){e=O(n);var o=function(e,t){for(var n=[],i=null,o=0,r=e.length;o<r;o++)(i=e[o][t])&&n.push(i);return n}(o=l(n,e.table,!0),"left");e.width=e.offsetWidth;var r=[],a=[];p.each(o,function(e){r.push(e.offsetWidth)}),p.each(o,function(e){e.removeAttribute("width")}),window.setTimeout(function(){var i=!0;p.each(o,function(e,t){var n=e.offsetWidth;if(n>r[t])return i=!1;a.push(n)});var n=i?a:r;p.each(o,function(e,t){e.width=n[t]-c()})},0)}}(t);if(2!=t.button){var n=this.selection.getRange(),i=f.findParentByTagName(n.startContainer,"table",!0),o=f.findParentByTagName(n.endContainer,"table",!0);if((i||o)&&(i===o?(i=f.findParentByTagName(n.startContainer,["td","th","caption"],!0))!==(o=f.findParentByTagName(n.endContainer,["td","th","caption"],!0))&&this.selection.clearRange():this.selection.clearRange()),W=!1,this.document.body.style.webkitUserSelect="",F&&j&&(this.selection.getNative()[r.ie9below?"empty":"removeAllRanges"](),L=0,z=this.document.getElementById("ue_tableDragLine"))){switch(n=f.getXY(j),i=f.getXY(z),F){case"h":!function(e,t){if(n=O(e)){var n=n.table,i=l(e,n);n.style.width="",n.removeAttribute("width"),t=function(t,e,n){if((t-=c())<0)return 0;var i=(t-=d(e))<0?"left":"right";return t=Math.abs(t),p.each(n,function(e){(e=e[i])&&(t=Math.min(t,d(e)-5))}),t=t<0?0:t,"left"===i?-t:t}(t,e,i),e.nextSibling?p.each(i,function(e){e.left.width=+e.left.width+t,e.right&&(e.right.width=+e.right.width-t)}):p.each(i,function(e){e.left.width-=-t})}}(j,i.x-n.x);break;case"v":!function(e,t){if(!(Math.abs(t)<10)){var n=O(e);if(n)for(var i,n=n.getSameEndPosCells(e,"y"),o=n[0]?n[0].offsetHeight:0,r=0;i=n[r++];){var a=t,s=o,l=parseInt(f.getComputedStyle(i,"line-height"),10),a=s+a,a=a<l?l:a;i.style.height&&(i.style.height=""),1==i.rowSpan?i.setAttribute("height",a):i.removeAttribute&&i.removeAttribute("height")}}}(j,i.y-n.y-j.offsetHeight)}return F="",j=null,m(this),void this.fireEvent("saveScene")}if(H)(i=(n=O(H))?n.selectedTds[0]:null)?(n=new M.Range(this.document),f.isEmptyBlock(i)?n.setStart(i,0).setCursor(!1,!0):n.selectNodeContents(i).shrinkBoundary().setCursor(!1,!0)):(n=this.selection.getRange().shrinkBoundary()).collapsed||(i=f.findParentByTagName(n.startContainer,["td","th"],!0),o=f.findParentByTagName(n.endContainer,["td","th"],!0),(i&&!o||!i&&o||i&&o&&i!==o)&&n.setCursor(!1,!0)),H=null,this.removeListener("mouseover",s);else if((i=f.findParentByTagName(t.target||t.srcElement,"td",!0))||(i=f.findParentByTagName(t.target||t.srcElement,"th",!0)),i&&("TD"==i.tagName||"TH"==i.tagName)){if(!0===this.fireEvent("excludetable",i))return;(n=new M.Range(this.document)).setStart(i,0).setCursor(!1,!0)}this._selectionChange(250,t)}}}function s(e,t){if(!B()){var n=t.target||t.srcElement;if(o=f.findParentByTagName(n,"td",!0)||f.findParentByTagName(n,"th",!0),H&&o&&("TD"==H.tagName&&"TD"==o.tagName||"TH"==H.tagName&&"TH"==o.tagName)&&f.findParentByTagName(H,"table")==f.findParentByTagName(o,"table"))if(n=O(o),H!=o){this.document.body.style.webkitUserSelect="none",this.selection.getNative()[r.ie9below?"empty":"removeAllRanges"]();var i=n.getCellsRange(H,o);n.setSelected(i)}else this.document.body.style.webkitUserSelect="",n.clearSelected();t.preventDefault?t.preventDefault():t.returnValue=!1}}function B(){return"false"===R.body.contentEditable}function l(e,t,n){if(t||(t=f.findParentByTagName(e,"table")),!t)return null;f.getNodeIndex(e),t=t.rows;for(var i=0;e;)1===e.nodeType&&(i+=e.colSpan||1),e=e.previousSibling;e=null;var o=[];return p.each(t,function(e){var t=0;p.each(e.cells,function(e){return(t+=e.colSpan||1)===i?(o.push({left:e,right:e.nextSibling||null}),!1):i<t?(n&&o.push({left:e}),!1):void 0})}),o}function d(e){var t=0;t=e.offsetWidth-c();if(!e.nextSibling){if(tab=f.findParentByTagName(e,"table",!1),void 0===tab.offsetVal){var n=e.previousSibling;tab.offsetVal=n&&e.offsetWidth-n.offsetWidth===U.borderWidth?U.borderWidth:0}t-=tab.offsetVal}t=t<0?0:t;try{e.width=t}catch(e){}return t}function c(){if(void 0===U.tabcellSpace){var e=R.document.createElement("table"),t=R.document.createElement("tbody"),n=R.document.createElement("tr"),i=R.document.createElement("td"),o=null;i.style.cssText="border: 0;",i.width=1,n.appendChild(i),n.appendChild(o=i.cloneNode(!1)),t.appendChild(n),e.appendChild(t),e.style.cssText="visibility: hidden;",R.body.appendChild(e),U.paddingSpace=i.offsetWidth-1,t=e.offsetWidth,i.style.cssText="",o.style.cssText="",U.borderWidth=(e.offsetWidth-t)/3,U.tabcellSpace=U.paddingSpace+U.borderWidth,R.body.removeChild(e)}return c=function(){return U.tabcellSpace},U.tabcellSpace}function u(e,t){W||(z=e.document.createElement("div"),f.setAttributes(z,{id:"ue_tableDragLine",unselectable:"on",contenteditable:!1,onresizestart:"return false",ondragstart:"return false",onselectstart:"return false",style:"background-color:blue;position:absolute;padding:0;margin:0;background-image:none;border:0px none;opacity:0;filter:alpha(opacity=0)"}),e.body.appendChild(z))}function m(e){if(!W)for(var t;t=e.document.getElementById("ue_tableDragLine");)f.remove(t)}function h(e,t){if(t){var n=(r=f.findParentByTagName(t,"table")).getElementsByTagName("caption"),i=r.offsetWidth,o=r.offsetHeight-(0<n.length?n[0].offsetHeight:0),r=f.getXY(r),a=f.getXY(t);switch(e){case"h":n="height:"+o+"px;top:"+(r.y+(0<n.length?n[0].offsetHeight:0))+"px;left:"+(a.x+t.offsetWidth),z.style.cssText=n+"px;position: absolute;display:block;background-color:blue;width:1px;border:0; color:blue;opacity:.3;filter:alpha(opacity=30)";break;case"v":n="width:"+i+"px;left:"+r.x+"px;top:"+(a.y+t.offsetHeight),z.style.cssText=n+"px;overflow:hidden;position: absolute;display:block;background-color:blue;height:1px;border:0;color:blue;opacity:.2;filter:alpha(opacity=20)"}}}function I(e,t){for(var n,i,o=f.getElementsByTagName(e.body,"table"),r=0;i=o[r++];)(n=f.getElementsByTagName(i,"td"))[0]&&(t?(n=n[0].style.borderColor.replace(/\s/g,""),/(#ffffff)|(rgb\(255,255,255\))/gi.test(n)&&f.addClass(i,"noBorderTable")):f.removeClasses(i,"noBorderTable"))}function g(e,t){var n=f.findParentByTagName(t.target||t.srcElement,["td","th"],!0),i=null;if(!n)return null;if(i=S(n,x(t)),!n)return null;if("h1"===i&&n.previousSibling){i=f.getXY(n);var o=n.offsetWidth;Math.abs(i.x+o-t.clientX)>o/3&&(n=n.previousSibling)}else"v1"===i&&n.parentNode.previousSibling&&(i=f.getXY(n),o=n.offsetHeight,Math.abs(i.y+o-t.clientY)>o/3&&(n=n.parentNode.previousSibling.firstChild));return n&&!0!==e.fireEvent("excludetable",n)?n:null}var R=this,b=null,A=!1,L=0,D=null,U=UE.UETable,O=function(e){return U.getUETable(e)},P=function(e){return U.removeSelectedClass(e)};R.ready(function(){var n=this,i=n.selection.getText;n.selection.getText=function(){var e=U.getUETableBySelected(n);if(e){var t="";return p.each(e.selectedTds,function(e){t+=e[r.ie?"innerText":"textContent"]}),t}return i.call(n.selection)}});var H=null,o=null,F="",$=!1,q=null,V=!1,z=null,j=null,W=!1;R.setOpt({maxColNum:20,maxRowNum:100,defaultCols:5,defaultRows:5,tdvalign:"top",cursorpath:R.options.UEDITOR_HOME_URL+"themes/default/images/cursor_",tableDragable:!1,classList:["ue-table-interlace-color-single","ue-table-interlace-color-double"]}),R.getUETable=O;var X={deletetable:1,inserttable:1,cellvalign:1,insertcaption:1,deletecaption:1,inserttitle:1,deletetitle:1,mergeright:1,mergedown:1,mergecells:1,insertrow:1,insertrownext:1,deleterow:1,insertcol:1,insertcolnext:1,deletecol:1,splittocells:1,splittorows:1,splittocols:1,adaptbytext:1,adaptbywindow:1,adaptbycustomer:1,insertparagraph:1,insertparagraphbeforetable:1,averagedistributecol:1,averagedistributerow:1};R.ready(function(){var h,g,b,e;p.cssRule("table",".selectTdClass{background-color:#edf5fa !important}table.noBorderTable td,table.noBorderTable th,table.noBorderTable caption{border:1px dashed #ddd !important}table{margin-bottom:10px;border-collapse:collapse;display:table;}td,th{padding: 5px 10px;border: 1px solid #DDD;}caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}th{border-top:1px solid #BBB;background-color:#F7F7F7;}table tr.firstRow th{border-top-width:2px;}.ue-table-interlace-color-single{ background-color: #fcfcfc; } .ue-table-interlace-color-double{ background-color: #f7faff; }td p{margin:0;padding:0;}",R.document),R.addListener("keydown",function(e,t){var n=t.keyCode||t.which;if(8==n){var i=U.getUETableBySelected(this);i&&i.selectedTds.length&&(i.isFullCol()?this.execCommand("deletecol"):i.isFullRow()?this.execCommand("deleterow"):this.fireEvent("delcells"),f.preventDefault(t));var o=f.findParentByTagName(this.selection.getStart(),"caption",!0),r=this.selection.getRange();r.collapsed&&o&&C(o)&&(this.fireEvent("saveScene"),i=o.parentNode,f.remove(o),i&&r.setStart(i.rows[0].cells[0],0).setCursor(!1,!0),this.fireEvent("saveScene"))}if(46==n&&(i=U.getUETableBySelected(this))){for(this.fireEvent("saveScene"),o=0;r=i.selectedTds[o++];)f.fillNode(this.document,r);this.fireEvent("saveScene"),f.preventDefault(t)}if(13==n){if(n=this.selection.getRange(),o=f.findParentByTagName(n.startContainer,"caption",!0))return i=f.findParentByTagName(o,"table"),n.collapsed?o&&n.setStart(i.rows[0].cells[0],0).setCursor(!1,!0):(n.deleteContents(),this.fireEvent("saveScene")),void f.preventDefault(t);n.collapsed&&(i=f.findParentByTagName(n.startContainer,"table"))&&(r=i.rows[0].cells[0],o=f.findParentByTagName(this.selection.getStart(),["td","th"],!0),i=i.previousSibling,r===o&&(!i||1==i.nodeType&&"TABLE"==i.tagName)&&f.isStartInblock(n)&&(n=f.findParent(this.selection.getStart(),function(e){return f.isBlockElm(e)},!0))&&(/t(h|d)/i.test(n.tagName)||n===o.firstChild)&&(this.execCommand("insertparagraphbeforetable"),f.preventDefault(t)))}if((t.ctrlKey||t.metaKey)&&"67"==t.keyCode&&(h=null,i=U.getUETableBySelected(this)))for(n=i.selectedTds,g=i.isFullCol(),b=i.isFullRow(),h=[[i.cloneCell(n[0],null,!0)]],o=1;r=n[o];o++)r.parentNode!==n[o-1].parentNode?h.push([i.cloneCell(r,null,!0)]):h[h.length-1].push(i.cloneCell(r,null,!0))}),R.addListener("tablehasdeleted",function(){T(this,!1,""),q&&f.remove(q)}),R.addListener("beforepaste",function(e,t){var n=this,i=n.selection.getRange();if(f.findParentByTagName(i.startContainer,"caption",!0))(i=n.document.createElement("div")).innerHTML=t.html,t.html=i[r.ie9below?"innerText":"textContent"];else{var o=U.getUETableBySelected(n);if(h){n.fireEvent("saveScene");i=n.selection.getRange();var a,s,l=f.findParentByTagName(i.startContainer,["td","th"],!0);if(l){if(o=O(l),b){var d=o.getCellInfo(l).rowIndex;"TH"==l.tagName&&d++;var c;for(i=0;c=h[i++];){s=o.insertRow(d++,"td");for(var u,m=0;u=c[m];m++)(l=s.cells[m])||(l=s.insertCell(m)),l.innerHTML=u.innerHTML,u.getAttribute("width")&&l.setAttribute("width",u.getAttribute("width")),u.getAttribute("vAlign")&&l.setAttribute("vAlign",u.getAttribute("vAlign")),u.getAttribute("align")&&l.setAttribute("align",u.getAttribute("align")),u.style.cssText&&(l.style.cssText=u.style.cssText);for(m=0;(u=s.cells[m])&&c[m];m++)u.innerHTML=c[m].innerHTML,c[m].getAttribute("width")&&u.setAttribute("width",c[m].getAttribute("width")),c[m].getAttribute("vAlign")&&u.setAttribute("vAlign",c[m].getAttribute("vAlign")),c[m].getAttribute("align")&&u.setAttribute("align",c[m].getAttribute("align")),c[m].style.cssText&&(u.style.cssText=c[m].style.cssText)}}else{if(g){for(d=o.getCellInfo(l),m=l=0,c=h[0];u=c[m++];)l+=u.colSpan||1;for(n.__hasEnterExecCommand=!0,i=0;i<l;i++)n.execCommand("insertcol");n.__hasEnterExecCommand=!1,"TH"==(l=o.table.rows[0].cells[d.cellIndex]).tagName&&(l=o.table.rows[1].cells[d.cellIndex])}for(i=0;c=h[i++];){for(a=l,m=0;u=c[m++];)l?(l.innerHTML=u.innerHTML,u.getAttribute("width")&&l.setAttribute("width",u.getAttribute("width")),u.getAttribute("vAlign")&&l.setAttribute("vAlign",u.getAttribute("vAlign")),u.getAttribute("align")&&l.setAttribute("align",u.getAttribute("align")),u.style.cssText&&(l.style.cssText=u.style.cssText),l=(s=l).nextSibling):(d=u.cloneNode(!0),f.removeAttributes(d,["class","rowSpan","colSpan"]),s.parentNode.appendChild(d));if(l=o.getNextCell(a,!0,!0),!h[i])break;l||(d=o.getCellInfo(a),o.table.insertRow(o.table.rows.length),o.update(),l=o.getVSideCell(a,!0))}}o.update()}else{for(o=n.document.createElement("table"),i=0;c=h[i++];){for(s=o.insertRow(o.rows.length),m=0;u=c[m++];)d=U.cloneCell(u,null,!0),f.removeAttributes(d,["class"]),s.appendChild(d);2==m&&1<d.rowSpan&&(d.rowSpan=1)}i=U.getDefaultValue(n,void 0),i=n.body.offsetWidth-2*parseInt(f.getComputedStyle(n.body,"margin-left"),10)-2*i.tableBorder-(n.options.offsetWidth||0),n.execCommand("insertHTML","<table  "+(g&&b?'width="'+i+'"':"")+">"+o.innerHTML.replace(/>\s*</g,"><").replace(/\bth\b/gi,"td")+"</table>")}return n.fireEvent("contentchange"),n.fireEvent("saveScene"),!(t.html="")}(i=n.document.createElement("div")).innerHTML=t.html,c=i.getElementsByTagName("table"),f.findParentByTagName(n.selection.getStart(),"table")?(p.each(c,function(e){f.remove(e)}),f.findParentByTagName(n.selection.getStart(),"caption",!0)&&(i.innerHTML=i[r.ie?"innerText":"textContent"])):p.each(c,function(e){v(e),f.removeAttributes(e,["style","border"]),p.each(f.getElementsByTagName(e,"td"),function(e){C(e)&&f.fillNode(n.document,e),v(e)})}),t.html=i.innerHTML}}),R.addListener("afterpaste",function(){p.each(f.getElementsByTagName(R.body,"table"),function(e){if(e.offsetWidth>R.body.offsetWidth){var t=U.getDefaultValue(R,e);e.style.width=R.body.offsetWidth-2*parseInt(f.getComputedStyle(R.body,"margin-left"),10)-2*t.tableBorder-(R.options.offsetWidth||0)+"px"}})}),R.addListener("blur",function(){h=null}),R.addListener("keydown",function(){clearTimeout(e),e=setTimeout(function(){var e=R.selection.getRange();if(e=f.findParentByTagName(e.startContainer,["th","td"],!0)){var t=e.parentNode.parentNode.parentNode;t.offsetWidth>t.getAttribute("width")&&(e.style.wordBreak="break-all")}},100)}),R.addListener("selectionchange",function(){T(R,!1,"")}),R.addListener("contentchange",function(){var a=this;if(m(a),!U.getUETableBySelected(a)){var e=a.selection.getRange().startContainer;e=f.findParentByTagName(e,["td","th"],!0);p.each(f.getElementsByTagName(a.document,"table"),function(e){!0!==a.fireEvent("excludetable",e)&&(e.ueTable=new U(e),e.onmouseover=function(){a.fireEvent("tablemouseover",e)},e.onmousemove=function(){a.fireEvent("tablemousemove",e),a.options.tableDragable&&N(!0,this,a),p.defer(function(){a.fireEvent("contentchange",50)},!0)},e.onmouseout=function(){a.fireEvent("tablemouseout",e),T(a,!1,""),m(a)},e.onclick=function(e){var t=y((e=a.window.event||e).target||e.srcElement);if(t){var n=O(t),i=n.table,o=n.getCellInfo(t),r=a.selection.getRange();E(i,t,e,!0)?(i=n.getCell(n.indexTable[n.rowsNum-1][o.colIndex].rowIndex,n.indexTable[n.rowsNum-1][o.colIndex].cellIndex),e.shiftKey&&n.selectedTds.length?n.selectedTds[0]!==i?(e=n.getCellsRange(n.selectedTds[0],i),n.setSelected(e)):r&&r.selectNodeContents(i).select():t!==i?(e=n.getCellsRange(t,i),n.setSelected(e)):r&&r.selectNodeContents(i).select()):E(i,t,e)&&(i=n.getCell(n.indexTable[o.rowIndex][n.colsNum-1].rowIndex,n.indexTable[o.rowIndex][n.colsNum-1].cellIndex),e.shiftKey&&n.selectedTds.length?n.selectedTds[0]!==i?(e=n.getCellsRange(n.selectedTds[0],i),n.setSelected(e)):r&&r.selectNodeContents(i).select():t!==i?(e=n.getCellsRange(t,i),n.setSelected(e)):r&&r.selectNodeContents(i).select())}})}),I(a,!0)}}),f.on(R.document,"mousemove",t),f.on(R.document,"mouseout",function(e){"TABLE"==(e.target||e.srcElement).tagName&&T(R,!1,"")}),R.addListener("interlacetable",function(e,t,n){if(t){t=(e=t.rows).length;for(var i=0;i<t;i++){var o=n||this.options.classList;e[i].className=o[i]?o[i]:o[i%o.length]}}}),R.addListener("uninterlacetable",function(e,t){if(t)for(var n=t.rows,i=this.options.classList,o=n.length,r=0;r<o;r++)f.removeClasses(n[r],i)}),R.addListener("mousedown",i),R.addListener("mouseup",a),f.on(R.body,"dragstart",function(e){a.call(R,"dragstart",e)}),R.addOutputRule(function(e){p.each(e.getNodesByTagName("div"),function(e){"ue_tableDragLine"==e.getAttr("id")&&e.parentNode.removeChild(e)})});var o=0;R.addListener("mousedown",function(){o=0}),R.addListener("tabkeydown",function(){var e=this.selection.getRange(),t=e.getCommonAncestor(!0,!0),n=f.findParentByTagName(t,"table");if(n){if(f.findParentByTagName(t,"caption",!0))(t=f.getElementsByTagName(n,"th td"))&&t.length&&e.setStart(t[0],0).setCursor(!1,!0);else{t=f.findParentByTagName(t,["td","th"],!0);var i=O(t);o=1<t.rowSpan?o:i.getCellInfo(t).rowIndex,(t=i.getTabNextCell(t,o))?C(t)?e.setStart(t,0).setCursor(!1,!0):e.selectNodeContents(t).select():(R.fireEvent("saveScene"),R.__hasEnterExecCommand=!0,this.execCommand("insertrownext"),R.__hasEnterExecCommand=!1,(e=this.selection.getRange()).setStart(n.rows[n.rows.length-1].cells[0],0).setCursor(),R.fireEvent("saveScene"))}return!0}}),r.ie&&R.addListener("selectionchange",function(){T(this,!1,"")}),R.addListener("keydown",function(e,t){var n=t.keyCode||t.which;if(8!=n&&46!=n){(n=!(t.ctrlKey||t.metaKey||t.shiftKey||t.altKey))&&P(f.getElementsByTagName(this.body,"td"));var i=U.getUETableBySelected(this);i&&n&&i.clearSelected()}}),R.addListener("beforegetcontent",function(){I(this,!1),r.ie&&p.each(this.document.getElementsByTagName("caption"),function(e){f.isEmptyNode(e)&&(e.innerHTML="&nbsp;")})}),R.addListener("aftergetcontent",function(){I(this,!0)}),R.addListener("getAllHtml",function(){P(R.document.getElementsByTagName("td"))}),R.addListener("fullscreenchanged",function(e,t){if(!t){var d=this.body.offsetWidth/document.body.offsetWidth,n=f.getElementsByTagName(this.body,"table");p.each(n,function(e){if(e.offsetWidth<R.body.offsetWidth)return!1;var t,n,i,o,r=f.getElementsByTagName(e,"td"),a=[];p.each(r,function(e){a.push(e.offsetWidth)});for(var s,l=0;s=r[l];l++)s.setAttribute("width",Math.floor(a[l]*d));e.setAttribute("width",Math.floor((t=R,n=!0,i=U.getDefaultValue(R,void 0),(o=t.body).offsetWidth-(n?2*parseInt(f.getComputedStyle(o,"margin-left"),10):0)-2*i.tableBorder-(t.options.offsetWidth||0))))})}});var u=R.execCommand;R.execCommand=function(e,t){e=e.toLowerCase();var n,i=U.getUETableBySelected(this),o=new M.Range(this.document),r=this.commands[e]||UE.commands[e];if(r){if(!i||X[e]||r.notNeedUndo||this.__hasEnterExecCommand)n=u.apply(this,arguments);else{this.__hasEnterExecCommand=!0,this.fireEvent("beforeexeccommand",e);i=i.selectedTds;for(var a,s,l,d=r=-2,c=0;l=i[c];c++)C(l)?o.setStart(l,0).setCursor(!1,!0):o.selectNode(l).select(!0),s=this.queryCommandState(e),a=this.queryCommandValue(e),-1!=s&&(r===s&&d===a||(this._ignoreContentChange=!0,n=u.apply(this,arguments),this._ignoreContentChange=!1),r=this.queryCommandState(e),d=this.queryCommandValue(e),f.isEmptyBlock(l)&&f.fillNode(this.document,l));o.setStart(i[0],0).shrinkBoundary(!0).setCursor(!1,!0),this.fireEvent("contentchange"),this.fireEvent("afterexeccommand",e),this.__hasEnterExecCommand=!1,this._selectionChange()}return n}}})},UE.UETable.prototype.sortTable=function(n,i){var e=this.table,t=e.rows,o=[],a="TH"===t[0].cells[0].tagName,s=0;if(this.selectedTds.length){for(var l=this.cellsRange,d=l.endRowIndex+1,c=l.beginRowIndex;c<d;c++)o[c]=t[c];o.splice(0,l.beginRowIndex),s=l.endRowIndex+1===this.rowsNum?0:l.endRowIndex+1}else for(c=0,d=t.length;c<d;c++)o[c]=t[c];var u={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){return(e.innerText||e.textContent).localeCompare(t.innerText||t.textContent)},reversebyasc:function(e,t){return t.innerHTML.localeCompare(e.innerHTML)},orderbynum:function(e,t){var n=e[r.ie?"innerText":"textContent"].match(/\d+/),i=t[r.ie?"innerText":"textContent"].match(/\d+/);return n&&(n=+n[0]),i&&(i=+i[0]),(n||0)-(i||0)},reversebynum:function(e,t){var n=e[r.ie?"innerText":"textContent"].match(/\d+/),i=t[r.ie?"innerText":"textContent"].match(/\d+/);return n&&(n=+n[0]),i&&(i=+i[0]),(i||0)-(n||0)}};for(e.setAttribute("data-sort-type",i&&"string"==typeof i&&u[i]?i:""),a&&o.splice(0,1),o=p.sort(o,function(e,t){return i&&"function"==typeof i?i.call(this,e.cells[n],t.cells[n]):i&&"number"==typeof i?1:i&&"string"==typeof i&&u[i]?u[i].call(this,e.cells[n],t.cells[n]):u.orderbyasc.call(this,e.cells[n],t.cells[n])}),a=e.ownerDocument.createDocumentFragment(),c=0,d=o.length;c<d;c++)a.appendChild(o[c]);e=e.getElementsByTagName("tbody")[0],s?e.insertBefore(a,t[s-l.endRowIndex+l.beginRowIndex-1]):e.appendChild(a)},UE.plugins.tablesort=function(){var e=this,a=UE.UETable;e.ready(function(){p.cssRule("tablesort","table.sortEnabled tr.firstRow th,table.sortEnabled tr.firstRow td{padding-right:20px;background-repeat: no-repeat;background-position: center right;   background-image:url("+e.options.themePath+e.options.theme+"/images/sortable.png);}",e.document),e.addListener("afterexeccommand",function(e,t){"mergeright"!=t&&"mergedown"!=t&&"mergecells"!=t||this.execCommand("disablesort")})}),UE.commands.sorttable={queryCommandState:function(){if(!(t=a.getTableItemsByRange(this)).cell)return-1;for(var e,t=t.table.getElementsByTagName("td"),n=0;e=t[n++];)if(1!=e.rowSpan||1!=e.colSpan)return-1;return 0},execCommand:function(e,t){var n,i=this.selection.getRange(),o=i.createBookmark(!0),r=(n=a.getTableItemsByRange(this)).cell;r=(n=a.getUETable(n.table)).getCellInfo(r);n.sortTable(r.cellIndex,t),i.moveToBookmark(o);try{i.select()}catch(e){}}},UE.commands.enablesort=UE.commands.disablesort={queryCommandState:function(e){var t=a.getTableItemsByRange(this).table;if(t&&"enablesort"==e)for(var n=f.getElementsByTagName(t,"th td"),i=0;i<n.length;i++)if(1<n[i].getAttribute("colspan")||1<n[i].getAttribute("rowspan"))return-1;return t?"enablesort"==e^"sortEnabled"!=t.getAttribute("data-sort")?-1:0:-1},execCommand:function(e){var t=a.getTableItemsByRange(this).table;t.setAttribute("data-sort","enablesort"==e?"sortEnabled":"sortDisabled"),"enablesort"==e?f.addClass(t,"sortEnabled"):f.removeClasses(t,"sortEnabled")}}},UE.plugins.contextmenu=function(){var d=this;if(d.setOpt("enableContextMenu",!0),!1!==d.getOpt("enableContextMenu")){var c,u=d.getLang("contextMenu"),m=d.options.contextMenu||[{label:u.selectall,cmdName:"selectall"},{label:u.cleardoc,cmdName:"cleardoc",exec:function(){confirm(u.confirmclear)&&this.execCommand("cleardoc")}},"-",{label:u.unlink,cmdName:"unlink"},"-",{group:u.paragraph,icon:"justifyjustify",subMenu:[{label:u.justifyleft,cmdName:"justify",value:"left"},{label:u.justifyright,cmdName:"justify",value:"right"},{label:u.justifycenter,cmdName:"justify",value:"center"},{label:u.justifyjustify,cmdName:"justify",value:"justify"}]},"-",{group:u.table,icon:"table",subMenu:[{label:u.inserttable,cmdName:"inserttable"},{label:u.deletetable,cmdName:"deletetable"},"-",{label:u.deleterow,cmdName:"deleterow"},{label:u.deletecol,cmdName:"deletecol"},{label:u.insertcol,cmdName:"insertcol"},{label:u.insertcolnext,cmdName:"insertcolnext"},{label:u.insertrow,cmdName:"insertrow"},{label:u.insertrownext,cmdName:"insertrownext"},"-",{label:u.insertcaption,cmdName:"insertcaption"},{label:u.deletecaption,cmdName:"deletecaption"},{label:u.inserttitle,cmdName:"inserttitle"},{label:u.deletetitle,cmdName:"deletetitle"},{label:u.inserttitlecol,cmdName:"inserttitlecol"},{label:u.deletetitlecol,cmdName:"deletetitlecol"},"-",{label:u.mergecells,cmdName:"mergecells"},{label:u.mergeright,cmdName:"mergeright"},{label:u.mergedown,cmdName:"mergedown"},"-",{label:u.splittorows,cmdName:"splittorows"},{label:u.splittocols,cmdName:"splittocols"},{label:u.splittocells,cmdName:"splittocells"},"-",{label:u.averageDiseRow,cmdName:"averagedistributerow"},{label:u.averageDisCol,cmdName:"averagedistributecol"},"-",{label:u.edittd,cmdName:"edittd",exec:function(){UE.ui.edittd&&new UE.ui.edittd(this),this.getDialog("edittd").open()}},{label:u.edittable,cmdName:"edittable",exec:function(){UE.ui.edittable&&new UE.ui.edittable(this),this.getDialog("edittable").open()}},{label:u.setbordervisible,cmdName:"setbordervisible"}]},{group:u.tablesort,icon:"tablesort",subMenu:[{label:u.enablesort,cmdName:"enablesort"},{label:u.disablesort,cmdName:"disablesort"},"-",{label:u.reversecurrent,cmdName:"sorttable",value:"reversecurrent"},{label:u.orderbyasc,cmdName:"sorttable",value:"orderbyasc"},{label:u.reversebyasc,cmdName:"sorttable",value:"reversebyasc"},{label:u.orderbynum,cmdName:"sorttable",value:"orderbynum"},{label:u.reversebynum,cmdName:"sorttable",value:"reversebynum"}]},{group:u.borderbk,icon:"borderBack",subMenu:[{label:u.setcolor,cmdName:"interlacetable",exec:function(){this.execCommand("interlacetable")}},{label:u.unsetcolor,cmdName:"uninterlacetable",exec:function(){this.execCommand("uninterlacetable")}},{label:u.setbackground,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#bbb","#ccc"]})}},{label:u.unsetbackground,cmdName:"cleartablebackground",exec:function(){this.execCommand("cleartablebackground")}},{label:u.redandblue,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["red","blue"]})}},{label:u.threecolorgradient,cmdName:"settablebackground",exec:function(){this.execCommand("settablebackground",{repeat:!0,colorList:["#aaa","#bbb","#ccc"]})}}]},{group:u.aligntd,icon:"aligntd",subMenu:[{cmdName:"cellalignment",value:{align:"left",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"top"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"middle"}},{cmdName:"cellalignment",value:{align:"left",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"center",vAlign:"bottom"}},{cmdName:"cellalignment",value:{align:"right",vAlign:"bottom"}}]},{group:u.aligntable,icon:"aligntable",subMenu:[{cmdName:"tablealignment",className:"left",label:u.tableleft,value:"left"},{cmdName:"tablealignment",className:"center",label:u.tablecenter,value:"center"},{cmdName:"tablealignment",className:"right",label:u.tableright,value:"right"}]},"-",{label:u.insertparagraphbefore,cmdName:"insertparagraph",value:!0},{label:u.insertparagraphafter,cmdName:"insertparagraph"},{label:u.copy,cmdName:"copy"},{label:u.paste,cmdName:"paste"}];if(m.length){var h=UE.ui.uiUtils;d.addListener("contextmenu",function(e,t){var n=h.getViewportOffsetByEvent(t);d.fireEvent("beforeselectionchange"),c&&c.destroy();for(var i,o=0,a=[];i=m[o];o++){var s;!function(e){if("-"==e)(s=a[a.length-1])&&"-"!==s&&a.push("-");else if(e.hasOwnProperty("group")){for(var t,n=0,i=[];t=e.subMenu[n];n++)!function(e){"-"==e?(s=i[i.length-1])&&"-"!==s?i.push("-"):i.splice(i.length-1):(d.commands[e.cmdName]||UE.commands[e.cmdName]||e.query)&&-1<(e.query?e.query():d.queryCommandState(e.cmdName))&&i.push({label:e.label||d.getLang("contextMenu."+e.cmdName+(e.value||""))||"",className:"edui-for-"+e.cmdName+(e.className?" edui-for-"+e.cmdName+"-"+e.className:""),onclick:e.exec?function(){e.exec.call(d)}:function(){d.execCommand(e.cmdName,e.value)}})}(t);i.length&&a.push({label:function(){switch(e.icon){case"table":return d.getLang("contextMenu.table");case"justifyjustify":return d.getLang("contextMenu.paragraph");case"aligntd":return d.getLang("contextMenu.aligntd");case"aligntable":return d.getLang("contextMenu.aligntable");case"tablesort":return u.tablesort;case"borderBack":return u.borderbk;default:return""}}(),className:"edui-for-"+e.icon,subMenu:{items:i,editor:d}})}else(d.commands[e.cmdName]||UE.commands[e.cmdName]||e.query)&&-1<(e.query?e.query.call(d):d.queryCommandState(e.cmdName))&&a.push({label:e.label||d.getLang("contextMenu."+e.cmdName),className:"edui-for-"+(e.icon?e.icon:e.cmdName+(e.value||"")),onclick:e.exec?function(){e.exec.call(d)}:function(){d.execCommand(e.cmdName,e.value)}})}(i)}if("-"==a[a.length-1]&&a.pop(),(c=new UE.ui.Menu({items:a,className:"edui-contextmenu",editor:d})).render(),c.showAt(n),d.fireEvent("aftershowcontextmenu",c),f.preventDefault(t),r.ie){var l;try{l=d.selection.getNative().createRange()}catch(e){return}l.item&&new M.Range(d.document).selectNode(l.item(0)).select(!0,!0)}}),d.addListener("aftershowcontextmenu",function(e,t){if(d.zeroclipboard){var n,i=t.items;for(n in i)"edui-for-copy"==i[n].className&&d.zeroclipboard.clip(i[n].getDom())}})}}},UE.plugins.shortcutmenu=function(){var s,l=this.options.shortcutMenu||[];l.length&&(this.addListener("contextmenu mouseup",function(e,n){var i=this,o={type:e,target:n.target||n.srcElement,screenX:n.screenX,screenY:n.screenY,clientX:n.clientX,clientY:n.clientY};if(setTimeout(function(){!1!==i.selection.getRange().collapsed&&"contextmenu"!=e||(s||((s=new t.editor.ui.ShortCutMenu({editor:i,items:l,theme:i.options.theme,className:"edui-shortcutmenu"})).render(),i.fireEvent("afterrendershortcutmenu",s)),s.show(o,!!UE.plugins.contextmenu))}),"contextmenu"==e&&(f.preventDefault(n),r.ie9below)){var a;try{a=i.selection.getNative().createRange()}catch(e){return}a.item&&new M.Range(i.document).selectNode(a.item(0)).select(!0,!0)}}),this.addListener("keydown",function(e){"keydown"==e&&s&&!s.isHidden&&s.hide()}))},UE.plugins.basestyle=function(){var e={bold:["strong","b"],italic:["em","i"],subscript:["sub"],superscript:["sup"]},o=function(e,t){return f.filterNodeList(e.selection.getStartElementPath(),t)},r=this;for(var t in r.addshortcutkey({Bold:"ctrl+66",Italic:"ctrl+73",Underline:"ctrl+85"}),r.addInputRule(function(e){p.each(e.getNodesByTagName("b i"),function(e){switch(e.tagName){case"b":e.tagName="strong";break;case"i":e.tagName="em"}})}),e)!function(e,i){r.commands[e]={execCommand:function(e){var t=r.selection.getRange(),n=o(this,i);t.collapsed?(n?(e=r.document.createTextNode(""),t.insertNode(e).removeInlineStyle(i),t.setStartBefore(e),f.remove(e)):(n=t.document.createElement(i[0]),"superscript"!=e&&"subscript"!=e||(e=r.document.createTextNode(""),t.insertNode(e).removeInlineStyle(["sub","sup"]).setStartBefore(e).collapse(!0)),t.insertNode(n).setStart(n,0)),t.collapse(!0)):("superscript"!=e&&"subscript"!=e||n&&n.tagName.toLowerCase()==e||t.removeInlineStyle(["sub","sup"]),n?t.removeInlineStyle(i):t.applyInlineStyle(i[0])),t.select()},queryCommandState:function(){return o(this,i)?1:0}}}(t,e[t])},UE.plugins.elementpath=function(){var r,a,o=this;o.setOpt("elementPathEnabled",!0),o.options.elementPathEnabled&&(o.commands.elementpath={execCommand:function(e,t){var n=a[t],i=o.selection.getRange();r=1*t,i.selectNode(n).select()},queryCommandValue:function(){var e=[].concat(this.selection.getStartElementPath()).reverse(),t=[];a=e;for(var n,i=0;n=e[i];i++)if(3!=n.nodeType){var o=n.tagName.toLowerCase();if("img"==o&&n.getAttribute("anchorname")&&(o="anchor"),t[i]=o,r==i){r=-1;break}}return t}})},UE.plugins.formatmatch=function(){function a(e,t){if(r.webkit)var n="IMG"==t.target.tagName?t.target:null;l.undoManger&&l.undoManger.save();var i=l.selection.getRange();n=n||i.getClosedNode();if(s&&n&&"IMG"==n.tagName)n.style.cssText+=";float:"+(s.style.cssFloat||s.style.styleFloat||"none")+";display:"+(s.style.display||"inline"),s=null;else if(!s){if(i.collapsed){var o=l.document.createTextNode("match");i.insertNode(o).select()}l.__hasEnterExecCommand=!0,i=l.options.removeFormatAttributes,l.options.removeFormatAttributes="",l.execCommand("removeformat"),l.options.removeFormatAttributes=i,l.__hasEnterExecCommand=!1,i=l.selection.getRange(),d.length&&(n=i,o&&n.selectNode(o),n.applyInlineStyle(d[d.length-1].tagName,null,d)),o&&i.setStartBefore(o).collapse(!0),i.select(),o&&f.remove(o)}l.undoManger&&l.undoManger.save(),l.removeListener("mouseup",a),c=0}var s,l=this,d=[],c=0;l.addListener("reset",function(){d=[],c=0}),l.commands.formatmatch={execCommand:function(e){if(c)c=0,d=[],l.removeListener("mouseup",a);else{if(e=l.selection.getRange(),!(s=e.getClosedNode())||"IMG"!=s.tagName){e.collapse(!0).shrinkBoundary(),d=f.findParents(e.startContainer,!0,function(e){return!f.isBlockElm(e)&&1==e.nodeType}),e=0;for(var t;t=d[e];e++)if("A"==t.tagName){d.splice(e,1);break}}l.addListener("mouseup",a),c=1}},queryCommandState:function(){return c},notNeedUndo:1}},UE.plugin.register("searchreplace",function(){function h(e,t,n){var i=0;e=e.firstChild;for(var o=0;e;){if(3==e.nodeType){if(t<=(i+=o=e.nodeValue.replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length))return{node:e,index:o-(i-t)}}else if(!w.$empty[e.tagName]&&(t<=(i+=o=e[r.ie?"innerText":"textContent"].replace(/(^[\t\r\n]+)|([\t\r\n]+$)/,"").length)&&(o=h(e,o-(i-t),n))))return o;e=f.getNextDomNode(e)}}function a(e,t){var n,i=e.selection.getRange(),o=t.searchStr;if((l=e.document.createElement("span")).innerHTML="$$ueditor_searchreplace_key$$",i.shrinkBoundary(!0),!i.collapsed){i.select();var a=e.selection.getText();if(new RegExp("^"+t.searchStr+"$",t.casesensitive?"":"i").test(a)){if(null!=t.replaceStr)return o=t.replaceStr,o=g.document.createTextNode(o),i.deleteContents().insertNode(o),i.select(),!0;i.collapse(-1==t.dir)}}i.insertNode(l),i.enlargeToBlockElm(!0),a=(n=i.startContainer)[r.ie?"innerText":"textContent"].indexOf("$$ueditor_searchreplace_key$$"),i.setStartBefore(l),f.remove(l);e:{var s,l=n;for(n=t.all||1==t.dir?"getNextDomNode":"getPreDomNode",f.isBody(l)&&(l=l.firstChild);l;){s=3==l.nodeType?l.nodeValue:l[r.ie?"innerText":"textContent"];t:{var d=t,c=a,u=d.searchStr;-1==d.dir&&(s=s.split("").reverse().join(""),u=u.split("").reverse().join(""),c=s.length-c);u=new RegExp(u,"g"+(d.casesensitive?"":"i"));for(var m=void 0;m=u.exec(s);)if(m.index>=c){s=-1==d.dir?s.length-m.index-d.searchStr.length:m.index;break t}s=-1}if(-1!=s){a={node:l,index:s};break e}for(l=f[n](l);l&&b[l.nodeName.toLowerCase()];)l=f[n](l,!0);l&&(a=-1==t.dir?(3==l.nodeType?l.nodeValue:l[r.ie?"innerText":"textContent"]).length:0)}a=void 0}if(a)return l=h(a.node,a.index,o),o=h(a.node,a.index+o.length,o),i.setStart(l.node,l.index).setEnd(o.node,o.index),void 0!==t.replaceStr&&(o=t.replaceStr,o=g.document.createTextNode(o),i.deleteContents().insertNode(o)),i.select(),!0;i.setCursor()}var g=this,b={table:1,tbody:1,tr:1,ol:1,ul:1};return{commands:{searchreplace:{execCommand:function(e,t){p.extend(t,{all:!1,casesensitive:!1,dir:1},!0);var n=0;if(t.all){var i=g.selection.getRange(),o=g.body.firstChild;for(o&&1==o.nodeType?(i.setStart(o,0),i.shrinkBoundary(!0)):3==o.nodeType&&i.setStartBefore(o),i.collapse(!0).select(!0),void 0!==t.replaceStr&&g.fireEvent("saveScene");a(this,t);)n++}else void 0!==t.replaceStr&&g.fireEvent("saveScene"),a(this,t)&&n++;return n&&g.fireEvent("saveScene"),n},notNeedUndo:1}}}}),UE.plugins.customstyle=function(){var r=this;r.setOpt({customstyle:[{tag:"h1",name:"tc",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:center;margin:0 0 20px 0;"},{tag:"h1",name:"tl",style:"font-size:32px;font-weight:bold;border-bottom:#ccc 2px solid;padding:0 4px 0 0;text-align:left;margin:0 0 10px 0;"},{tag:"span",name:"im",style:"font-size:16px;font-style:italic;font-weight:bold;line-height:18px;"},{tag:"span",name:"hi",style:"font-size:16px;font-style:italic;font-weight:bold;color:rgb(51, 153, 204);line-height:18px;"}]}),r.commands.customstyle={execCommand:function(e,t){var n,i,o=t.tag,r=f.findParent(this.selection.getStart(),function(e){return e.getAttribute("label")},!0),a={};for(n in t)void 0!==t[n]&&(a[n]=t[n]);if(delete a.tag,r&&r.getAttribute("label")==t.label){if(i=(n=this.selection.getRange()).createBookmark(),n.collapsed)if(w.$block[r.tagName]){var s=this.document.createElement("p");f.moveChild(r,s),r.parentNode.insertBefore(s,r),f.remove(r)}else f.remove(r,!0);else{r=f.getCommonAncestor(i.start,i.end),a=f.getElementsByTagName(r,o),new RegExp(o,"i").test(r.tagName)&&a.push(r);for(var l,d=0;l=a[d++];)if(l.getAttribute("label")==t.label){s=f.getPosition(l,i.start);var c=f.getPosition(l,i.end);(s&f.POSITION_FOLLOWING||s&f.POSITION_CONTAINS)&&(c&f.POSITION_PRECEDING||c&f.POSITION_CONTAINS)&&w.$block[o]&&(s=this.document.createElement("p"),f.moveChild(l,s),l.parentNode.insertBefore(s,l)),f.remove(l,!0)}(r=f.findParent(r,function(e){return e.getAttribute("label")==t.label},!0))&&f.remove(r,!0)}n.moveToBookmark(i).select()}else w.$block[o]?(this.execCommand("paragraph",o,a,"customstyle"),(n=this.selection.getRange()).collapsed||(n.collapse(),r=f.findParent(this.selection.getStart(),function(e){return e.getAttribute("label")==t.label},!0),o=this.document.createElement("p"),f.insertAfter(r,o),f.fillNode(this.document,o),n.setStart(o,0).setCursor())):(n=this.selection.getRange()).collapsed?(r=this.document.createElement(o),f.setAttributes(r,a),n.insertNode(r).setStart(r,0).setCursor()):(i=n.createBookmark(),n.applyInlineStyle(o,a).moveToBookmark(i).select())},queryCommandValue:function(){var e=f.filterNodeList(this.selection.getStartElementPath(),function(e){return e.getAttribute("label")});return e?e.getAttribute("label"):""}},r.addListener("keyup",function(e,t){var n=t.keyCode||t.which;if((32==n||13==n)&&(n=r.selection.getRange()).collapsed){var i=f.findParent(r.selection.getStart(),function(e){return e.getAttribute("label")},!0);if(i&&w.$block[i.tagName]&&f.isEmptyNode(i)){var o=r.document.createElement("p");f.insertAfter(i,o),f.fillNode(r.document,o),f.remove(i),n.setStart(o,0).setCursor()}}})},UE.plugins.catchremoteimage=function(){var d=this,b=UE.ajax;!1!==d.options.catchRemoteImageEnable&&(d.setOpt({catchRemoteImageEnable:!1}),d.addListener("afterpaste",function(){d.fireEvent("catchRemoteImage")}),d.addListener("catchRemoteImage",function(){function c(t,n){var i=p.serializeParam(d.queryCommandValue("serverparam"))||"",o=(i=p.formatUrl(e+(-1==e.indexOf("?")?"?":"&")+i),{method:"POST",dataType:p.isCrossDomainUrl(i)?"jsonp":"",timeout:6e4,onsuccess:n.success,onerror:n.error});o[g]=t,b.request(i,o)}for(var a=d.getOpt("catcherLocalDomain"),e=d.getActionUrl(d.getOpt("catcherActionName")),h=d.getOpt("catcherUrlPrefix"),g=d.getOpt("catcherFieldName"),l=[],k=f.getElementsByTagName(d.document,"img"),m=function(e,t){if(-1!=e.indexOf(location.host)||/(^\.)|(^\/)/.test(e))return!0;if(t)for(var n,i=0;n=t[i++];)if(-1!==e.indexOf(n))return!0;return!1},n=0,q;q=k[n++];)q.getAttribute("word_img")||(q=q.getAttribute("_src")||q.src||"",/^(https?|ftp):/i.test(q)&&!m(q,a)&&l.push(q));l.length&&c(l,{success:function(a){try{var b=void 0!==a.state?a:eval("("+a.responseText+")")}catch(e){return}var e,g,n,l=b.list;for(a=0;b=k[a++];)for(n=b.getAttribute("_src")||b.src||"",e=0;g=l[e++];)if(n==g.source&&"SUCCESS"==g.state){e=h+g.url,f.setAttributes(b,{src:e,_src:e});break}d.fireEvent("catchremotesuccess")},error:function(){d.fireEvent("catchremoteerror")}})}))},UE.plugin.register("snapscreen",function(){function d(e){var t=document.createElement("a"),n=p.serializeParam(b.queryCommandValue("serverparam"))||"";return t.href=e,r.ie&&(t.href=t.href),e=t.search,n&&(e=(e=e+(-1==e.indexOf("?")?"?":"&")+n).replace(/[&]+/gi,"&")),{port:t.port,hostname:t.hostname,path:t.pathname+e||+t.hash}}var b=this,c;return{commands:{snapscreen:{execCommand:function(a){function e(a){try{if(a=eval("("+a+")"),"SUCCESS"==a.state){var c=b.options;b.execCommand("insertimage",{src:c.snapscreenUrlPrefix+a.url,_src:c.snapscreenUrlPrefix+a.url,alt:a.title||"",floatStyle:c.snapscreenImgAlign})}else alert(a.state)}catch(e){alert(l.callBackErrorMsg)}}var f,g,l=b.getLang("snapScreen_plugin");if(!c){a=b.container,c=(b.container.ownerDocument||b.container.document).createElement("object");try{c.type="application/x-pluginbaidusnap"}catch(e){return}c.style.cssText="position:absolute;left:-9999px;width:0;height:0;",c.setAttribute("width","0"),c.setAttribute("height","0"),a.appendChild(c)}a=b.getActionUrl(b.getOpt("snapscreenActionName")),f=d(a),setTimeout(function(){try{g=c.saveSnapshot(f.hostname,f.path,f.port)}catch(e){return void b.ui._dialogs.snapscreenDialog.open()}e(g)},50)},queryCommandState:function(){return-1!=navigator.userAgent.indexOf("Windows",0)?0:-1}}}}}),UE.commands.insertparagraph={execCommand:function(e,t){for(var n,i=this.selection.getRange(),o=i.startContainer;o&&!f.isBody(o);)o=(n=o).parentNode;n&&(o=this.document.createElement("p"),t?n.parentNode.insertBefore(o,n):n.parentNode.insertBefore(o,n.nextSibling),f.fillNode(this.document,o),i.setStart(o,0).setCursor(!1,!0))}},UE.plugin.register("webapp",function(){function i(e,t){return t?'<iframe class="edui-faked-webapp" title="'+e.title+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+'width="'+e.width+'" height="'+e.height+'"  scrolling="no" frameborder="0" src="'+e.url+'" logo_url = "'+e.logo+'"></iframe>':'<img title="'+e.title+'" width="'+e.width+'" height="'+e.height+'" src="'+n.options.UEDITOR_HOME_URL+'themes/default/images/spacer.gif" _logo_url="'+e.logo+'" style="background:url('+e.logo+') no-repeat center center; border:1px solid gray;" class="edui-faked-webapp" _url="'+e.url+'" '+(e.align&&!e.cssfloat?'align="'+e.align+'"':"")+(e.cssfloat?'style="float:'+e.cssfloat+'"':"")+"/>"}var n=this;return{outputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){var t;"edui-faked-webapp"==e.getAttr("class")&&(t=i({title:e.getAttr("title"),width:e.getAttr("width"),height:e.getAttr("height"),align:e.getAttr("align"),cssfloat:e.getStyle("float"),url:e.getAttr("_url"),logo:e.getAttr("_logo_url")},!0),t=UE.uNode.createElement(t),e.parentNode.replaceChild(t,e))})},inputRule:function(e){p.each(e.getNodesByTagName("iframe"),function(e){if("edui-faked-webapp"==e.getAttr("class")){var t=UE.uNode.createElement(i({title:e.getAttr("title"),width:e.getAttr("width"),height:e.getAttr("height"),align:e.getAttr("align"),cssfloat:e.getStyle("float"),url:e.getAttr("src"),logo:e.getAttr("logo_url")}));e.parentNode.replaceChild(t,e)}})},commands:{webapp:{execCommand:function(e,t){var n=i(p.extend(t,{align:"none"}),!1);this.execCommand("inserthtml",n)},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&"edui-faked-webapp"==e.className?1:0}}}}}),UE.plugins.template=function(){UE.commands.template={execCommand:function(e,t){t.html&&this.execCommand("inserthtml",t.html)}},this.addListener("click",function(e,t){var n=t.target||t.srcElement,i=this.selection.getRange();(n=f.findParent(n,function(e){if(e.className&&f.hasClass(e,"ue_t"))return e},!0))&&i.selectNode(n).shrinkBoundary().select()}),this.addListener("keydown",function(e,t){var n=this.selection.getRange();n.collapsed||t.ctrlKey||t.metaKey||t.shiftKey||t.altKey||(n=f.findParent(n.startContainer,function(e){if(e.className&&f.hasClass(e,"ue_t"))return e},!0))&&f.removeClasses(n,["ue_t"])})},UE.plugin.register("music",function(){function i(e,t,n,i,o,r){return r?'<embed type="application/x-shockwave-flash" class="edui-faked-music" pluginspage="http://www.macromedia.com/go/getflashplayer" src="'+e+'" width="'+t+'" height="'+n+'" '+(i&&!o?'align="'+i+'"':"")+(o?'style="float:'+o+'"':"")+' wmode="transparent" play="true" loop="false" menu="false" allowscriptaccess="never" allowfullscreen="true" >':"<img "+(i&&!o?'align="'+i+'"':"")+(o?'style="float:'+o+'"':"")+' width="'+t+'" height="'+n+'" _url="'+e+'" class="edui-faked-music" src="'+a.options.langPath+a.options.lang+'/images/music.png" />'}var a=this;return{outputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){var t;if("edui-faked-music"==e.getAttr("class")){t=e.getStyle("float");var n=e.getAttr("align");t=i(e.getAttr("_url"),e.getAttr("width"),e.getAttr("height"),n,t,!0),t=UE.uNode.createElement(t),e.parentNode.replaceChild(t,e)}})},inputRule:function(e){p.each(e.getNodesByTagName("embed"),function(e){if("edui-faked-music"==e.getAttr("class")){var t=e.getStyle("float"),n=e.getAttr("align");html=i(e.getAttr("src"),e.getAttr("width"),e.getAttr("height"),n,t,!1),t=UE.uNode.createElement(html),e.parentNode.replaceChild(t,e)}})},commands:{music:{execCommand:function(e,t){var n=i(t.url,t.width||400,t.height||95,"none",!1);this.execCommand("inserthtml",n)},queryCommandState:function(){var e=this.selection.getRange().getClosedNode();return e&&"edui-faked-music"==e.className?1:0}}}}}),UE.plugin.register("autoupload",function(){function a(e,o){var t,r,n,i,a,s,l,d,c=/image\/\w+/i.test(e.type)?"image":"file",u="loading_"+(+new Date).toString(36);t=o.getOpt(c+"FieldName"),r=o.getOpt(c+"UrlPrefix"),n=o.getOpt(c+"MaxSize"),i=o.getOpt(c+"AllowFiles"),a=o.getActionUrl(o.getOpt(c+"ActionName")),l=function(e){var t=o.document.getElementById(u);t&&f.remove(t),o.fireEvent("showmessage",{id:u,content:e,type:"error",timeout:4e3})},d="image"==c?(s='<img class="loadingclass" id="'+u+'" src="'+o.options.themePath+o.options.theme+'/images/spacer.gif" title="'+(o.getLang("autoupload.loading")||"")+'" >',function(e){var t=r+e.url,n=o.document.getElementById(u);n&&(n.setAttribute("src",t),n.setAttribute("_src",t),n.setAttribute("title",e.title||""),n.setAttribute("alt",e.original||""),n.removeAttribute("id"),f.removeClasses(n,"loadingclass"))}):(s='<p><img class="loadingclass" id="'+u+'" src="'+o.options.themePath+o.options.theme+'/images/spacer.gif" title="'+(o.getLang("autoupload.loading")||"")+'" ></p>',function(e){e=r+e.url;var t=o.document.getElementById(u),n=o.selection.getRange(),i=n.createBookmark();n.selectNode(t).select(),o.execCommand("insertfile",{url:e}),n.moveToBookmark(i).select()}),o.execCommand("inserthtml",s),o.getOpt(c+"ActionName")?e.size>n?l(o.getLang("autoupload.exceedSizeError")):(n=e.name?e.name.substr(e.name.lastIndexOf(".")):"")&&"image"!=c||i&&-1==(i.join("")+".").indexOf(n.toLowerCase()+".")?l(o.getLang("autoupload.exceedTypeError")):(i=new XMLHttpRequest,c=new FormData,n=p.serializeParam(o.queryCommandValue("serverparam"))||"",a=p.formatUrl(a+(-1==a.indexOf("?")?"?":"&")+n),c.append(t,e,e.name||"blob."+e.type.substr(6)),c.append("type","ajax"),i.open("post",a,!0),i.setRequestHeader("X-Requested-With","XMLHttpRequest"),i.addEventListener("load",function(e){try{var t=new Function("return "+p.trim(e.target.response))();"SUCCESS"==t.state&&t.url?d(t):l(t.state)}catch(e){l(o.getLang("autoupload.loadError"))}}),i.send(c)):l(o.getLang("autoupload.errorLoadConfig"))}return{outputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)}),p.each(e.getNodesByTagName("p"),function(e){/\bloadpara\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},bindEvents:{ready:function(e){var r=this;window.FormData&&window.FileReader&&(f.on(r.body,"paste drop",function(e){var t,n=!1;if(t="paste"==e.type?e.clipboardData&&e.clipboardData.items&&1==e.clipboardData.items.length&&/^image\//.test(e.clipboardData.items[0].type)?e.clipboardData.items:null:e.dataTransfer&&e.dataTransfer.files?e.dataTransfer.files:null){for(var i,o=t.length;o--;)(i=t[o]).getAsFile&&(i=i.getAsFile()),i&&0<i.size&&(a(i,r),n=!0);n&&e.preventDefault()}}),f.on(r.body,"dragover",function(e){"Files"==e.dataTransfer.types[0]&&e.preventDefault()}),p.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-left:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document))}}}}),UE.plugin.register("autosave",function(){function e(e){var t;new Date-i<20||(e.hasContents()?(i=new Date,e._saveFlag=null,t=n.body.innerHTML,!1!==e.fireEvent("beforeautosave",{content:t})&&(n.setPreferences(o,t),e.fireEvent("afterautosave",{content:t}))):o&&n.removePreferences(o))}var n=this,i=new Date,o=null;return{defaultOptions:{saveInterval:500},bindEvents:{ready:function(){var e=n.key?n.key+"-drafts-data":(n.container.parentNode.id||"ue-common")+"-drafts-data";o=(location.protocol+location.host+location.pathname).replace(/[.:\/]/g,"_")+e},contentchange:function(){o&&(n._saveFlag&&window.clearTimeout(n._saveFlag),0<n.options.saveInterval?n._saveFlag=window.setTimeout(function(){e(n)},n.options.saveInterval):e(n))}},commands:{clearlocaldata:{execCommand:function(e,t){o&&n.getPreferences(o)&&n.removePreferences(o)},notNeedUndo:!0,ignoreContentChange:!0},getlocaldata:{execCommand:function(e,t){return o&&n.getPreferences(o)||""},notNeedUndo:!0,ignoreContentChange:!0},drafts:{execCommand:function(e,t){o&&(n.body.innerHTML=n.getPreferences(o)||"<p>"+f.fillHtml+"</p>",n.focus(!0))},queryCommandState:function(){return o?null===n.getPreferences(o)?-1:0:-1},notNeedUndo:!0,ignoreContentChange:!0}}}}),UE.plugin.register("charts",function(){function a(e){var t=null;if(e.rows.length<2||e.rows[0].cells.length<2)return!1;for(var n,i=(t=e.rows[0].cells).length,o=0;n=t[o];o++)if("th"!==n.tagName.toLowerCase())return!1;for(o=1;t=e.rows[o];o++){if(t.cells.length!=i||"th"!==t.cells[0].tagName.toLowerCase())return!1;for(var r=1;n=t.cells[r];r++)if(n=(n=p.trim(n.innerText||n.textContent||"")).replace(new RegExp(UE.dom.domUtils.fillChar,"g"),"").replace(/^\s+|\s+$/g,""),!/^\d*\.?\d+$/.test(n))return!1}return!0}var s=this;return{bindEvents:{chartserror:function(){}},commands:{charts:{execCommand:function(e,t){var n=f.findParentByTagName(this.selection.getRange().startContainer,"table",!0),i=[],o={};if(!n)return!1;if(!a(n))return s.fireEvent("chartserror"),!1;for(var r in o.title=t.title||"",o.subTitle=t.subTitle||"",o.xTitle=t.xTitle||"",o.yTitle=t.yTitle||"",o.suffix=t.suffix||"",o.tip=t.tip||"",o.dataFormat=t.tableDataFormat||"",o.chartType=t.chartType||0,o)o.hasOwnProperty(r)&&i.push(r+":"+o[r]);n.setAttribute("data-chart",i.join(";")),f.addClass(n,"edui-charts-table")},queryCommandState:function(e,t){var n=f.findParentByTagName(this.selection.getRange().startContainer,"table",!0);return n&&a(n)?0:-1}}},inputRule:function(e){p.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style")})},outputRule:function(e){p.each(e.getNodesByTagName("table"),function(e){void 0!==e.getAttr("data-chart")&&e.setAttr("style","display: none;")})}}}),UE.plugin.register("section",function(){function n(e){this.tag="",this.level=-1,this.parentSection=this.previousSection=this.nextSection=this.dom=null,this.startAddress=[],this.endAddress=[],this.children=[]}function m(e){var t=new n;return p.extend(t,e)}function l(e,t){for(var n=t,i=0;i<e.length;i++){if(!n.childNodes)return null;n=n.childNodes[e[i]]}return n}var i=this;return{bindMultiEvents:{type:"aftersetcontent afterscencerestore",handler:function(){i.fireEvent("updateSections")}},bindEvents:{ready:function(){i.fireEvent("updateSections"),f.on(i.body,"drop paste",function(){i.fireEvent("updateSections")})},afterexeccommand:function(e,t){"paragraph"==t&&i.fireEvent("updateSections")},keyup:function(e,t){if(1!=this.selection.getRange().collapsed)this.fireEvent("updateSections");else{var n=t.keyCode||t.which;13!=n&&8!=n&&46!=n||this.fireEvent("updateSections")}}},commands:{getsections:{execCommand:function(e,t){for(var c=t||"h1 h2 h3 h4 h5 h6".split(" "),n=0;n<c.length;n++)"string"==typeof c[n]?c[n]=function(t){return function(e){return e.tagName==t.toUpperCase()}}(c[n]):"function"!=typeof c[n]&&(c[n]=function(e){return null});var u=this,f=n=m({level:-1,title:"root"});return function e(t,n){for(var i,o,r=null,a=t.childNodes,s=0,l=a.length;s<l;s++){e:{i=o=a[s];for(var d=0;d<c.length;d++)if(c[d](i)){i=d;break e}i=-1}if(0<=i){for(r=u.selection.getRange().selectNode(o).createAddress(!0).startAddress,r=m({tag:o.tagName,title:o.innerText||o.textContent||"",level:i,dom:o,startAddress:p.clone(r,[]),endAddress:p.clone(r,[]),children:[]}),o=(f.nextSection=r).previousSection=f;i<=o.level;)o=o.parentSection;(r.parentSection=o).children.push(r),r=f=r}else 1===o.nodeType&&e(o,n),r&&r.endAddress[r.endAddress.length-1]++}}(u.body,n),n},notNeedUndo:!0},movesection:{execCommand:function(e,t,n,i){if(t&&n&&-1!=n.level){var o;if(e=l(n=i?n.endAddress:n.startAddress,this.body),!(o=!n||!e)){o=t.startAddress;for(var r=!1,a=!1,s=0;s<o.length&&!(s>=n.length);s++){if(n[s]>o[s]){r=!0;break}if(n[s]<o[s])break}for(s=0;s<t.endAddress.length&&!(s>=n.length);s++){if(n[s]<o[s]){a=!0;break}if(n[s]>o[s])break}o=r&&a}if(!o){if(n=l(t.startAddress,this.body),t=l(t.endAddress,this.body),i)for(i=t;i&&!(f.getPosition(n,i)&f.POSITION_FOLLOWING)&&(o=i.previousSibling,f.insertAfter(e,i),i!=n);)i=o;else for(i=n;i&&!(f.getPosition(i,t)&f.POSITION_FOLLOWING)&&(o=i.nextSibling,e.parentNode.insertBefore(i,e),i!=t);)i=o;this.fireEvent("updateSections")}}}},deletesection:{execCommand:function(e,t,n){function i(e){for(var t=o.body,n=0;n<e.length;n++){if(!t.childNodes)return null;t=t.childNodes[e[n]]}return t}var o=this;if(t){if(e=i(t.startAddress),t=i(t.endAddress),n)f.remove(e);else for(;e&&f.inDoc(t,o.document)&&!(f.getPosition(e,t)&f.POSITION_FOLLOWING);)n=e.nextSibling,f.remove(e),e=n;o.fireEvent("updateSections")}}},selectsection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var n=this.selection.getRange(),i={startAddress:p.clone(t.startAddress,[]),endAddress:p.clone(t.endAddress,[])};return i.endAddress[i.endAddress.length-1]++,n.moveToAddress(i).select().scrollToView(),!0},notNeedUndo:!0},scrolltosection:{execCommand:function(e,t){if(!t&&!t.dom)return!1;var n=this.selection.getRange(),i={startAddress:t.startAddress,endAddress:t.endAddress};return i.endAddress[i.endAddress.length-1]++,n.moveToAddress(i).scrollToView(),!0},notNeedUndo:!0}}}}),UE.plugin.register("simpleupload",function(){function n(){var r=i.offsetWidth||20,a=i.offsetHeight||20,c=document.createElement("iframe"),u="display:block;width:"+r+"px;height:"+a+"px;overflow:hidden;border:0;margin:0;padding:0;position:absolute;top:0;left:0;filter:alpha(opacity=0);-moz-opacity:0;-khtml-opacity: 0;opacity: 0;cursor:pointer;";f.on(c,"load",function(){var e,t,n,i=(+new Date).toString(36);n=(t=c.contentDocument||c.contentWindow.document).body,(e=t.createElement("div")).innerHTML='<form id="edui_form_'+i+'" target="edui_iframe_'+i+'" method="POST" enctype="multipart/form-data" action="'+m.getOpt("serverUrl")+'" style="'+u+'"><input id="edui_input_'+i+'" type="file" accept="image/*" name="'+m.options.imageFieldName+'" style="'+u+'"></form><iframe id="edui_iframe_'+i+'" name="edui_iframe_'+i+'" style="display:none;width:0;height:0;border:0;margin:0;padding:0;position:absolute;"></iframe>',e.className="edui-"+m.options.theme,e.id=m.ui.id+"_iframeupload",n.style.cssText=u,n.style.width=r+"px",n.style.height=a+"px",n.appendChild(e),n.parentNode&&(n.parentNode.style.width=r+"px",n.parentNode.style.height=r+"px");var o,s=t.getElementById("edui_form_"+i),l=t.getElementById("edui_input_"+i),d=t.getElementById("edui_iframe_"+i);f.on(l,"change",function(){function r(e){if(a){var t=m.document.getElementById(a);t&&f.remove(t),m.fireEvent("showmessage",{id:a,content:e,type:"error",timeout:4e3})}}if(l.value){var e,a="loading_"+(+new Date).toString(36),t=p.serializeParam(m.queryCommandValue("serverparam"))||"",n=m.getActionUrl(m.getOpt("imageActionName")),i=m.getOpt("imageAllowFiles");if(m.focus(),m.execCommand("inserthtml",'<img class="loadingclass" id="'+a+'" src="'+m.options.themePath+m.options.theme+'/images/spacer.gif" title="'+(m.getLang("simpleupload.loading")||"")+'" >'),m.getOpt("imageActionName"))!(e=(e=l.value)?e.substr(e.lastIndexOf(".")):"")||i&&-1==(i.join("")+".").indexOf(e.toLowerCase()+".")?r(m.getLang("simpleupload.exceedTypeError")):(f.on(d,"load",function e(){try{var t,n,i,o=(d.contentDocument||d.contentWindow.document).body;n=new Function("return "+(o.innerText||o.textContent||""))(),t=m.options.imageUrlPrefix+n.url,"SUCCESS"==n.state&&n.url?((i=m.document.getElementById(a)).setAttribute("src",t),i.setAttribute("_src",t),i.setAttribute("title",n.title||""),i.setAttribute("alt",n.original||""),i.removeAttribute("id"),f.removeClasses(i,"loadingclass")):r(n.state)}catch(e){r(m.getLang("simpleupload.loadError"))}s.reset(),f.un(d,"load",e)}),s.action=p.formatUrl(n+(-1==n.indexOf("?")?"?":"&")+t),s.submit());else errorHandler(m.getLang("autoupload.errorLoadConfig"))}}),m.addListener("selectionchange",function(){clearTimeout(o),o=setTimeout(function(){-1==m.queryCommandState("simpleupload")?l.disabled="disabled":l.disabled=!1},400)}),h=!0}),c.style.cssText=u,i.appendChild(c)}var i,m=this,h=!1;return{bindEvents:{ready:function(){p.cssRule("loading",".loadingclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loading.gif') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}\n.loaderrorclass{display:inline-block;cursor:default;background: url('"+this.options.themePath+this.options.theme+"/images/loaderror.png') no-repeat center center transparent;border:1px solid #cccccc;margin-right:1px;height: 22px;width: 22px;}",this.document)},simpleuploadbtnready:function(e,t){i=t,m.afterConfigReady(n)}},outputRule:function(e){p.each(e.getNodesByTagName("img"),function(e){/\b(loaderrorclass)|(bloaderrorclass)\b/.test(e.getAttr("class"))&&e.parentNode.removeChild(e)})},commands:{simpleupload:{queryCommandState:function(){return h?0:-1}}}}}),UE.plugin.register("serverparam",function(){var i={};return{commands:{serverparam:{execCommand:function(e,t,n){null==t?i={}:p.isString(t)?null==n?delete i[t]:i[t]=n:p.isObject(t)?p.extend(i,t,!0):p.isFunction(t)&&p.extend(i,t(),!0)},queryCommandValue:function(){return i||{}}}}}}),UE.plugin.register("insertfile",function(){var l=this;return{commands:{insertfile:{execCommand:function(e,t){t=p.isArray(t)?t:[t];var n,i,o,r,a="",s=(n=l.getOpt("UEDITOR_HOME_URL"))+("/"==n.substr(n.length-1)?"":"/")+"dialogs/attachment/fileTypeImages/";for(n=0;n<t.length;n++)o=s+((r={rar:"icon_rar.gif",zip:"icon_rar.gif",tar:"icon_rar.gif",gz:"icon_rar.gif",bz2:"icon_rar.gif",doc:"icon_doc.gif",docx:"icon_doc.gif",pdf:"icon_pdf.gif",mp3:"icon_mp3.gif",xls:"icon_xls.gif",chm:"icon_chm.gif",ppt:"icon_ppt.gif",pptx:"icon_ppt.gif",avi:"icon_mv.gif",rmvb:"icon_mv.gif",wmv:"icon_mv.gif",flv:"icon_mv.gif",swf:"icon_mv.gif",rm:"icon_mv.gif",exe:"icon_exe.gif",psd:"icon_psd.gif",txt:"icon_txt.gif",jpg:"icon_jpg.gif",png:"icon_jpg.gif",jpeg:"icon_jpg.gif",gif:"icon_jpg.gif",ico:"icon_jpg.gif",bmp:"icon_jpg.gif"})[o=(o=(i=t[n]).url).substr(o.lastIndexOf(".")+1).toLowerCase()]?r[o]:r.txt),r=i.title||i.url.substr(i.url.lastIndexOf("/")+1),a+='<p style="line-height: 16px;"><img style="vertical-align: middle; margin-right: 2px;" src="'+o+'" _src="'+o+'" /><a style="font-size:12px; color:#0066cc;" href="'+i.url+'" title="'+r+'">'+r+"</a></p>";l.execCommand("insertHtml",a)}}}}}),t=t||{},t.editor=t.editor||{},UE.ui=t.editor.ui={},function(){function n(){var e=document.getElementById("edui_fixedlayer");s.setViewportOffset(e,{left:0,top:0})}var r=t.editor.browser,a=t.editor.dom.domUtils,i=window.$EDITORUI={},o=0,s=t.editor.ui.uiUtils={uid:function(e){return e?e.ID$EDITORUI||(e.ID$EDITORUI=++o):++o},hook:function(o,e){var r;return o&&o._callbacks?r=o:(r=function(){var e;o&&(e=o.apply(this,arguments));for(var t=r._callbacks,n=t.length;n--;){var i=t[n].apply(this,arguments);void 0===e&&(e=i)}return e})._callbacks=[],r._callbacks.push(e),r},createElementByHtml:function(e){var t=document.createElement("div");return t.innerHTML=e,(t=t.firstChild).parentNode.removeChild(t),t},getViewportElement:function(){return r.ie&&r.quirks?document.body:document.documentElement},getClientRect:function(e){var t;try{t=e.getBoundingClientRect()}catch(e){t={left:0,top:0,height:0,width:0}}for(var n,i={left:Math.round(t.left),top:Math.round(t.top),height:Math.round(t.bottom-t.top),width:Math.round(t.right-t.left)};(n=e.ownerDocument)!==document&&(e=a.getWindow(n).frameElement);)t=e.getBoundingClientRect(),i.left+=t.left,i.top+=t.top;return i.bottom=i.top+i.height,i.right=i.left+i.width,i},getViewportRect:function(){var e=s.getViewportElement(),t=0|(window.innerWidth||e.clientWidth);return{left:0,top:0,height:e=0|(window.innerHeight||e.clientHeight),width:t,bottom:e,right:t}},setViewportOffset:function(e,t){var n=s.getFixedLayer();e.parentNode===n?(e.style.left=t.left+"px",e.style.top=t.top+"px"):a.setViewportOffset(e,t)},getEventOffset:function(e){var t=s.getClientRect(e.target||e.srcElement);return{left:(e=s.getViewportOffsetByEvent(e)).left-t.left,top:e.top-t.top}},getViewportOffsetByEvent:function(e){var t=e.target||e.srcElement,n=a.getWindow(t).frameElement;return e={left:e.clientX,top:e.clientY},n&&t.ownerDocument!==document&&(t=s.getClientRect(n),e.left+=t.left,e.top+=t.top),e},setGlobal:function(e,t){return i[e]=t,'$EDITORUI["'+e+'"]'},unsetGlobal:function(e){delete i[e]},copyAttributes:function(e,t){for(var n=t.attributes,i=n.length;i--;){var o=n[i];"style"==o.nodeName||"class"==o.nodeName||r.ie&&!o.specified||e.setAttribute(o.nodeName,o.nodeValue)}t.className&&a.addClass(e,t.className),t.style.cssText&&(e.style.cssText+=";"+t.style.cssText)},removeStyle:function(e,t){if(e.style.removeProperty)e.style.removeProperty(t);else{if(!e.style.removeAttribute)throw"";e.style.removeAttribute(t)}},contains:function(e,t){return e&&t&&e!==t&&(e.contains?e.contains(t):16&e.compareDocumentPosition(t))},startDrag:function(e,t,n){function i(e){t.ondragmove(e.clientX-o,e.clientY-r,e),e.stopPropagation?e.stopPropagation():e.cancelBubble=!0}n=n||document;var o=e.clientX,r=e.clientY;if(n.addEventListener){var a=function(e){n.removeEventListener("mousemove",i,!0),n.removeEventListener("mouseup",a,!0),window.removeEventListener("mouseup",a,!0),t.ondragstop()};n.addEventListener("mousemove",i,!0),n.addEventListener("mouseup",a,!0),window.addEventListener("mouseup",a,!0),e.preventDefault()}else{var s=function(){l.releaseCapture(),l.detachEvent("onmousemove",i),l.detachEvent("onmouseup",s),l.detachEvent("onlosecaptrue",s),t.ondragstop()},l=e.srcElement;l.setCapture(),l.attachEvent("onmousemove",i),l.attachEvent("onmouseup",s),l.attachEvent("onlosecaptrue",s),e.returnValue=!1}t.ondragstart()},getFixedLayer:function(){var e=document.getElementById("edui_fixedlayer");return null==e&&((e=document.createElement("div")).id="edui_fixedlayer",document.body.appendChild(e),r.ie&&r.version<=8?(e.style.position="absolute",a.on(window,"scroll",n),a.on(window,"resize",t.editor.utils.defer(n,0,!0)),setTimeout(n)):e.style.position="fixed",e.style.left="0",e.style.top="0",e.style.width="0",e.style.height="0"),e},makeUnselectable:function(e){if(r.opera||r.ie&&r.version<9){if(e.unselectable="on",e.hasChildNodes())for(var t=0;t<e.childNodes.length;t++)1==e.childNodes[t].nodeType&&s.makeUnselectable(e.childNodes[t])}else void 0!==e.style.MozUserSelect?e.style.MozUserSelect="none":void 0!==e.style.WebkitUserSelect?e.style.WebkitUserSelect="none":void 0!==e.style.KhtmlUserSelect&&(e.style.KhtmlUserSelect="none")}}}(),x7=t.editor.utils,y7=t.editor.ui.uiUtils,z7=t.editor.EventBase,A7=t.editor.ui.UIBase=function(){},A7.prototype={className:"",uiName:"",initOptions:function(e){for(var t in e)this[t]=e[t];this.id=this.id||"edui"+y7.uid()},initUIBase:function(){this._globalKey=x7.unhtml(y7.setGlobal(this.id,this))},render:function(e){for(var t,n=this.renderHtml(),i=(n=y7.createElementByHtml(n),f.getElementsByTagName(n,"*")),o="edui-"+(this.theme||this.editor.options.theme),r=document.getElementById("edui_fixedlayer"),a=0;t=i[a++];)f.addClass(t,o);f.addClass(n,o),r&&(r.className="",f.addClass(r,o)),null!=(i=this.getDom())?(i.parentNode.replaceChild(n,i),y7.copyAttributes(n,i)):("string"==typeof e&&(e=document.getElementById(e)),e=e||y7.getFixedLayer(),f.addClass(e,o),e.appendChild(n)),this.postRender()},getDom:function(e){return e?document.getElementById(this.id+"_"+e):document.getElementById(this.id)},postRender:function(){this.fireEvent("postrender")},getHtmlTpl:function(){return""},formatHtml:function(e){var t="edui-"+this.uiName;return e.replace(/##/g,this.id).replace(/%%-/g,this.uiName?t+"-":"").replace(/%%/g,(this.uiName?t:"")+" "+this.className).replace(/\$\$/g,this._globalKey)},renderHtml:function(){return this.formatHtml(this.getHtmlTpl())},dispose:function(){var e=this.getDom();e&&t.editor.dom.domUtils.remove(e),y7.unsetGlobal(this.id)}},x7.inherits(A7,z7),O7=t.editor.utils,P7=t.editor.ui.UIBase,Q7=t.editor.ui.Separator=function(e){this.initOptions(e),this.initSeparator()},Q7.prototype={uiName:"separator",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"></div>'}},O7.inherits(Q7,P7),S7=t.editor.utils,T7=t.editor.dom.domUtils,U7=t.editor.ui.UIBase,V7=t.editor.ui.uiUtils,W7=t.editor.ui.Mask=function(e){this.initOptions(e),this.initUIBase()},W7.prototype={getHtmlTpl:function(){return'<div id="##" class="edui-mask %%" onclick="return $$._onClick(event, this);" onmousedown="return $$._onMouseDown(event, this);"></div>'},postRender:function(){var e=this;T7.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e._fill()})})},show:function(e){this._fill(),this.getDom().style.display="",this.getDom().style.zIndex=e},hide:function(){this.getDom().style.display="none",this.getDom().style.zIndex=""},isHidden:function(){return"none"==this.getDom().style.display},_onMouseDown:function(){return!1},_onClick:function(e,t){this.fireEvent("click",e,t)},_fill:function(){var e=this.getDom(),t=V7.getViewportRect();e.style.width=t.width+"px",e.style.height=t.height+"px"}},S7.inherits(W7,U7),function(){function n(e,t){for(var n=0;n<o.length;n++){var i=o[n];if(!i.isHidden()&&!1!==i.queryAutoHide(t)){if(e&&/scroll/gi.test(e.type)&&"edui-wordpastepop"==i.className)return;i.hide()}}o.length&&i.editor.fireEvent("afterhidepop")}var e=t.editor.utils,a=t.editor.ui.uiUtils,s=t.editor.dom.domUtils,l=t.editor.ui.UIBase,i=t.editor.ui.Popup=function(e){this.initOptions(e),this.initPopup()},o=[];i.postHide=n;var d=["edui-anchor-topleft","edui-anchor-topright","edui-anchor-bottomleft","edui-anchor-bottomright"];i.prototype={SHADOW_RADIUS:5,content:null,_hidden:!1,autoRender:!0,canSideLeft:!0,canSideUp:!0,initPopup:function(){this.initUIBase(),o.push(this)},getHtmlTpl:function(){return'<div id="##" class="edui-popup %%" onmousedown="return false;"> <div id="##_body" class="edui-popup-body"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-popup-content">'+this.getContentHtmlTpl()+"  </div> </div></div>"},getContentHtmlTpl:function(){return this.content?"string"==typeof this.content?this.content:this.content.renderHtml():""},_UIBase_postRender:l.prototype.postRender,postRender:function(){if(this.content instanceof l&&this.content.postRender(),this.captureWheel&&!this.captured){this.captured=!0;var e=(document.documentElement.clientHeight||document.body.clientHeight)-80,t=this.getDom().offsetHeight,n=a.getClientRect(this.combox.getDom()).top,i=this.getDom("content"),o=this.getDom("body").getElementsByTagName("iframe"),r=this;for(o.length&&(o=o[0]);e<n+t;)t-=30;i.style.height=t+"px",o&&(o.style.height=t+"px"),window.XMLHttpRequest?s.on(i,"onmousewheel"in document.body?"mousewheel":"DOMMouseScroll",function(e){e.preventDefault?e.preventDefault():e.returnValue=!1,i.scrollTop=e.wheelDelta?i.scrollTop-e.wheelDelta/120*60:i.scrollTop-e.detail/-3*60}):s.on(this.getDom(),"mousewheel",function(e){e.returnValue=!1,r.getDom("content").scrollTop-=e.wheelDelta/120*60})}this.fireEvent("postRenderAfter"),this.hide(!0),this._UIBase_postRender()},_doAutoRender:function(){!this.getDom()&&this.autoRender&&this.render()},mesureSize:function(){var e=this.getDom("content");return a.getClientRect(e)},fitSize:function(){if(this.captureWheel&&this.sized)return this.__size;this.sized=!0;var e=this.getDom("body");e.style.width="",e.style.height="";var t=this.mesureSize();if(this.captureWheel){e.style.width=-(-20-t.width)+"px";var n=parseInt(this.getDom("content").style.height,10);!window.isNaN(n)&&(t.height=n)}else e.style.width=t.width+"px";return e.style.height=t.height+"px",this.__size=t,this.captureWheel&&(this.getDom("content").style.overflow="auto"),t},showAnchor:function(e,t){this.showAnchorRect(a.getClientRect(e),t)},showAnchorRect:function(e,n,i){this._doAutoRender();var o,r=a.getViewportRect();this.getDom().style.visibility="hidden",this._show(),i=this.fitSize(),e=n?(n=this.canSideLeft&&e.right+i.width>r.right&&e.left>i.width,r=this.canSideUp&&e.top+i.height>r.bottom&&e.bottom>i.height,o=n?e.left-i.width:e.right,r?e.bottom-i.height:e.top):(n=this.canSideLeft&&e.right+i.width>r.right&&e.left>i.width,r=this.canSideUp&&e.top+i.height>r.bottom&&e.bottom>i.height,o=n?e.right-i.width:e.left,r?e.top-i.height:e.bottom),i=this.getDom(),a.setViewportOffset(i,{left:o,top:e}),s.removeClasses(i,d),i.className+=" "+d[2*(r?1:0)+(n?1:0)],this.editor&&(i.style.zIndex=1*this.editor.container.style.zIndex+10,t.editor.ui.uiUtils.getFixedLayer().style.zIndex=i.style.zIndex-1),this.getDom().style.visibility="visible"},showAt:function(e){var t=e.left;e=e.top,this.showAnchorRect({left:t,top:e,right:t,bottom:e,height:0,width:0},!1,!0)},_show:function(){this._hidden&&(this.getDom().style.display="",this._hidden=!1,this.fireEvent("show"))},isHidden:function(){return this._hidden},show:function(){this._doAutoRender(),this._show()},hide:function(e){!this._hidden&&this.getDom()&&(this.getDom().style.display="none",this._hidden=!0,e||this.fireEvent("hide"))},queryAutoHide:function(e){return!e||!a.contains(this.getDom(),e)}},e.inherits(i,l),s.on(document,"mousedown",function(e){n(e,e.target||e.srcElement)}),s.on(window,"scroll",function(e,t){n(e,t)})}(),function(){var e=t.editor.utils,n=t.editor.ui.UIBase,i=t.editor.ui.ColorPicker=function(e){this.initOptions(e),this.noColorText=this.noColorText||this.editor.getLang("clearColor"),this.initUIBase()};i.prototype={getHtmlTpl:function(){for(var e=this.editor,t='<div id="##" class="edui-colorpicker %%"><div class="edui-colorpicker-topbar edui-clearfix"><div unselectable="on" id="##_preview" class="edui-colorpicker-preview"></div><div unselectable="on" class="edui-colorpicker-nocolor" onclick="$$._onPickNoColor(event, this);">'+this.noColorText+'</div></div><table  class="edui-box" style="border-collapse: collapse;" onmouseover="$$._onTableOver(event, this);" onmouseout="$$._onTableOut(event, this);" onclick="return $$._onTableClick(event, this);" cellspacing="0" cellpadding="0"><tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;padding-top: 2px"><td colspan="10">'+e.getLang("themeColor")+'</td> </tr><tr class="edui-colorpicker-tablefirstrow" >',n=0;n<o.length;n++)n&&0==n%10&&(t+="</tr>"+(60==n?'<tr style="border-bottom: 1px solid #ddd;font-size: 13px;line-height: 25px;color:#39C;"><td colspan="10">'+e.getLang("standardColor")+"</td></tr>":"")+"<tr"+(60==n?' class="edui-colorpicker-tablefirstrow"':"")+">"),t+=n<70?'<td style="padding: 0 2px;"><a hidefocus title="'+o[n]+'" onclick="return false;" href="javascript:" unselectable="on" class="edui-box edui-colorpicker-colorcell" data-color="#'+o[n]+'" style="background-color:#'+o[n]+";border:solid #ccc;"+(n<10||60<=n?"border-width:1px;":10<=n&&n<20?"border-width:1px 1px 0 1px;":"border-width:0 1px 0 1px;")+'"></a></td>':"";return t+"</tr></table></div>"},_onTableClick:function(e){(e=(e.target||e.srcElement).getAttribute("data-color"))&&this.fireEvent("pickcolor",e)},_onTableOver:function(e){(e=(e.target||e.srcElement).getAttribute("data-color"))&&(this.getDom("preview").style.backgroundColor=e)},_onTableOut:function(){this.getDom("preview").style.backgroundColor=""},_onPickNoColor:function(){this.fireEvent("picknocolor")}},e.inherits(i,n);var o="ffffff 000000 eeece1 1f497d 4f81bd c0504d 9bbb59 8064a2 4bacc6 f79646 f2f2f2 7f7f7f ddd9c3 c6d9f0 dbe5f1 f2dcdb ebf1dd e5e0ec dbeef3 fdeada d8d8d8 595959 c4bd97 8db3e2 b8cce4 e5b9b7 d7e3bc ccc1d9 b7dde8 fbd5b5 bfbfbf 3f3f3f 938953 548dd4 95b3d7 d99694 c3d69b b2a2c7 92cddc fac08f a5a5a5 262626 494429 17365d 366092 953734 76923c 5f497a 31859b e36c09 7f7f7f 0c0c0c 1d1b10 0f243e 244061 632423 4f6128 3f3151 205867 974806 c00000 ff0000 ffc000 ffff00 92d050 00b050 00b0f0 0070c0 002060 7030a0 ".split(" ")}(),Z8=t.editor.utils,$8=t.editor.ui.uiUtils,_8=t.editor.ui.UIBase,a9=t.editor.ui.TablePicker=function(e){this.initOptions(e),this.initTablePicker()},a9.prototype={defaultNumRows:10,defaultNumCols:10,maxNumRows:20,maxNumCols:20,numRows:10,numCols:10,lengthOfCellSide:22,initTablePicker:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-tablepicker %%"><div class="edui-tablepicker-body"><div class="edui-infoarea"><span id="##_label" class="edui-label"></span></div><div class="edui-pickarea" onmousemove="$$._onMouseMove(event, this);" onmouseover="$$._onMouseOver(event, this);" onmouseout="$$._onMouseOut(event, this);" onclick="$$._onClick(event, this);"><div id="##_overlay" class="edui-overlay"></div></div></div></div>'},_UIBase_render:_8.prototype.render,render:function(e){this._UIBase_render(e),this.getDom("label").innerHTML="0"+this.editor.getLang("t_row")+" x 0"+this.editor.getLang("t_col")},_track:function(e,t){var n=this.getDom("overlay").style,i=this.lengthOfCellSide;n.width=e*i+"px",n.height=t*i+"px",this.getDom("label").innerHTML=e+this.editor.getLang("t_col")+" x "+t+this.editor.getLang("t_row"),this.numCols=e,this.numRows=t},_onMouseOver:function(e,t){var n=e.relatedTarget||e.fromElement;$8.contains(t,n)||t===n||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="")},_onMouseOut:function(e,t){var n=e.relatedTarget||e.toElement;$8.contains(t,n)||t===n||(this.getDom("label").innerHTML="0"+this.editor.getLang("t_col")+" x 0"+this.editor.getLang("t_row"),this.getDom("overlay").style.visibility="hidden")},_onMouseMove:function(e,t){this.getDom("overlay");var n=$8.getEventOffset(e),i=this.lengthOfCellSide,o=Math.ceil(n.left/i);n=Math.ceil(n.top/i),this._track(o,n)},_onClick:function(){this.fireEvent("picktable",this.numCols,this.numRows)}},Z8.inherits(a9,_8),s9=t.editor.dom.domUtils,t9=t.editor.ui.uiUtils,u9='onmousedown="$$.Stateful_onMouseDown(event, this);" onmouseup="$$.Stateful_onMouseUp(event, this);"'+(t.editor.browser.ie?' onmouseenter="$$.Stateful_onMouseEnter(event, this);" onmouseleave="$$.Stateful_onMouseLeave(event, this);"':' onmouseover="$$.Stateful_onMouseOver(event, this);" onmouseout="$$.Stateful_onMouseOut(event, this);"'),t.editor.ui.Stateful={alwalysHoverable:!1,target:null,Stateful_init:function(){this._Stateful_dGetHtmlTpl=this.getHtmlTpl,this.getHtmlTpl=this.Stateful_getHtmlTpl},Stateful_getHtmlTpl:function(){return this._Stateful_dGetHtmlTpl().replace(/stateful/g,function(){return u9})},Stateful_onMouseEnter:function(e,t){this.target=t,this.isDisabled()&&!this.alwalysHoverable||(this.addState("hover"),this.fireEvent("over"))},Stateful_onMouseLeave:function(e,t){this.isDisabled()&&!this.alwalysHoverable||(this.removeState("hover"),this.removeState("active"),this.fireEvent("out"))},Stateful_onMouseOver:function(e,t){var n=e.relatedTarget;t9.contains(t,n)||t===n||this.Stateful_onMouseEnter(e,t)},Stateful_onMouseOut:function(e,t){var n=e.relatedTarget;t9.contains(t,n)||t===n||this.Stateful_onMouseLeave(e,t)},Stateful_onMouseDown:function(e,t){this.isDisabled()||this.addState("active")},Stateful_onMouseUp:function(e,t){this.isDisabled()||this.removeState("active")},Stateful_postRender:function(){this.disabled&&!this.hasState("disabled")&&this.addState("disabled")},hasState:function(e){return s9.hasClass(this.getStateDom(),"edui-state-"+e)},addState:function(e){this.hasState(e)||(this.getStateDom().className+=" edui-state-"+e)},removeState:function(e){this.hasState(e)&&s9.removeClasses(this.getStateDom(),["edui-state-"+e])},getStateDom:function(){return this.getDom("state")},isChecked:function(){return this.hasState("checked")},setChecked:function(e){!this.isDisabled()&&e?this.addState("checked"):this.removeState("checked")},isDisabled:function(){return this.hasState("disabled")},setDisabled:function(e){e?(this.removeState("hover"),this.removeState("checked"),this.removeState("active"),this.addState("disabled")):this.removeState("disabled")}},O9=t.editor.utils,P9=t.editor.ui.UIBase,Q9=t.editor.ui.Stateful,R9=t.editor.ui.Button=function(e){if(e.name){var t=e.name,n=e.cssRules;e.className||(e.className="edui-for-"+t),e.cssRules=".edui-default  .edui-for-"+t+" .edui-icon {"+n+"}"}this.initOptions(e),this.initButton()},R9.prototype={uiName:"button",label:"",title:"",showIcon:!0,showText:!0,cssRules:"",initButton:function(){this.initUIBase(),this.Stateful_init(),this.cssRules&&O9.cssRule("edui-customize-"+this.name+"-style",this.cssRules)},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div id="##_state" stateful><div class="%%-wrap"><div id="##_body" unselectable="on" '+(this.title?'title="'+this.title+'"':"")+' class="%%-body" onmousedown="return $$._onMouseDown(event, this);" onclick="return $$._onClick(event, this);">'+(this.showIcon?'<div class="edui-box edui-icon"></div>':"")+(this.showText?'<div class="edui-box edui-label">'+this.label+"</div>":"")+"</div></div></div></div>"},postRender:function(){this.Stateful_postRender(),this.setDisabled(this.disabled)},_onMouseDown:function(e){if("input"==(e=(e=e.target||e.srcElement)&&e.tagName&&e.tagName.toLowerCase())||"object"==e||"object"==e)return!1},_onClick:function(){this.isDisabled()||this.fireEvent("click")},setTitle:function(e){this.getDom("label").innerHTML=e}},O9.inherits(R9,P9),O9.extend(R9.prototype,Q9),X9=t.editor.utils,Y9=t.editor.ui.uiUtils,Z9=t.editor.ui.UIBase,$9=t.editor.ui.Stateful,_9=t.editor.ui.SplitButton=function(e){this.initOptions(e),this.initSplitButton()},_9.prototype={popup:null,uiName:"splitbutton",title:"",initSplitButton:function(){if(this.initUIBase(),this.Stateful_init(),null!=this.popup){var e=this.popup;this.popup=null,this.setPopup(e)}},_UIBase_postRender:Z9.prototype.postRender,postRender:function(){this.Stateful_postRender(),this._UIBase_postRender()},setPopup:function(e){this.popup!==e&&(null!=this.popup&&this.popup.dispose(),e.addListener("show",X9.bind(this._onPopupShow,this)),e.addListener("hide",X9.bind(this._onPopupHide,this)),e.addListener("postrender",X9.bind(function(){e.getDom("body").appendChild(Y9.createElementByHtml('<div id="'+this.popup.id+'_bordereraser" class="edui-bordereraser edui-background" style="width:'+(Y9.getClientRect(this.getDom()).width+20)+'px"></div>')),e.getDom().className+=" "+this.className},this)),this.popup=e)},_onPopupShow:function(){this.addState("opened")},_onPopupHide:function(){this.removeState("opened")},getHtmlTpl:function(){return'<div id="##" class="edui-box %%"><div '+(this.title?'title="'+this.title+'"':"")+' id="##_state" stateful><div class="%%-body"><div id="##_button_body" class="edui-box edui-button-body" onclick="$$._onButtonClick(event, this);"><div class="edui-box edui-icon"></div></div><div class="edui-box edui-splitborder"></div><div class="edui-box edui-arrow" onclick="$$._onArrowClick();"></div></div></div></div>'},showPopup:function(){var e=Y9.getClientRect(this.getDom());e.top-=this.popup.SHADOW_RADIUS,e.height+=this.popup.SHADOW_RADIUS,this.popup.showAnchorRect(e)},_onArrowClick:function(e,t){this.isDisabled()||this.showPopup()},_onButtonClick:function(){this.isDisabled()||this.fireEvent("buttonclick")}},X9.inherits(_9,Z9),X9.extend(_9.prototype,$9,!0),gaa=t.editor.utils,haa=t.editor.ui.uiUtils,iaa=t.editor.ui.ColorPicker,jaa=t.editor.ui.Popup,kaa=t.editor.ui.SplitButton,laa=t.editor.ui.ColorButton=function(e){this.initOptions(e),this.initColorButton()},laa.prototype={initColorButton:function(){var n=this;this.popup=new jaa({content:new iaa({noColorText:n.editor.getLang("clearColor"),editor:n.editor,onpickcolor:function(e,t){n._onPickColor(t)},onpicknocolor:function(e,t){n._onPickNoColor(t)}}),editor:n.editor}),this.initSplitButton()},_SplitButton_postRender:kaa.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.getDom("button_body").appendChild(haa.createElementByHtml('<div id="'+this.id+'_colorlump" class="edui-colorlump"></div>')),this.getDom().className+=" edui-colorbutton"},setColor:function(e){this.color=this.getDom("colorlump").style.backgroundColor=e},_onPickColor:function(e){!1!==this.fireEvent("pickcolor",e)&&(this.setColor(e),this.popup.hide())},_onPickNoColor:function(e){!1!==this.fireEvent("picknocolor")&&this.popup.hide()}},gaa.inherits(laa,kaa),vaa=t.editor.utils,waa=t.editor.ui.Popup,xaa=t.editor.ui.TablePicker,yaa=t.editor.ui.SplitButton,zaa=t.editor.ui.TableButton=function(e){this.initOptions(e),this.initTableButton()},zaa.prototype={initTableButton:function(){var i=this;this.popup=new waa({content:new xaa({editor:i.editor,onpicktable:function(e,t,n){i._onPickTable(t,n)}}),editor:i.editor}),this.initSplitButton()},_onPickTable:function(e,t){!1!==this.fireEvent("picktable",e,t)&&this.popup.hide()}},vaa.inherits(zaa,yaa),Haa=t.editor.utils,Iaa=t.editor.ui.UIBase,Jaa=t.editor.ui.AutoTypeSetPicker=function(e){this.initOptions(e),this.initAutoTypeSetPicker()},Jaa.prototype={initAutoTypeSetPicker:function(){this.initUIBase()},getHtmlTpl:function(){var e=this.editor,t=e.options.autotypeset,n=e.getLang("autoTypeSet"),i="textAlignValue"+e.uid,o="imageBlockLineValue"+e.uid,r="symbolConverValue"+e.uid;return'<div id="##" class="edui-autotypesetpicker %%"><div class="edui-autotypesetpicker-body"><table ><tr><td nowrap><input type="checkbox" name="mergeEmptyline" '+(t.mergeEmptyline?"checked":"")+">"+n.mergeLine+'</td><td colspan="2"><input type="checkbox" name="removeEmptyline" '+(t.removeEmptyline?"checked":"")+">"+n.delLine+'</td></tr><tr><td nowrap><input type="checkbox" name="removeClass" '+(t.removeClass?"checked":"")+">"+n.removeFormat+'</td><td colspan="2"><input type="checkbox" name="indent" '+(t.indent?"checked":"")+">"+n.indent+'</td></tr><tr><td nowrap><input type="checkbox" name="textAlign" '+(t.textAlign?"checked":"")+">"+n.alignment+'</td><td colspan="2" id="'+i+'"><input type="radio" name="'+i+'" value="left" '+(t.textAlign&&"left"==t.textAlign?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+i+'" value="center" '+(t.textAlign&&"center"==t.textAlign?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+i+'" value="right" '+(t.textAlign&&"right"==t.textAlign?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="imageBlockLine" '+(t.imageBlockLine?"checked":"")+">"+n.imageFloat+'</td><td nowrap id="'+o+'"><input type="radio" name="'+o+'" value="none" '+(t.imageBlockLine&&"none"==t.imageBlockLine?"checked":"")+">"+e.getLang("default")+'<input type="radio" name="'+o+'" value="left" '+(t.imageBlockLine&&"left"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyleft")+'<input type="radio" name="'+o+'" value="center" '+(t.imageBlockLine&&"center"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifycenter")+'<input type="radio" name="'+o+'" value="right" '+(t.imageBlockLine&&"right"==t.imageBlockLine?"checked":"")+">"+e.getLang("justifyright")+'</td></tr><tr><td nowrap><input type="checkbox" name="clearFontSize" '+(t.clearFontSize?"checked":"")+">"+n.removeFontsize+'</td><td colspan="2"><input type="checkbox" name="clearFontFamily" '+(t.clearFontFamily?"checked":"")+">"+n.removeFontFamily+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="removeEmptyNode" '+(t.removeEmptyNode?"checked":"")+">"+n.removeHtml+'</td></tr><tr><td nowrap colspan="3"><input type="checkbox" name="pasteFilter" '+(t.pasteFilter?"checked":"")+">"+n.pasteFilter+'</td></tr><tr><td nowrap><input type="checkbox" name="symbolConver" '+(t.bdc2sb||t.tobdc?"checked":"")+">"+n.symbol+'</td><td id="'+r+'"><input type="radio" name="bdc" value="bdc2sb" '+(t.bdc2sb?"checked":"")+">"+n.bdc2sb+'<input type="radio" name="bdc" value="tobdc" '+(t.tobdc?"checked":"")+">"+n.tobdc+'</td><td nowrap align="right"><button >'+n.run+"</button></td></tr></table></div></div>"},_UIBase_render:Iaa.prototype.render},Haa.inherits(Jaa,Iaa),function(){function l(e){for(var t,n={},i=e.getDom(),o=e.editor.uid,r=null,a=(r=null,f.getElementsByTagName(i,"input")),s=a.length-1;t=a[s--];)if("checkbox"==(r=t.getAttribute("type")))if(n[r=t.getAttribute("name")]&&delete n[r],t.checked)if(t=document.getElementById(r+"Value"+o)){if(/input/gi.test(t.tagName))n[r]=t.value;else for(var l,d=(t=t.getElementsByTagName("input")).length-1;l=t[d--];)if(l.checked){n[r]=l.value;break}}else n[r]=!0;else n[r]=!1;else n[t.getAttribute("value")]=t.checked;for(i=f.getElementsByTagName(i,"select"),s=0;o=i[s++];)n[a=o.getAttribute("name")]=n[a]?o.value:"";c.extend(e.editor.options.autotypeset,n),e.editor.setPreferences("autotypeset",n)}var c=t.editor.utils,e=t.editor.ui.Popup,n=t.editor.ui.AutoTypeSetPicker,i=t.editor.ui.SplitButton,o=t.editor.ui.AutoTypeSetButton=function(e){this.initOptions(e),this.initAutoTypeSetButton()};o.prototype={initAutoTypeSetButton:function(){var s=this;this.popup=new e({content:new n({editor:s.editor}),editor:s.editor,hide:function(){!this._hidden&&this.getDom()&&(l(this),this.getDom().style.display="none",this._hidden=!0,this.fireEvent("hide"))}});var t=0;this.popup.addListener("postRenderAfter",function(){var a=this;if(!t){var e=this.getDom();e.getElementsByTagName("button")[0].onclick=function(){l(a),s.editor.execCommand("autotypeset"),a.hide()},f.on(e,"click",function(e){e=e.target||e.srcElement;var t=s.editor.uid;if(e&&"INPUT"==e.tagName){if("imageBlockLine"==e.name||"textAlign"==e.name||"symbolConver"==e.name)for(var n=e.checked,i=document.getElementById(e.name+"Value"+t).getElementsByTagName("input"),o={imageBlockLine:"none",textAlign:"left",symbolConver:"tobdc"},r=0;r<i.length;r++)n?i[r].value==o[e.name]&&(i[r].checked="checked"):i[r].checked=!1;(e.name=="imageBlockLineValue"+t||e.name=="textAlignValue"+t||"bdc"==e.name)&&(e=e.parentNode.previousSibling.getElementsByTagName("input"))&&(e[0].checked=!0),l(a)}}),t=1}}),this.initSplitButton()}},c.inherits(o,i)}(),qba=t.editor.utils,rba=t.editor.ui.Popup,sba=t.editor.ui.Stateful,tba=t.editor.ui.UIBase,uba=t.editor.ui.CellAlignPicker=function(e){this.initOptions(e),this.initSelected(),this.initCellAlignPicker()},uba.prototype={initSelected:function(){this.selected&&(this.selectedIndex=3*{top:0,middle:1,bottom:2}[this.selected.valign]+{left:0,center:1,right:2}[this.selected.align])},initCellAlignPicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){for(var e=["left","center","right"],t=null,n=-1,i=[],o=0;o<9;o++)t=this.selectedIndex===o?' class="edui-cellalign-selected" ':"",0==(n=o%3)&&i.push("<tr>"),i.push('<td index="'+o+'" '+t+' stateful><div class="edui-icon edui-'+e[n]+'"></div></td>'),2===n&&i.push("</tr>");return'<div id="##" class="edui-cellalignpicker %%"><div class="edui-cellalignpicker-body"><table onclick="$$._onClick(event);">'+i.join("")+"</table></div></div>"},getStateDom:function(){return this.target},_onClick:function(e){var t=e.target||e.srcElement;/icon/.test(t.className)&&(this.items[t.parentNode.getAttribute("index")].onclick(),rba.postHide(e))},_UIBase_render:tba.prototype.render},qba.inherits(uba,tba),qba.extend(uba.prototype,sba,!0),Fba=t.editor.utils,Gba=t.editor.ui.Stateful,Hba=t.editor.ui.uiUtils,Iba=t.editor.ui.UIBase,Jba=t.editor.ui.PastePicker=function(e){this.initOptions(e),this.initPastePicker()},Jba.prototype={initPastePicker:function(){this.initUIBase(),this.Stateful_init()},getHtmlTpl:function(){return'<div class="edui-pasteicon" onclick="$$._onClick(this)"></div><div class="edui-pastecontainer"><div class="edui-title">'+this.editor.getLang("pasteOpt")+'</div><div class="edui-button"><div title="'+this.editor.getLang("pasteSourceFormat")+'" onclick="$$.format(false)" stateful><div class="edui-richtxticon"></div></div><div title="'+this.editor.getLang("tagFormat")+'" onclick="$$.format(2)" stateful><div class="edui-tagicon"></div></div><div title="'+this.editor.getLang("pasteTextFormat")+'" onclick="$$.format(true)" stateful><div class="edui-plaintxticon"></div></div></div></div></div>'},getStateDom:function(){return this.target},format:function(e){this.editor.ui._isTransfer=!0,this.editor.fireEvent("pasteTransfer",e)},_onClick:function(e){var t=f.getNextDomNode(e),n=Hba.getViewportRect().height,i=Hba.getClientRect(t);t.style.top=i.top+i.height>n?-i.height-e.offsetHeight+"px":"",/hidden/gi.test(f.getComputedStyle(t,"visibility"))?(t.style.visibility="visible",f.addClass(e,"edui-state-opened")):(t.style.visibility="hidden",f.removeClasses(e,"edui-state-opened"))},_UIBase_render:Iba.prototype.render},Fba.inherits(Jba,Iba),Fba.extend(Jba.prototype,Gba,!0),Qba=t.editor.utils,Rba=t.editor.ui.uiUtils,Sba=t.editor.ui.UIBase,Tba=t.editor.ui.Toolbar=function(e){this.initOptions(e),this.initToolbar()},Tba.prototype={items:null,initToolbar:function(){this.items=this.items||[],this.initUIBase()},add:function(e,t){void 0===t?this.items.push(e):this.items.splice(t,0,e)},getHtmlTpl:function(){for(var e=[],t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();return'<div id="##" class="edui-toolbar %%" onselectstart="return false;" onmousedown="return $$._onMouseDown(event, this);">'+e.join("")+"</div>"},postRender:function(){for(var e=this.getDom(),t=0;t<this.items.length;t++)this.items[t].postRender();Rba.makeUnselectable(e)},_onMouseDown:function(e){if("input"==(e=(e=e.target||e.srcElement)&&e.tagName&&e.tagName.toLowerCase())||"object"==e||"object"==e)return!1}},Qba.inherits(Tba,Sba),function(){var e=t.editor.utils,i=t.editor.dom.domUtils,o=t.editor.ui.uiUtils,n=t.editor.ui.UIBase,r=t.editor.ui.Popup,a=t.editor.ui.Stateful,s=t.editor.ui.CellAlignPicker,l=t.editor.ui.Menu=function(e){this.initOptions(e),this.initMenu()},d={renderHtml:function(){return'<div class="edui-menuitem edui-menuseparator"><div class="edui-menuseparator-inner"></div></div>'},postRender:function(){},queryAutoHide:function(){return!0}};l.prototype={items:null,uiName:"menu",initMenu:function(){this.items=this.items||[],this.initPopup(),this.initItems()},initItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];"-"==t?this.items[e]=this.getSeparator():t instanceof c||(t.editor=this.editor,t.theme=this.editor.options.theme,this.items[e]=this.createItem(t))}},getSeparator:function(){return d},createItem:function(e){return e.menu=this,new c(e)},_Popup_getContentHtmlTpl:r.prototype.getContentHtmlTpl,getContentHtmlTpl:function(){if(0==this.items.length)return this._Popup_getContentHtmlTpl();for(var e=[],t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();return'<div class="%%-body">'+e.join("")+"</div>"},_Popup_postRender:r.prototype.postRender,postRender:function(){for(var n=this,e=0;e<this.items.length;e++){var t=this.items[e];t.ownerMenu=this,t.postRender()}i.on(this.getDom(),"mouseover",function(e){e=(e=e||event).relatedTarget||e.fromElement;var t=n.getDom();o.contains(t,e)||t===e||n.fireEvent("over")}),this._Popup_postRender()},queryAutoHide:function(e){if(e){if(o.contains(this.getDom(),e))return!1;for(var t=0;t<this.items.length;t++)if(!1===this.items[t].queryAutoHide(e))return!1}},clearItems:function(){for(var e=0;e<this.items.length;e++){var t=this.items[e];clearTimeout(t._showingTimer),clearTimeout(t._closingTimer),t.subMenu&&t.subMenu.destroy()}this.items=[]},destroy:function(){this.getDom()&&i.remove(this.getDom()),this.clearItems()},dispose:function(){this.destroy()}},e.inherits(l,r);var c=t.editor.ui.MenuItem=function(e){if(this.initOptions(e),this.initUIBase(),this.Stateful_init(),this.subMenu&&!(this.subMenu instanceof l))if(e.className&&-1!=e.className.indexOf("aligntd")){var t=this;this.subMenu.selected=this.editor.queryCommandValue("cellalignment"),this.subMenu=new r({content:new s(this.subMenu),parentMenu:t,editor:t.editor,destroy:function(){this.getDom()&&i.remove(this.getDom())}}),this.subMenu.addListener("postRenderAfter",function(){i.on(this.getDom(),"mouseover",function(){t.addState("opened")})})}else this.subMenu=new l(this.subMenu)};c.prototype={label:"",subMenu:null,ownerMenu:null,uiName:"menuitem",alwalysHoverable:!0,getHtmlTpl:function(){return'<div id="##" class="%%" stateful onclick="$$._onClick(event, this);"><div class="%%-body">'+this.renderLabelHtml()+"</div></div>"},postRender:function(){var n=this;this.addListener("over",function(){n.ownerMenu.fireEvent("submenuover",n),n.subMenu&&n.delayShowSubMenu()}),this.subMenu&&(this.getDom().className+=" edui-hassubmenu",this.subMenu.render(),this.addListener("out",function(){n.delayHideSubMenu()}),this.subMenu.addListener("over",function(){clearTimeout(n._closingTimer),n._closingTimer=null,n.addState("opened")}),this.ownerMenu.addListener("hide",function(){n.hideSubMenu()}),this.ownerMenu.addListener("submenuover",function(e,t){t!==n&&n.delayHideSubMenu()}),this.subMenu._bakQueryAutoHide=this.subMenu.queryAutoHide,this.subMenu.queryAutoHide=function(e){return(!e||!o.contains(n.getDom(),e))&&this._bakQueryAutoHide(e)}),this.getDom().style.tabIndex="-1",o.makeUnselectable(this.getDom()),this.Stateful_postRender()},delayShowSubMenu:function(){var e=this;e.isDisabled()||(e.addState("opened"),clearTimeout(e._showingTimer),clearTimeout(e._closingTimer),e._closingTimer=null,e._showingTimer=setTimeout(function(){e.showSubMenu()},250))},delayHideSubMenu:function(){var e=this;e.isDisabled()||(e.removeState("opened"),clearTimeout(e._showingTimer),e._closingTimer||(e._closingTimer=setTimeout(function(){e.hasState("opened")||e.hideSubMenu(),e._closingTimer=null},400)))},renderLabelHtml:function(){return'<div class="edui-arrow"></div><div class="edui-box edui-icon"></div><div class="edui-box edui-label %%-label">'+(this.label||"")+"</div>"},getStateDom:function(){return this.getDom()},queryAutoHide:function(e){if(this.subMenu&&this.hasState("opened"))return this.subMenu.queryAutoHide(e)},_onClick:function(e,t){this.hasState("disabled")||!1!==this.fireEvent("click",e,t)&&(this.subMenu?this.showSubMenu():r.postHide(e))},showSubMenu:function(){var e=o.getClientRect(this.getDom());e.right-=5,e.left+=2,e.width-=7,e.top-=4,e.bottom+=4,e.height+=8,this.subMenu.showAnchorRect(e,!0,!0)},hideSubMenu:function(){this.subMenu.hide()}},e.inherits(c,n),e.extend(c.prototype,a,!0)}(),Lca=t.editor.utils,Mca=t.editor.ui.uiUtils,Nca=t.editor.ui.Menu,Oca=t.editor.ui.SplitButton,Pca=t.editor.ui.Combox=function(e){this.initOptions(e),this.initCombox()},Pca.prototype={uiName:"combox",onbuttonclick:function(){this.showPopup()},initCombox:function(){var e=this;this.items=this.items||[];for(var t=0;t<this.items.length;t++){var n=this.items[t];n.uiName="listitem",n.index=t,n.onclick=function(){e.selectByIndex(this.index)}}this.popup=new Nca({items:this.items,uiName:"list",editor:this.editor,captureWheel:!0,combox:this}),this.initSplitButton()},_SplitButton_postRender:Oca.prototype.postRender,postRender:function(){this._SplitButton_postRender(),this.setLabel(this.label||""),this.setValue(this.initValue||"")},showPopup:function(){var e=Mca.getClientRect(this.getDom());e.top+=1,--e.bottom,e.height-=2,this.popup.showAnchorRect(e)},getValue:function(){return this.value},setValue:function(e){var t=this.indexByValue(e);this.value=-1!=t?(this.selectedIndex=t,this.setLabel(this.items[t].label),this.items[t].value):(this.selectedIndex=-1,this.setLabel(this.getLabelForUnknowValue(e)),e)},setLabel:function(e){this.label=this.getDom("button_body").innerHTML=e},getLabelForUnknowValue:function(e){return e},indexByValue:function(e){for(var t=0;t<this.items.length;t++)if(e==this.items[t].value)return t;return-1},getItem:function(e){return this.items[e]},selectByIndex:function(e){e<this.items.length&&!1!==this.fireEvent("select",e)&&(this.selectedIndex=e,this.value=this.items[e].value,this.setLabel(this.items[e].label))}},Lca.inherits(Pca,Oca),bda=t.editor.utils,cda=t.editor.dom.domUtils,dda=t.editor.ui.uiUtils,eda=t.editor.ui.Mask,fda=t.editor.ui.UIBase,gda=t.editor.ui.Button,hda=t.editor.ui.Dialog=function(e){if(e.name){var t=e.name,n=e.cssRules;e.className||(e.className="edui-for-"+t),n&&(e.cssRules=".edui-default .edui-for-"+t+" .edui-dialog-content  {"+n+"}")}this.initOptions(bda.extend({autoReset:!0,draggable:!0,onok:function(){},oncancel:function(){},onclose:function(e,t){return t?this.onok():this.oncancel()},holdScroll:!1},e)),this.initDialog()},hda.prototype={draggable:!1,uiName:"dialog",initDialog:function(){var e=this,t=this.editor.options.theme;if(this.cssRules&&bda.cssRule("edui-customize-"+this.name+"-style",this.cssRules),this.initUIBase(),this.modalMask=ida||(ida=new eda({className:"edui-dialog-modalmask",theme:t,onclick:function(){kda&&kda.close(!1)}})),this.dragMask=jda||(jda=new eda({className:"edui-dialog-dragmask",theme:t})),this.closeButton=new gda({className:"edui-dialog-closebutton",title:e.closeDialog,theme:t,onclick:function(){e.close(!1)}}),this.fullscreen&&this.initResizeEvent(),this.buttons)for(t=0;t<this.buttons.length;t++)this.buttons[t]instanceof gda||(this.buttons[t]=new gda(bda.extend(this.buttons[t],{editor:this.editor},!0)))},initResizeEvent:function(){var r=this;cda.on(window,"resize",function(){r._hidden||void 0===r._hidden||(r.__resizeTimer&&window.clearTimeout(r.__resizeTimer),r.__resizeTimer=window.setTimeout(function(){r.__resizeTimer=null;var e=r.getDom(),t=r.getDom("content"),n=UE.ui.uiUtils.getClientRect(e),i=UE.ui.uiUtils.getClientRect(t),o=dda.getViewportRect();t.style.width=o.width-n.width+i.width+"px",t.style.height=o.height-n.height+i.height+"px",e.style.width=o.width+"px",e.style.height=o.height+"px",r.fireEvent("resize")},100))})},fitSize:function(){var e=this.getDom("body"),t=this.mesureSize();return e.style.width=t.width+"px",e.style.height=t.height+"px",t},safeSetOffset:function(e){var t=this.getDom(),n=dda.getViewportRect(),i=dda.getClientRect(t),o=e.left;o+i.width>n.right&&(o=n.right-i.width),(e=e.top)+i.height>n.bottom&&(e=n.bottom-i.height),t.style.left=Math.max(o,0)+"px",t.style.top=Math.max(e,0)+"px"},showAtCenter:function(){var e=dda.getViewportRect();if(this.fullscreen){var t=this.getDom(),n=this.getDom("content");t.style.display="block";var i=UE.ui.uiUtils.getClientRect(t),o=UE.ui.uiUtils.getClientRect(n);t.style.left="-100000px",n.style.width=e.width-i.width+o.width+"px",n.style.height=e.height-i.height+o.height+"px",t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.left=0,this._originalContext={html:{overflowX:document.documentElement.style.overflowX,overflowY:document.documentElement.style.overflowY},body:{overflowX:document.body.style.overflowX,overflowY:document.body.style.overflowY}},document.documentElement.style.overflowX="hidden",document.documentElement.style.overflowY="hidden",document.body.style.overflowX="hidden",document.body.style.overflowY="hidden"}else this.getDom().style.display="",n=this.fitSize(),i=0|this.getDom("titlebar").offsetHeight,t=e.width/2-n.width/2,e=e.height/2-(n.height-i)/2-i,n=this.getDom(),this.safeSetOffset({left:Math.max(0|t,0),top:Math.max(0|e,0)}),cda.hasClass(n,"edui-state-centered")||(n.className+=" edui-state-centered");this._show()},getContentHtml:function(){var e="";return"string"==typeof this.content?e=this.content:this.iframeUrl&&(e='<span id="'+this.id+'_contmask" class="dialogcontmask"></span><iframe id="'+this.id+'_iframe" class="%%-iframe" height="100%" width="100%" frameborder="0" src="'+this.iframeUrl+'"></iframe>'),e},getHtmlTpl:function(){var e="";if(this.buttons){e=[];for(var t=0;t<this.buttons.length;t++)e[t]=this.buttons[t].renderHtml();e='<div class="%%-foot"><div id="##_buttons" class="%%-buttons">'+e.join("")+"</div></div>"}return'<div id="##" class="%%"><div '+(this.fullscreen?'class="%%-wrap edui-dialog-fullscreen-flag"':'class="%%"')+'><div id="##_body" class="%%-body"><div class="%%-shadow"></div><div id="##_titlebar" class="%%-titlebar"><div class="%%-draghandle" onmousedown="$$._onTitlebarMouseDown(event, this);"><span class="%%-caption">'+(this.title||"")+"</span></div>"+this.closeButton.renderHtml()+'</div><div id="##_content" class="%%-content">'+(this.autoReset?"":this.getContentHtml())+"</div>"+e+"</div></div></div>"},postRender:function(){this.modalMask.getDom()||(this.modalMask.render(),this.modalMask.hide()),this.dragMask.getDom()||(this.dragMask.render(),this.dragMask.hide());var e=this;if(this.addListener("show",function(){e.modalMask.show(this.getDom().style.zIndex-2)}),this.addListener("hide",function(){e.modalMask.hide()}),this.buttons)for(var t=0;t<this.buttons.length;t++)this.buttons[t].postRender();cda.on(window,"resize",function(){setTimeout(function(){e.isHidden()||e.safeSetOffset(dda.getClientRect(e.getDom()))})}),this._hide()},mesureSize:function(){var e=this.getDom("body"),t=dda.getClientRect(this.getDom("content")).width;return e.style.width=t,dda.getClientRect(e)},_onTitlebarMouseDown:function(e,t){if(this.draggable){var n;dda.getViewportRect();var i=this;dda.startDrag(e,{ondragstart:function(){n=dda.getClientRect(i.getDom()),i.getDom("contmask").style.visibility="visible",i.dragMask.show(i.getDom().style.zIndex-1)},ondragmove:function(e,t){i.safeSetOffset({left:n.left+e,top:n.top+t})},ondragstop:function(){i.getDom("contmask").style.visibility="hidden",cda.removeClasses(i.getDom(),["edui-state-centered"]),i.dragMask.hide()}})}},reset:function(){this.getDom("content").innerHTML=this.getContentHtml(),this.fireEvent("dialogafterreset")},_show:function(){this._hidden&&(this.getDom().style.display="",this.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*this.editor.container.style.zIndex+10),this._hidden=!1,this.fireEvent("show"),t.editor.ui.uiUtils.getFixedLayer().style.zIndex=this.getDom().style.zIndex-4)},isHidden:function(){return this._hidden},_hide:function(){if(!this._hidden){var e=this.getDom();e.style.display="none",e.style.zIndex="",e.style.width="",e.style.height="",this._hidden=!0,this.fireEvent("hide")}},open:function(){if(this.autoReset)try{this.reset()}catch(e){this.render(),this.open()}if(this.showAtCenter(),this.iframeUrl)try{this.getDom("iframe").focus()}catch(e){}kda=this},_onCloseButtonClick:function(e,t){this.close(!1)},close:function(e){if(!1!==this.fireEvent("close",e)){this.fullscreen&&(document.documentElement.style.overflowX=this._originalContext.html.overflowX,document.documentElement.style.overflowY=this._originalContext.html.overflowY,document.body.style.overflowX=this._originalContext.body.overflowX,document.body.style.overflowY=this._originalContext.body.overflowY,delete this._originalContext),this._hide(),e=this.getDom("content");var t=this.getDom("iframe");e&&t&&((t=t.contentDocument||t.contentWindow.document)&&(t.body.innerHTML=""),cda.remove(e))}}},bda.inherits(hda,fda),cea=t.editor.utils,dea=t.editor.ui.Menu,eea=t.editor.ui.SplitButton,fea=t.editor.ui.MenuButton=function(e){this.initOptions(e),this.initMenuButton()},fea.prototype={initMenuButton:function(){var t=this;this.uiName="menubutton",this.popup=new dea({items:t.items,className:t.className,editor:t.editor}),this.popup.addListener("show",function(){for(var e=0;e<this.items.length;e++)this.items[e].removeState("checked"),this.items[e].value==t._value&&(this.items[e].addState("checked"),this.value=t._value)}),this.initSplitButton()},setValue:function(e){this._value=e}},cea.inherits(fea,eea),kea=t.editor.utils,lea=t.editor.ui.Popup,mea=t.editor.ui.SplitButton,nea=t.editor.ui.MultiMenuPop=function(e){this.initOptions(e),this.initMultiMenu()},nea.prototype={initMultiMenu:function(){var e=this;this.popup=new lea({content:"",editor:e.editor,iframe_rendered:!1,onshow:function(){this.iframe_rendered||(this.iframe_rendered=!0,this.getDom("content").innerHTML='<iframe id="'+e.id+'_iframe" src="'+e.iframeUrl+'" frameborder="0"></iframe>',e.editor.container.style.zIndex&&(this.getDom().style.zIndex=1*e.editor.container.style.zIndex+1))}}),this.onbuttonclick=function(){this.showPopup()},this.initSplitButton()}},kea.inherits(nea,mea),function(){function n(e){if(!c.findParent(e.target||e.srcElement,function(e){return c.hasClass(e,"edui-shortcutmenu")||c.hasClass(e,"edui-popup")},!0)){e=0;for(var t;t=a[e++];)t.hide()}}var l,i=t.editor.ui,e=i.UIBase,d=i.uiUtils,o=t.editor.utils,c=t.editor.dom.domUtils,a=[],u=!1,s=i.ShortCutMenu=function(e){this.initOptions(e),this.initShortCutMenu()};s.postHide=n,s.prototype={isHidden:!0,SPACE:5,initShortCutMenu:function(){this.items=this.items||[],this.initUIBase(),this.initItems(),this.initEvent(),a.push(this)},initEvent:function(){var s=this,e=s.editor.document;c.on(e,"mousemove",function(e){if(!1===s.isHidden&&!s.getSubMenuMark()&&"contextmenu"!=s.eventType){var t=!0,n=s.getDom(),i=n.offsetWidth/2+s.SPACE,o=n.offsetHeight/2,r=Math.abs(e.screenX-s.left),a=Math.abs(e.screenY-s.top);clearTimeout(l),l=setTimeout(function(){0<a&&a<o?s.setOpacity(n,"1"):o<a&&a<o+70?(s.setOpacity(n,"0.5"),t=!1):o+70<a&&a<o+140&&s.hide(),t&&0<r&&r<i?s.setOpacity(n,"1"):i<r&&r<i+70?s.setOpacity(n,"0.5"):i+70<r&&r<i+140&&s.hide()})}}),r.chrome&&c.on(e,"mouseout",function(e){null!=(e=e.relatedTarget||e.toElement)&&"HTML"!=e.tagName||s.hide()}),s.editor.addListener("afterhidepop",function(){s.isHidden||(u=!0)})},initItems:function(){if(o.isArray(this.items))for(var e=0,t=this.items.length;e<t;e++){var n=this.items[e].toLowerCase();i[n]&&(this.items[e]=new i[n](this.editor),this.items[e].className+=" edui-shortcutsubmenu ")}},setOpacity:function(e,t){r.ie&&r.version<9?e.style.filter="alpha(opacity = "+100*parseFloat(t)+");":e.style.opacity=t},getSubMenuMark:function(){u=!1;for(var e,t=d.getFixedLayer(),n=(t=c.getElementsByTagName(t,"div",function(e){return c.hasClass(e,"edui-shortcutsubmenu edui-popup")}),0);e=t[n++];)"none"!=e.style.display&&(u=!0);return u},show:function(e,t){function n(e){e.left<0&&(e.left=0),e.top<0&&(e.top=0),r.style.cssText="position:absolute;left:"+e.left+"px;top:"+e.top+"px;"}function i(e){e.tagName||(e=e.getDom()),o.left=parseInt(e.style.left),o.top=parseInt(e.style.top),o.top-=r.offsetHeight+15,n(o)}var o={},r=this.getDom(),a=d.getFixedLayer();if(this.eventType=e.type,r.style.cssText="display:block;left:-9999px","contextmenu"==e.type&&t){var s=c.getElementsByTagName(a,"div","edui-contextmenu")[0];s?i(s):this.editor.addListener("aftershowcontextmenu",function(e,t){i(t)})}else(o=d.getViewportOffsetByEvent(e)).top-=r.offsetHeight+this.SPACE,o.left+=this.SPACE+20,n(o),this.setOpacity(r,.2);this.isHidden=!1,this.left=e.screenX+r.offsetWidth/2-this.SPACE,this.top=e.screenY-r.offsetHeight/2-this.SPACE,this.editor&&(r.style.zIndex=1*this.editor.container.style.zIndex+10,a.style.zIndex=r.style.zIndex-1)},hide:function(){this.getDom()&&(this.getDom().style.display="none"),this.isHidden=!0},postRender:function(){if(o.isArray(this.items))for(var e,t=0;e=this.items[t++];)e.postRender()},getHtmlTpl:function(){var e;if(o.isArray(this.items)){e=[];for(var t=0;t<this.items.length;t++)e[t]=this.items[t].renderHtml();e=e.join("")}else e=this.items;return'<div id="##" class="%% edui-toolbar" data-src="shortcutmenu" onmousedown="return false;" onselectstart="return false;" >'+e+"</div>"}},o.inherits(s,e),c.on(document,"mousedown",function(e){n(e)}),c.on(window,"scroll",function(e){n(e)})}(),nfa=t.editor.utils,ofa=t.editor.ui.UIBase,pfa=t.editor.ui.Breakline=function(e){this.initOptions(e),this.initSeparator()},pfa.prototype={uiName:"Breakline",initSeparator:function(){this.initUIBase()},getHtmlTpl:function(){return"<br/>"}},nfa.inherits(pfa,ofa),rfa=t.editor.utils,sfa=t.editor.dom.domUtils,tfa=t.editor.ui.UIBase,ufa=t.editor.ui.Message=function(e){this.initOptions(e),this.initMessage()},ufa.prototype={initMessage:function(){this.initUIBase()},getHtmlTpl:function(){return'<div id="##" class="edui-message %%"> <div id="##_closer" class="edui-message-closer">×</div> <div id="##_body" class="edui-message-body edui-message-type-info"> <iframe style="position:absolute;z-index:-1;left:0;top:0;background-color: transparent;" frameborder="0" width="100%" height="100%" src="about:blank"></iframe> <div class="edui-shadow"></div> <div id="##_content" class="edui-message-content">  </div> </div></div>'},reset:function(e){var t=this;e.keepshow||(clearTimeout(this.timer),t.timer=setTimeout(function(){t.hide()},e.timeout||4e3)),void 0!==e.content&&t.setContent(e.content),void 0!==e.type&&t.setType(e.type),t.show()},postRender:function(){var e=this,t=this.getDom("closer");t&&sfa.on(t,"click",function(){e.hide()})},setContent:function(e){this.getDom("content").innerHTML=e},setType:function(e){e=e||"info";var t=this.getDom("body");t.className=t.className.replace(/edui-message-type-[\w-]+/,"edui-message-type-"+e)},getContent:function(){return this.getDom("content").innerHTML},getType:function(){var e=this.getDom("body").match(/edui-message-type-([\w-]+)/);return e?e[1]:""},show:function(){this.getDom().style.display="block"},hide:function(){var e=this.getDom();e&&(e.style.display="none",e.parentNode&&e.parentNode.removeChild(e))}},rfa.inherits(ufa,tfa),function(){var c=t.editor.utils,u=t.editor.ui,n=u.Dialog;u.buttons={},u.Dialog=function(e){var i=new n(e);return i.addListener("hide",function(){if(i.editor){var e=i.editor;try{if(r.gecko){var t=e.window.scrollY,n=e.window.scrollX;e.body.focus(),e.window.scrollTo(n,t)}else e.focus()}catch(e){}}}),i};for(var e,s={anchor:"~/dialogs/anchor/anchor.html",insertimage:"~/dialogs/image/image.html",link:"~/dialogs/link/link.html",spechars:"~/dialogs/spechars/spechars.html",searchreplace:"~/dialogs/searchreplace/searchreplace.html",map:"~/dialogs/map/map.html",gmap:"~/dialogs/gmap/gmap.html",insertvideo:"~/dialogs/video/video.html",help:"~/dialogs/help/help.html",preview:"~/dialogs/preview/preview.html",emotion:"~/dialogs/emotion/emotion.html",wordimage:"~/dialogs/wordimage/wordimage.html",attachment:"~/dialogs/attachment/attachment.html",insertframe:"~/dialogs/insertframe/insertframe.html",edittip:"~/dialogs/table/edittip.html",edittable:"~/dialogs/table/edittable.html",edittd:"~/dialogs/table/edittd.html",webapp:"~/dialogs/webapp/webapp.html",snapscreen:"~/dialogs/snapscreen/snapscreen.html",scrawl:"~/dialogs/scrawl/scrawl.html",music:"~/dialogs/music/music.html",template:"~/dialogs/template/template.html",background:"~/dialogs/background/background.html",charts:"~/dialogs/charts/charts.html"},i="undo redo formatmatch bold italic underline fontborder touppercase tolowercase strikethrough subscript superscript source indent outdent blockquote pasteplain pagebreak selectall print horizontal removeformat time date unlink insertparagraphbeforetable insertrow insertcol mergeright mergedown deleterow deletecol splittorows splittocols splittocells mergecells deletetable drafts".split(" "),o=0;e=i[o++];)e=e.toLowerCase(),u[e]=function(r){return function(i){var o=new u.Button({className:"edui-for-"+r,title:i.options.labelMap[r]||i.getLang("labelMap."+r)||"",onclick:function(){i.execCommand(r)},theme:i.options.theme,showText:!1});return u.buttons[r]=o,i.addListener("selectionchange",function(e,t,n){-1==(e=i.queryCommandState(r))?(o.setDisabled(!0),o.setChecked(!1)):n||(o.setDisabled(!1),o.setChecked(e))}),o}}(e);u.cleardoc=function(e){var t=new u.Button({className:"edui-for-cleardoc",title:e.options.labelMap.cleardoc||e.getLang("labelMap.cleardoc")||"",theme:e.options.theme,onclick:function(){confirm(e.getLang("confirmClear"))&&e.execCommand("cleardoc")}});return u.buttons.cleardoc=t,e.addListener("selectionchange",function(){t.setDisabled(-1==e.queryCommandState("cleardoc"))}),t};var a;i={justify:["left","right","center","justify"],imagefloat:["none","left","center","right"],directionality:["ltr","rtl"]};for(a in i)!function(a,e){for(var t,n=0;t=e[n++];)!function(r){u[a.replace("float","")+r]=function(i){var o=new u.Button({className:"edui-for-"+a.replace("float","")+r,title:i.options.labelMap[a.replace("float","")+r]||i.getLang("labelMap."+a.replace("float","")+r)||"",theme:i.options.theme,onclick:function(){i.execCommand(a,r)}});return u.buttons[a]=o,i.addListener("selectionchange",function(e,t,n){o.setDisabled(-1==i.queryCommandState(a)),o.setChecked(i.queryCommandValue(a)==r&&!n)}),o}}(t)}(a,i[a]);for(o=0;e=["backcolor","forecolor"][o++];)u[e]=function(i){return function(n){var e=new u.ColorButton({className:"edui-for-"+i,color:"default",title:n.options.labelMap[i]||n.getLang("labelMap."+i)||"",editor:n,onpickcolor:function(e,t){n.execCommand(i,t)},onpicknocolor:function(){n.execCommand(i,"default"),this.setColor("transparent"),this.color="default"},onbuttonclick:function(){n.execCommand(i,this.color)}});return u.buttons[i]=e,n.addListener("selectionchange",function(){e.setDisabled(-1==n.queryCommandState(i))}),e}}(e);for(a in i={noOk:["searchreplace","help","spechars","webapp","preview"],ok:"attachment anchor link insertimage map gmap insertframe wordimage insertvideo insertframe edittip edittable edittd scrawl template music background charts".split(" ")})!function(a,e){for(var t,n=0;t=e[n++];)r.opera&&"searchreplace"===t||function(r){u[r]=function(t,e,n){var i;e=e||(t.options.iframeUrlMap||{})[r]||s[r],n=t.options.labelMap[r]||t.getLang("labelMap."+r)||"",e&&(i=new u.Dialog(c.extend({iframeUrl:t.ui.mapUrl(e),editor:t,className:"edui-for-"+r,title:n,holdScroll:"insertimage"===r,fullscreen:/charts|preview/.test(r),closeDialog:t.getLang("closeDialog")},"ok"==a?{buttons:[{className:"edui-okbutton",label:t.getLang("ok"),editor:t,onclick:function(){i.close(!0)}},{className:"edui-cancelbutton",label:t.getLang("cancel"),editor:t,onclick:function(){i.close(!1)}}]}:{})),t.ui._dialogs[r+"Dialog"]=i);var o=new u.Button({className:"edui-for-"+r,title:n,onclick:function(){if(i)switch(r){case"wordimage":var e=t.execCommand("wordimage");e&&e.length&&(i.render(),i.open());break;case"scrawl":-1!=t.queryCommandState("scrawl")&&(i.render(),i.open());break;default:i.render(),i.open()}},theme:t.options.theme,disabled:"scrawl"==r&&-1==t.queryCommandState("scrawl")||"charts"==r});return u.buttons[r]=o,t.addListener("selectionchange",function(){if(!(r in{edittable:1})){var e=t.queryCommandState(r);o.getDom()&&(o.setDisabled(-1==e),o.setChecked(e))}}),o}}(t.toLowerCase())}(a,i[a]);for(u.snapscreen=function(e,t,n){n=e.options.labelMap.snapscreen||e.getLang("labelMap.snapscreen")||"";var i=new u.Button({className:"edui-for-snapscreen",title:n,onclick:function(){e.execCommand("snapscreen")},theme:e.options.theme});if(u.buttons.snapscreen=i,t=t||(e.options.iframeUrlMap||{}).snapscreen||s.snapscreen){var o=new u.Dialog({iframeUrl:e.ui.mapUrl(t),editor:e,className:"edui-for-snapscreen",title:n,buttons:[{className:"edui-okbutton",label:e.getLang("ok"),editor:e,onclick:function(){o.close(!0)}},{className:"edui-cancelbutton",label:e.getLang("cancel"),editor:e,onclick:function(){o.close(!1)}}]});o.render(),e.ui._dialogs.snapscreenDialog=o}return e.addListener("selectionchange",function(){i.setDisabled(-1==e.queryCommandState("snapscreen"))}),i},u.insertcode=function(i,e,o){e=i.options.insertcode||[],o=i.options.labelMap.insertcode||i.getLang("labelMap.insertcode")||"";var n=[];c.each(e,function(e,t){n.push({label:e,value:t,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" >'+(this.label||"")+"</div>"}})});var r=new u.Combox({editor:i,items:n,onselect:function(e,t){i.execCommand("insertcode",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:o,initValue:o,className:"edui-for-insertcode",indexByValue:function(e){if(e)for(var t,n=0;t=this.items[n];n++)if(-1!=t.value.indexOf(e))return n;return-1}});return u.buttons.insertcode=r,i.addListener("selectionchange",function(e,t,n){n||(-1==i.queryCommandState("insertcode")?r.setDisabled(!0):(r.setDisabled(!1),(e=i.queryCommandValue("insertcode"))?(e&&(e=e.replace(/['"]/g,"").split(",")[0]),r.setValue(e)):r.setValue(o)))}),r},u.fontfamily=function(i,e,t){if(e=i.options.fontfamily||[],t=i.options.labelMap.fontfamily||i.getLang("labelMap.fontfamily")||"",e.length){for(var n,o=0,r=[];n=e[o];o++){var a=i.getLang("fontfamily")[n.name]||"";l=n.label||a,d=n.val,r.push({label:l,value:d,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="font-family:'+c.unhtml(this.value)+'">'+(this.label||"")+"</div>"}})}var s=new u.Combox({editor:i,items:r,onselect:function(e,t){i.execCommand("FontFamily",this.items[t].value)},onbuttonclick:function(){this.showPopup()},title:t,initValue:t,className:"edui-for-fontfamily",indexByValue:function(e){if(e)for(var t,n=0;t=this.items[n];n++)if(-1!=t.value.indexOf(e))return n;return-1}});return u.buttons.fontfamily=s,i.addListener("selectionchange",function(e,t,n){n||(-1==i.queryCommandState("FontFamily")?s.setDisabled(!0):(s.setDisabled(!1),(e=i.queryCommandValue("FontFamily"))&&(e=e.replace(/['"]/g,"").split(",")[0]),s.setValue(e)))}),s}var l,d},u.fontsize=function(i,e,t){if(t=i.options.labelMap.fontsize||i.getLang("labelMap.fontsize")||"",(e=e||i.options.fontsize||[]).length){for(var n=[],o=0;o<e.length;o++){var r=e[o]+"px";n.push({label:r,value:r,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label" style="line-height:1;font-size:'+this.value+'">'+(this.label||"")+"</div>"}})}var a=new u.Combox({editor:i,items:n,title:t,initValue:t,onselect:function(e,t){i.execCommand("FontSize",this.items[t].value)},onbuttonclick:function(){this.showPopup()},className:"edui-for-fontsize"});return u.buttons.fontsize=a,i.addListener("selectionchange",function(e,t,n){n||(-1==i.queryCommandState("FontSize")?a.setDisabled(!0):(a.setDisabled(!1),a.setValue(i.queryCommandValue("FontSize"))))}),a}},u.paragraph=function(i,e,t){if(t=i.options.labelMap.paragraph||i.getLang("labelMap.paragraph")||"",e=i.options.paragraph||[],!c.isEmptyObject(e)){var n,o=[];for(n in e)o.push({value:n,label:e[n]||i.getLang("paragraph")[n],theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><span class="edui-for-'+this.value+'">'+(this.label||"")+"</span></div>"}});var r=new u.Combox({editor:i,items:o,title:t,initValue:t,className:"edui-for-paragraph",onselect:function(e,t){i.execCommand("Paragraph",this.items[t].value)},onbuttonclick:function(){this.showPopup()}});return u.buttons.paragraph=r,i.addListener("selectionchange",function(e,t,n){n||(-1==i.queryCommandState("Paragraph")?r.setDisabled(!0):(r.setDisabled(!1),e=i.queryCommandValue("Paragraph"),-1!=r.indexByValue(e)?r.setValue(e):r.setValue(r.initValue)))}),r}},u.customstyle=function(i){var e=i.options.customstyle||[],t=i.options.labelMap.customstyle||i.getLang("labelMap.customstyle")||"";if(e.length){for(var n,o=i.getLang("customstyle"),r=0,a=[];n=e[r++];)!function(e){var t={};t.label=e.label?e.label:o[e.name],t.style=e.style,t.className=e.className,t.tag=e.tag,a.push({label:t.label,value:t,theme:i.options.theme,renderLabelHtml:function(){return'<div class="edui-label %%-label"><'+t.tag+" "+(t.className?' class="'+t.className+'"':"")+(t.style?' style="'+t.style+'"':"")+">"+t.label+"</"+t.tag+"></div>"}})}(n);var s=new u.Combox({editor:i,items:a,title:t,initValue:t,className:"edui-for-customstyle",onselect:function(e,t){i.execCommand("customstyle",this.items[t].value)},onbuttonclick:function(){this.showPopup()},indexByValue:function(e){for(var t,n=0;t=this.items[n++];)if(t.label==e)return n-1;return-1}});return u.buttons.customstyle=s,i.addListener("selectionchange",function(e,t,n){n||(-1==i.queryCommandState("customstyle")?s.setDisabled(!0):(s.setDisabled(!1),e=i.queryCommandValue("customstyle"),-1!=s.indexByValue(e)?s.setValue(e):s.setValue(s.initValue)))}),s}},u.inserttable=function(i,e,t){t=i.options.labelMap.inserttable||i.getLang("labelMap.inserttable")||"";var n=new u.TableButton({editor:i,title:t,className:"edui-for-inserttable",onpicktable:function(e,t,n){i.execCommand("InsertTable",{numRows:n,numCols:t,border:1})},onbuttonclick:function(){this.showPopup()}});return u.buttons.inserttable=n,i.addListener("selectionchange",function(){n.setDisabled(-1==i.queryCommandState("inserttable"))}),n},u.lineheight=function(n){var e=n.options.lineheight||[];if(e.length){for(var t,i=0,o=[];t=e[i++];)o.push({label:t,value:t,theme:n.options.theme,onclick:function(){n.execCommand("lineheight",this.value)}});var r=new u.MenuButton({editor:n,className:"edui-for-lineheight",title:n.options.labelMap.lineheight||n.getLang("labelMap.lineheight")||"",items:o,onbuttonclick:function(){var e=n.queryCommandValue("LineHeight")||this.value;n.execCommand("LineHeight",e)}});return u.buttons.lineheight=r,n.addListener("selectionchange",function(){var e=n.queryCommandState("LineHeight");if(-1==e)r.setDisabled(!0);else{r.setDisabled(!1);var t=n.queryCommandValue("LineHeight");t&&r.setValue((t+"").replace(/cm/,"")),r.setChecked(e)}}),r}},a=["top","bottom"],i=0;o=a[i++];)!function(a){u["rowspacing"+a]=function(n){var e=n.options["rowspacing"+a]||[];if(!e.length)return null;for(var t,i=0,o=[];t=e[i++];)o.push({label:t,value:t,theme:n.options.theme,onclick:function(){n.execCommand("rowspacing",this.value,a)}});var r=new u.MenuButton({editor:n,className:"edui-for-rowspacing"+a,title:n.options.labelMap["rowspacing"+a]||n.getLang("labelMap.rowspacing"+a)||"",items:o,onbuttonclick:function(){var e=n.queryCommandValue("rowspacing",a)||this.value;n.execCommand("rowspacing",e,a)}});return u.buttons[a]=r,n.addListener("selectionchange",function(){var e=n.queryCommandState("rowspacing",a);if(-1==e)r.setDisabled(!0);else{r.setDisabled(!1);var t=n.queryCommandValue("rowspacing",a);t&&r.setValue((t+"").replace(/%/,"")),r.setChecked(e)}}),r}}(o);for(a=["insertorderedlist","insertunorderedlist"],i=0;o=a[i++];)!function(a){u[a]=function(n){var e,t=n.options[a],i=function(){n.execCommand(a,this.value)},o=[];for(e in t)o.push({label:t[e]||n.getLang()[a][e]||"",value:e,theme:n.options.theme,onclick:i});var r=new u.MenuButton({editor:n,className:"edui-for-"+a,title:n.getLang("labelMap."+a)||"",items:o,onbuttonclick:function(){var e=n.queryCommandValue(a)||this.value;n.execCommand(a,e)}});return u.buttons[a]=r,n.addListener("selectionchange",function(){var e=n.queryCommandState(a);if(-1==e)r.setDisabled(!0);else{r.setDisabled(!1);var t=n.queryCommandValue(a);r.setValue(t),r.setChecked(e)}}),r}}(o);u.fullscreen=function(t,e){e=t.options.labelMap.fullscreen||t.getLang("labelMap.fullscreen")||"";var n=new u.Button({className:"edui-for-fullscreen",title:e,theme:t.options.theme,onclick:function(){t.ui&&t.ui.setFullScreen(!t.ui.isFullScreen()),this.setChecked(t.ui.isFullScreen())}});return u.buttons.fullscreen=n,t.addListener("selectionchange",function(){var e=t.queryCommandState("fullscreen");n.setDisabled(-1==e),n.setChecked(t.ui.isFullScreen())}),n},u.emotion=function(e,t){var n=new u.MultiMenuPop({title:e.options.labelMap.emotion||e.getLang("labelMap.emotion")||"",editor:e,className:"edui-for-emotion",iframeUrl:e.ui.mapUrl(t||(e.options.iframeUrlMap||{}).emotion||s.emotion)});return u.buttons.emotion=n,e.addListener("selectionchange",function(){n.setDisabled(-1==e.queryCommandState("emotion"))}),n},u.autotypeset=function(e){var t=new u.AutoTypeSetButton({editor:e,title:e.options.labelMap.autotypeset||e.getLang("labelMap.autotypeset")||"",className:"edui-for-autotypeset",onbuttonclick:function(){e.execCommand("autotypeset")}});return u.buttons.autotypeset=t,e.addListener("selectionchange",function(){t.setDisabled(-1==e.queryCommandState("autotypeset"))}),t},u.simpleupload=function(i){var o=new u.Button({className:"edui-for-simpleupload",title:i.options.labelMap.simpleupload||i.getLang("labelMap.simpleupload")||"",onclick:function(){},theme:i.options.theme,showText:!1});return u.buttons.simpleupload=o,i.addListener("ready",function(){var e=o.getDom("body").children[0];i.fireEvent("simpleuploadbtnready",e)}),i.addListener("selectionchange",function(e,t,n){-1==(e=i.queryCommandState("simpleupload"))?(o.setDisabled(!0),o.setChecked(!1)):n||(o.setDisabled(!1),o.setChecked(e))}),o}}(),function(){function l(e){this.initOptions(e),this.initEditorUI()}var c=t.editor.utils,n=t.editor.ui.uiUtils,a=t.editor.ui.UIBase,N=t.editor.dom.domUtils,d=[];l.prototype={uiName:"editor",initEditorUI:function(){function n(e,t){e.setOpt({wordCount:!0,maximumWords:1e4,wordCountMsg:e.options.wordCountMsg||e.getLang("wordCountMsg"),wordOverFlowMsg:e.options.wordOverFlowMsg||e.getLang("wordOverFlowMsg")});var n=e.options,i=n.maximumWords,o=n.wordCountMsg,r=n.wordOverFlowMsg,a=t.getDom("wordcount");n.wordCount&&(i<(n=e.getContentLength(!0))?(a.innerHTML=r,e.fireEvent("wordcountoverflow")):a.innerHTML=o.replace("{#leave}",i-n).replace("{#count}",n))}(this.editor.ui=this)._dialogs={},this.initUIBase(),this._initToolbars();var l=this.editor,i=this;l.addListener("ready",function(){l.getDialog=function(e){return l.ui._dialogs[e+"Dialog"]},N.on(l.window,"scroll",function(e){t.editor.ui.Popup.postHide(e)}),l.ui._actualFrameWidth=l.options.initialFrameWidth,UE.browser.ie&&6===UE.browser.version&&l.container.ownerDocument.execCommand("BackgroundImageCache",!1,!0),l.options.elementPathEnabled&&(l.ui.getDom("elementpath").innerHTML='<div class="edui-editor-breadcrumb">'+l.getLang("elementPathTip")+":</div>"),l.options.wordCount&&(N.on(l.document,"click",function(){n(l,i),N.un(l.document,"click",arguments.callee)}),l.ui.getDom("wordcount").innerHTML=l.getLang("wordCountTip")),l.ui._scale(),l.options.scaleEnabled?(l.autoHeightEnabled&&l.disableAutoHeight(),i.enableScale()):i.disableScale(),l.options.elementPathEnabled||l.options.wordCount||l.options.scaleEnabled||(l.ui.getDom("elementpath").style.display="none",l.ui.getDom("wordcount").style.display="none",l.ui.getDom("scale").style.display="none"),l.selection.isFocus()&&l.fireEvent("selectionchange",!1,!0)}),l.addListener("mousedown",function(e,n){t.editor.ui.Popup.postHide(n,n.target||n.srcElement),t.editor.ui.ShortCutMenu.postHide(n)}),l.addListener("delcells",function(){UE.ui.edittip&&new UE.ui.edittip(l),l.getDialog("edittip").open()});var o,e,r=!1;l.addListener("afterpaste",function(){l.queryCommandState("pasteplain")||(t.editor.ui.PastePicker&&(o=new t.editor.ui.Popup({content:new t.editor.ui.PastePicker({editor:l}),editor:l,className:"edui-wordpastepop"})).render(),r=!0)}),l.addListener("afterinserthtml",function(){clearTimeout(e),e=setTimeout(function(){if(o&&(r||l.ui._isTransfer)){if(o.isHidden()){var e=N.createElement(l.document,"span",{style:"line-height:0px;",innerHTML:"\ufeff"});l.selection.getRange().insertNode(e);var t=Y(e,"firstChild","previousSibling");t&&o.showAnchor(3==t.nodeType?t.parentNode:t),N.remove(e)}else o.show();delete l.ui._isTransfer,r=!1}},200)}),l.addListener("contextmenu",function(e,n){t.editor.ui.Popup.postHide(n)}),l.addListener("keydown",function(e,t){o&&o.dispose(t);var n=t.keyCode||t.which;t.altKey&&90==n&&UE.ui.buttons.fullscreen.onclick()}),l.addListener("wordcount",function(e){n(this,i)}),l.addListener("selectionchange",function(){l.options.elementPathEnabled&&i[(-1==l.queryCommandState("elementpath")?"dis":"en")+"ableElementPath"](),l.options.scaleEnabled&&i[(-1==l.queryCommandState("scale")?"dis":"en")+"ableScale"]()});var d=new t.editor.ui.Popup({editor:l,content:"",className:"edui-bubble",_onEditButtonClick:function(){this.hide(),l.ui._dialogs.linkDialog.open()},_onImgEditButtonClick:function(e){this.hide(),l.ui._dialogs[e]&&l.ui._dialogs[e].open()},_onImgSetFloat:function(e){this.hide(),l.execCommand("imagefloat",e)},_setIframeAlign:function(e){var t=d.anchorEl,n=t.cloneNode(!0);switch(e){case-2:n.setAttribute("align","");break;case-1:n.setAttribute("align","left");break;case 1:n.setAttribute("align","right")}t.parentNode.insertBefore(n,t),N.remove(t),d.anchorEl=n,d.showAnchor(d.anchorEl)},_updateIframe:function(){var e=l._iframe=d.anchorEl;N.hasClass(e,"ueditor_baidumap")?(l.selection.getRange().selectNode(e).select(),l.ui._dialogs.mapDialog.open()):l.ui._dialogs.insertframeDialog.open(),d.hide()},_onRemoveButtonClick:function(e){l.execCommand(e),this.hide()},queryAutoHide:function(e){return e&&e.ownerDocument==l.document&&("img"==e.tagName.toLowerCase()||N.findParentByTagName(e,"a",!0))?e!==d.anchorEl:t.editor.ui.Popup.prototype.queryAutoHide.call(this,e)}});d.render(),l.options.imagePopup&&(l.addListener("mouseover",function(e,t){var n=(t=t||window.event).target||t.srcElement;if(l.ui._dialogs.insertframeDialog&&/iframe/gi.test(n.tagName)){var i=d.formatHtml("<nobr>"+l.getLang("property")+': <span onclick=$$._setIframeAlign(-2) class="edui-clickable">'+l.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(-1) class="edui-clickable">'+l.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._setIframeAlign(1) class="edui-clickable">'+l.getLang("justifyright")+'</span>&nbsp;&nbsp; <span onclick="$$._updateIframe( this);" class="edui-clickable">'+l.getLang("modify")+"</span></nobr>");i?(d.getDom("content").innerHTML=i,d.anchorEl=n,d.showAnchor(d.anchorEl)):d.hide()}}),l.addListener("selectionchange",function(e,t){if(t){var n="",i="",o=l.selection.getRange().getClosedNode();i=l.ui._dialogs;if(o&&"IMG"==o.tagName){var r="insertimageDialog";if(-1==o.className.indexOf("edui-faked-video")&&-1==o.className.indexOf("edui-upload-video")||(r="insertvideoDialog"),-1!=o.className.indexOf("edui-faked-webapp")&&(r="webappDialog"),-1!=o.src.indexOf("http://api.map.baidu.com")&&(r="mapDialog"),-1!=o.className.indexOf("edui-faked-music")&&(r="musicDialog"),-1!=o.src.indexOf("http://maps.google.com/maps/api/staticmap")&&(r="gmapDialog"),o.getAttribute("anchorname")&&(r="anchorDialog",n=d.formatHtml("<nobr>"+l.getLang("property")+': <span onclick=$$._onImgEditButtonClick("anchorDialog") class="edui-clickable">'+l.getLang("modify")+"</span>&nbsp;&nbsp;<span onclick=$$._onRemoveButtonClick('anchor') class=\"edui-clickable\">"+l.getLang("delete")+"</span></nobr>")),o.getAttribute("word_img")&&(l.word_img=[o.getAttribute("word_img")],r="wordimageDialog"),(N.hasClass(o,"loadingclass")||N.hasClass(o,"loaderrorclass"))&&(r=""),!i[r])return;i="<nobr>"+l.getLang("property")+': <span onclick=$$._onImgSetFloat("none") class="edui-clickable">'+l.getLang("default")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("left") class="edui-clickable">'+l.getLang("justifyleft")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("right") class="edui-clickable">'+l.getLang("justifyright")+'</span>&nbsp;&nbsp;<span onclick=$$._onImgSetFloat("center") class="edui-clickable">'+l.getLang("justifycenter")+"</span>&nbsp;&nbsp;<span onclick=\"$$._onImgEditButtonClick('"+r+'\');" class="edui-clickable">'+l.getLang("modify")+"</span></nobr>",!n&&(n=d.formatHtml(i))}if(l.ui._dialogs.linkDialog){var a,s=l.queryCommandValue("link");s&&(a=s.getAttribute("_href")||s.getAttribute("href",2))&&(30<(i=a).length&&(i=a.substring(0,20)+"..."),n&&(n+='<div style="height:5px;"></div>'),n+=d.formatHtml("<nobr>"+l.getLang("anthorMsg")+': <a target="_blank" href="'+a+'" title="'+a+'" >'+i+'</a> <span class="edui-clickable" onclick="$$._onEditButtonClick();">'+l.getLang("modify")+'</span> <span class="edui-clickable" onclick="$$._onRemoveButtonClick(\'unlink\');"> '+l.getLang("clear")+"</span></nobr>"),d.showAnchor(s))}n?(d.getDom("content").innerHTML=n,d.anchorEl=o||s,d.showAnchor(d.anchorEl)):d.hide()}}))},_initToolbars:function(){for(var o=this.editor,e=this.toolbars||[],n=[],i=0;i<e.length;i++){for(var r=e[i],a=new t.editor.ui.Toolbar({theme:o.options.theme}),s=0;s<r.length;s++){var l=r[s],d=null;if("string"==typeof l){if("|"==(l=l.toLowerCase())&&(l="Separator"),"||"==l&&(l="Breakline"),t.editor.ui[l]&&(d=new t.editor.ui[l](o)),"fullscreen"==l){n&&n[0]?n[0].items.splice(0,0,d):d&&a.items.splice(0,0,d);continue}}else d=l;d&&d.id&&a.add(d)}n[i]=a}c.each(UE._customizeUI,function(e,t){var n,i;if(e.id&&e.id!=o.key)return!1;(n=e.execFn.call(o,o,t))&&(void 0===(i=e.index)&&(i=a.items.length),a.add(n,i))}),this.toolbars=n},getHtmlTpl:function(){return'<div id="##" class="%%"><div id="##_toolbarbox" class="%%-toolbarbox">'+(this.toolbars.length?'<div id="##_toolbarboxouter" class="%%-toolbarboxouter"><div class="%%-toolbarboxinner">'+this.renderToolbarBoxHtml()+"</div></div>":"")+'<div id="##_toolbarmsg" class="%%-toolbarmsg" style="display:none;"><div id = "##_upload_dialog" class="%%-toolbarmsg-upload" onclick="$$.showWordImageDialog();">'+this.editor.getLang("clickToUpload")+'</div><div class="%%-toolbarmsg-close" onclick="$$.hideToolbarMsg();">x</div><div id="##_toolbarmsg_label" class="%%-toolbarmsg-label"></div><div style="height:0;overflow:hidden;clear:both;"></div></div><div id="##_message_holder" class="%%-messageholder"></div></div><div id="##_iframeholder" class="%%-iframeholder"></div><div id="##_bottombar" class="%%-bottomContainer"><table><tr><td id="##_elementpath" class="%%-bottombar"></td><td id="##_wordcount" class="%%-wordcount"></td><td id="##_scale" class="%%-scale"><div class="%%-icon"></div></td></tr></table></div><div id="##_scalelayer"></div></div>'},showWordImageDialog:function(){this._dialogs.wordimageDialog.open()},renderToolbarBoxHtml:function(){for(var e=[],t=0;t<this.toolbars.length;t++)e.push(this.toolbars[t].renderHtml());return e.join("")},setFullScreen:function(e){var n=this.editor,i=n.container.parentNode.parentNode;if(this._fullscreen!=e){if(this._fullscreen=e,this.editor.fireEvent("beforefullscreenchange",e),t.editor.browser.gecko)var o=n.selection.getRange().createBookmark();if(e){for(;"BODY"!=i.tagName;){var a=t.editor.dom.domUtils.getComputedStyle(i,"position");d.push(a),i.style.position="static",i=i.parentNode}this._bakHtmlOverflow=document.documentElement.style.overflow,this._bakBodyOverflow=document.body.style.overflow,this._bakAutoHeight=this.editor.autoHeightEnabled,this._bakScrollTop=Math.max(document.documentElement.scrollTop,document.body.scrollTop),this._bakEditorContaninerWidth=n.iframe.parentNode.offsetWidth,this._bakAutoHeight&&(n.autoHeightEnabled=!1,this.editor.disableAutoHeight()),document.documentElement.style.overflow="hidden",window.scrollTo(0,window.scrollY),this._bakCssText=this.getDom().style.cssText,this._bakCssText1=this.getDom("iframeholder").style.cssText,n.iframe.parentNode.style.width="",this._updateFullScreen()}else{for(;"BODY"!=i.tagName;)i.style.position=d.shift(),i=i.parentNode;this.getDom().style.cssText=this._bakCssText,this.getDom("iframeholder").style.cssText=this._bakCssText1,this._bakAutoHeight&&(n.autoHeightEnabled=!0,this.editor.enableAutoHeight()),document.documentElement.style.overflow=this._bakHtmlOverflow,document.body.style.overflow=this._bakBodyOverflow,n.iframe.parentNode.style.width=this._bakEditorContaninerWidth+"px",window.scrollTo(0,this._bakScrollTop)}if(r.gecko&&"true"===n.body.contentEditable){var s=document.createElement("input");document.body.appendChild(s),n.body.contentEditable=!1,setTimeout(function(){s.focus(),setTimeout(function(){n.body.contentEditable=!0,n.fireEvent("fullscreenchanged",e),n.selection.getRange().moveToBookmark(o).select(!0),t.editor.dom.domUtils.remove(s),e&&window.scroll(0,0)},0)},0)}"true"===n.body.contentEditable&&(this.editor.fireEvent("fullscreenchanged",e),this.triggerLayout())}},_updateFullScreen:function(){if(this._fullscreen){var e=n.getViewportRect();if(this.getDom().style.cssText="border:0;position:absolute;left:0;top:"+(this.editor.options.topOffset||0)+"px;width:"+e.width+"px;height:"+e.height+"px;z-index:"+(1*this.getDom().style.zIndex+100),n.setViewportOffset(this.getDom(),{left:0,top:this.editor.options.topOffset||0}),this.editor.setHeight(e.height-this.getDom("toolbarbox").offsetHeight-this.getDom("bottombar").offsetHeight-(this.editor.options.topOffset||0),!0),r.gecko)try{window.onresize()}catch(e){}}},_updateElementPath:function(){var e,t=this.getDom("elementpath");if(this.elementPathEnabled&&(e=this.editor.queryCommandValue("elementpath"))){for(var n,i=[],o=0;n=e[o];o++)i[o]=this.formatHtml('<span unselectable="on" onclick="$$.editor.execCommand(&quot;elementpath&quot;, &quot;'+o+'&quot;);">'+n+"</span>");t.innerHTML='<div class="edui-editor-breadcrumb" onmousedown="return false;">'+this.editor.getLang("elementPathTip")+": "+i.join(" &gt; ")+"</div>"}else t.style.display="none"},disableElementPath:function(){var e=this.getDom("elementpath");e.innerHTML="",e.style.display="none",this.elementPathEnabled=!1},enableElementPath:function(){this.getDom("elementpath").style.display="",this.elementPathEnabled=!0,this._updateElementPath()},_scale:function(){function e(){h=N.getXY(s),p||(p=a.options.minFrameHeight+d.offsetHeight+c.offsetHeight),f.style.cssText="position:absolute;left:0;display:;top:0;background-color:#41ABFF;opacity:0.4;filter: Alpha(opacity=40);width:"+s.offsetWidth+"px;height:"+s.offsetHeight+"px;z-index:"+(a.options.zIndex+1),N.on(o,"mousemove",t),N.on(l,"mouseup",n),N.on(o,"mouseup",n)}function t(e){i(),e=e||window.event,b=e.pageX||o.documentElement.scrollLeft+e.clientX,v=e.pageY||o.documentElement.scrollTop+e.clientY,y=b-h.x,C=v-h.y,g<=y&&(m=!0,f.style.width=y+"px"),p<=C&&(m=!0,f.style.height=C+"px")}function n(){m&&(m=!1,a.ui._actualFrameWidth=f.offsetWidth-2,s.style.width=a.ui._actualFrameWidth+"px",a.setHeight(f.offsetHeight-c.offsetHeight-d.offsetHeight-2,!0)),f&&(f.style.display="none"),i(),N.un(o,"mousemove",t),N.un(l,"mouseup",n),N.un(o,"mouseup",n)}function i(){r.ie?o.selection.clear():window.getSelection().removeAllRanges()}var o=document,a=this.editor,s=a.container,l=a.document,d=this.getDom("toolbarbox"),c=this.getDom("bottombar"),u=this.getDom("scale"),f=this.getDom("scalelayer"),m=!1,h=null,p=0,g=a.options.minFrameWidth,b=0,v=0,y=0,C=0,x=this;this.editor.addListener("fullscreenchanged",function(e,t){if(t)x.disableScale();else if(x.editor.options.scaleEnabled){x.enableScale();var n=x.editor.document.createElement("span");x.editor.body.appendChild(n),x.editor.body.style.height=Math.max(N.getXY(n).y,x.editor.iframe.offsetHeight-20)+"px",N.remove(n)}}),this.enableScale=function(){1!=a.queryCommandState("source")&&(u.style.display="",this.scaleEnabled=!0,N.on(u,"mousedown",e))},this.disableScale=function(){u.style.display="none",this.scaleEnabled=!1,N.un(u,"mousedown",e)}},isFullScreen:function(){return this._fullscreen},postRender:function(){a.prototype.postRender.call(this);for(var e=0;e<this.toolbars.length;e++)this.toolbars[e].postRender();var n,i=this,o=t.editor.dom.domUtils,r=function(){clearTimeout(n),n=setTimeout(function(){i._updateFullScreen()})};o.on(window,"resize",r),i.addListener("destroy",function(){o.un(window,"resize",r),clearTimeout(n)})},showToolbarMsg:function(e,t){this.getDom("toolbarmsg_label").innerHTML=e,this.getDom("toolbarmsg").style.display="",t||(this.getDom("upload_dialog").style.display="none")},hideToolbarMsg:function(){this.getDom("toolbarmsg").style.display="none"},mapUrl:function(e){return e?e.replace("~/",this.editor.options.UEDITOR_HOME_URL||""):""},triggerLayout:function(){var e=this.getDom();e.style.zoom="1"==e.style.zoom?"100%":"1"}},c.inherits(l,t.editor.ui.UIBase);var i={};UE.ui.Editor=function(e){var a=new UE.Editor(e);a.options.editor=a,c.loadFile(document,{href:a.options.themePath+a.options.theme+"/css/ueditor.css",tag:"link",type:"text/css",rel:"stylesheet"});var s=a.render;return a.render=function(r){r.constructor===String&&(a.key=r,i[r]=a),c.domReady(function(){function e(){if(a.setOpt({labelMap:a.options.labelMap||a.getLang("labelMap")}),new l(a.options),r&&(r.constructor===String&&(r=document.getElementById(r)),r&&r.getAttribute("name")&&(a.options.textarea=r.getAttribute("name")),r&&/script|textarea/gi.test(r.tagName))){var e=document.createElement("div");r.parentNode.insertBefore(e,r);var t=r.value||r.innerHTML;a.options.initialContent=/^[\t\r\n ]*$/.test(t)?a.options.initialContent:t.replace(/>[\n\r\t]+([ ]{4})+/g,">").replace(/[\n\r\t]+([ ]{4})+</g,"<").replace(/>[\n\r\t]+</g,"><"),r.className&&(e.className=r.className),r.style.cssText&&(e.style.cssText=r.style.cssText),/textarea/i.test(r.tagName)?(a.textarea=r,a.textarea.style.display="none"):r.parentNode.removeChild(r),r.id&&(e.id=r.id,N.removeAttributes(r,"id")),(r=e).innerHTML=""}N.addClass(r,"edui-"+a.options.theme),a.ui.render(r),e=a.options,a.container=a.ui.getDom();t=N.findParents(r,!0);for(var n,i=[],o=0;n=t[o];o++)i[o]=n.style.display,n.style.display="block";for(e.initialFrameWidth?e.minFrameWidth=e.initialFrameWidth:(e.minFrameWidth=e.initialFrameWidth=r.offsetWidth,o=r.style.width,/%$/.test(o)&&(e.initialFrameWidth=o)),e.initialFrameHeight?e.minFrameHeight=e.initialFrameHeight:e.initialFrameHeight=e.minFrameHeight=r.offsetHeight,o=0;n=t[o];o++)n.style.display=i[o];r.style.height&&(r.style.height=""),a.container.style.width=e.initialFrameWidth+(/%$/.test(e.initialFrameWidth)?"":"px"),a.container.style.zIndex=e.zIndex,s.call(a,a.ui.getDom("iframeholder")),a.fireEvent("afteruiready")}a.langIsReady?e():a.addListener("langReady",e)})},a},UE.getEditor=function(e,t){var n=i[e];return n||(n=i[e]=new UE.ui.Editor(t)).render(e),n},UE.delEditor=function(e){var t;(t=i[e])&&(t.key&&t.destroy(),delete i[e])},UE.registerUI=function(e,t,n,i){c.each(e.split(/\s+/),function(e){UE._customizeUI[e]={id:i,execFn:t,index:n}})}}(),UE.registerUI("message",function(e){function o(){var e=l.ui.getDom("toolbarbox");e&&(r.style.top=e.offsetHeight+3+"px"),r.style.zIndex=Math.max(l.options.zIndex,l.iframe.style.zIndex)+1}var r,a=t.editor.ui.Message,s=[],l=e;l.addListener("ready",function(){r=document.getElementById(l.ui.id+"_message_holder"),o(),setTimeout(function(){o()},500)}),l.addListener("showmessage",function(e,t){t=p.isString(t)?{content:t}:t;var n=new a({timeout:t.timeout,type:t.type,content:t.content,keepshow:t.keepshow,editor:l}),i=t.id||"msg_"+(+new Date).toString(36);return n.render(r),(s[i]=n).reset(t),o(),i}),l.addListener("updatemessage",function(e,t,n){n=p.isString(n)?{content:n}:n,(e=s[t]).render(r),e&&e.reset(n)}),l.addListener("hidemessage",function(e,t){var n=s[t];n&&n.hide()})}),UE.registerUI("autosave",function(e){var t=null,n=null;e.on("afterautosave",function(){clearTimeout(t),t=setTimeout(function(){n&&e.trigger("hidemessage",n),n=e.trigger("showmessage",{content:e.getLang("autosave.success"),timeout:2e3})},2e3)})})}()},function(e,t){!function(){window.UEDITOR_HOME_URL="/static/UE/";var e=window.UEDITOR_HOME_URL||t();function t(e,t){return function(e,t){var n=t;/^(\/|\\\\)/.test(t)?n=/^.+?\w(\/|\\\\)/.exec(e)[0]+t.replace(/^(\/|\\\\)/,""):/^[a-z]+:/i.test(t)||(e=e.split("#")[0].split("?")[0].replace(/[^\\\/]+$/,""),n=e+""+t);return function(e){var t=/^[a-z]+:\/\//.exec(e)[0],n=null,i=[];(e=(e=e.replace(t,"").split("?")[0].split("#")[0]).replace(/\\/g,"/").split(/\//))[e.length-1]="";for(;e.length;)".."===(n=e.shift())?i.pop():"."!==n&&i.push(n);return t+i.join("/")}(n)}(e||self.document.URL||self.location.href,t||(n=document.getElementsByTagName("script"))[n.length-1].src);var n}window.UEDITOR_CONFIG={UEDITOR_HOME_URL:e,serverUrl:e+"php/controller.php",toolbars:[["fullscreen","source","|","undo","redo","|","bold","italic","underline","fontborder","strikethrough","superscript","subscript","removeformat","formatmatch","autotypeset","blockquote","pasteplain","|","forecolor","backcolor","insertorderedlist","insertunorderedlist","selectall","cleardoc","|","rowspacingtop","rowspacingbottom","lineheight","|","customstyle","paragraph","fontfamily","fontsize","|","directionalityltr","directionalityrtl","indent","|","justifyleft","justifycenter","justifyright","justifyjustify","|","touppercase","tolowercase","|","link","unlink","anchor","|","imagenone","imageleft","imageright","imagecenter","|","simpleupload","insertimage","emotion","scrawl","insertvideo","music","attachment","map","gmap","insertframe","insertcode","webapp","pagebreak","template","background","|","horizontal","date","time","spechars","snapscreen","wordimage","|","inserttable","deletetable","insertparagraphbeforetable","insertrow","deleterow","insertcol","deletecol","mergecells","mergeright","mergedown","splittocells","splittorows","splittocols","charts","|","print","preview","searchreplace","help","drafts"]]},window.UE={getUEBasePath:t}}()},function(e,t){!function(){UE=window.UE||{};var n=!!window.ActiveXObject,s={removeLastbs:function(e){return e.replace(/\/$/,"")},extend:function(e,t){for(var n=arguments,i=!!this.isBoolean(n[n.length-1])&&n[n.length-1],o=this.isBoolean(n[n.length-1])?n.length-1:n.length,r=1;r<o;r++){var a,s=n[r];for(a in s)i&&e.hasOwnProperty(a)||(e[a]=s[a])}return e},isIE:n,cssRule:n?function(e,t,n){var i,o;if((i=(n=n||document).indexList?n.indexList:n.indexList={})[e])o=n.styleSheets[i[e]];else{if(void 0===t)return"";o=n.createStyleSheet("",n=n.styleSheets.length),i[e]=n}if(void 0===t)return o.cssText;o.cssText=o.cssText+"\n"+(t||"")}:function(e,t,n){var i,o=(n=n||document).getElementsByTagName("head")[0];if(!(i=n.getElementById(e))){if(void 0===t)return"";(i=n.createElement("style")).id=e,o.appendChild(i)}if(void 0===t)return i.innerHTML;""!==t?i.innerHTML=i.innerHTML+"\n"+t:o.removeChild(i)},domReady:function(e){var t=window.document;"complete"===t.readyState?e():n?(function(){if(!t.isReady){try{t.documentElement.doScroll("left")}catch(e){return setTimeout(arguments.callee,0)}e()}}(),window.attachEvent("onload",function(){e()})):(t.addEventListener("DOMContentLoaded",function(){t.removeEventListener("DOMContentLoaded",arguments.callee,!1),e()},!1),window.addEventListener("load",function(){e()},!1))},each:function(e,t,n){if(null!=e)if(e.length===+e.length){for(var i=0,o=e.length;i<o;i++)if(!1===t.call(n,e[i],i,e))return!1}else for(i in e)if(e.hasOwnProperty(i)&&!1===t.call(n,e[i],i,e))return!1},inArray:function(e,n){var i=-1;return this.each(e,function(e,t){if(e===n)return i=t,!1}),i},pushItem:function(e,t){-1==this.inArray(e,t)&&e.push(t)},trim:function(e){return e.replace(/(^[ \t\n\r]+)|([ \t\n\r]+$)/g,"")},indexOf:function(e,n,i){var o=-1;return i=this.isNumber(i)?i:0,this.each(e,function(e,t){if(i<=t&&e===n)return o=t,!1}),o},hasClass:function(e,t){t=t.replace(/(^[ ]+)|([ ]+$)/g,"").replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)if(!new RegExp("\\b"+n+"\\b","i").test(o))return!1;return i-1==t.length},addClass:function(e,t){if(e){t=this.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)new RegExp("\\b"+n+"\\b").test(o)||(o+=" "+n);e.className=s.trim(o)}},removeClass:function(e,t){t=this.isArray(t)?t:this.trim(t).replace(/[ ]{2,}/g," ").split(" ");for(var n,i=0,o=e.className;n=t[i++];)o=o.replace(new RegExp("\\b"+n+"\\b"),"");o=this.trim(o).replace(/[ ]{2,}/g," "),!(e.className=o)&&e.removeAttribute("className")},on:function(e,t,n){var i=this.isArray(t)?t:t.split(/\s+/),o=i.length;if(o)for(;o--;)if(t=i[o],e.addEventListener)e.addEventListener(t,n,!1);else{n._d||(n._d={els:[]});var r=t+n.toString(),a=s.indexOf(n._d.els,e);n._d[r]&&-1!=a||(-1==a&&n._d.els.push(e),n._d[r]||(n._d[r]=function(e){return n.call(e.srcElement,e||window.event)}),e.attachEvent("on"+t,n._d[r]))}e=null},off:function(e,t,n){var i=this.isArray(t)?t:t.split(/\s+/),o=i.length;if(o)for(;o--;)if(t=i[o],e.removeEventListener)e.removeEventListener(t,n,!1);else{var r=t+n.toString();try{e.detachEvent("on"+t,n._d?n._d[r]:n)}catch(e){}n._d&&n._d[r]&&(-1!=(t=s.indexOf(n._d.els,e))&&n._d.els.splice(t,1),0==n._d.els.length&&delete n._d[r])}},loadFile:function(){function a(e,t){try{for(var n,i=0;n=s[i++];)if(n.doc===e&&n.url==(t.src||t.href))return n}catch(e){return null}}var s=[];return function(t,n,e){var i=a(t,n);if(i)i.ready?e&&e():i.funs.push(e);else if(s.push({doc:t,url:n.src||n.href,funs:[e]}),t.body){if(!n.id||!t.getElementById(n.id)){var o=t.createElement(n.tag);for(r in delete n.tag,n)o.setAttribute(r,n[r]);o.onload=o.onreadystatechange=function(){if(!this.readyState||/loaded|complete/.test(this.readyState)){if(0<(i=a(t,n)).funs.length){i.ready=1;for(var e;e=i.funs.pop();)e()}o.onload=o.onreadystatechange=null}},o.onerror=function(){throw Error("The load "+(n.href||n.src)+" fails,check the url")},t.getElementsByTagName("head")[0].appendChild(o)}}else{for(var r in e=[],n)"tag"!=r&&e.push(r+'="'+n[r]+'"');t.write("<"+n.tag+" "+e.join(" ")+" ></"+n.tag+">")}}}()};s.each("String Function Array Number RegExp Object Boolean".split(" "),function(t){s["is"+t]=function(e){return Object.prototype.toString.apply(e)=="[object "+t+"]"}});var i={};UE.parse={register:function(e,t){i[e]=t},load:function(t){s.each(i,function(e){e.call(t,s)})}},uParse=function(n,i){s.domReady(function(){var t;document.querySelectorAll?t=document.querySelectorAll(n):/^#/.test(n)?t=[document.getElementById(n.replace(/^#/,""))]:/^\./.test(n)?(t=[],s.each(document.getElementsByTagName("*"),function(e){e.className&&new RegExp("\\b"+n.replace(/^\./,"")+"\\b","i").test(e.className)&&t.push(e)})):t=document.getElementsByTagName(n),s.each(t,function(e){UE.parse.load(s.extend({root:e,selector:n},i))})})}}(),UE.parse.register("insertcode",function(e){var t=this.root.getElementsByTagName("pre");if(t.length)if("undefined"==typeof XRegExp){var n,i;i=void 0!==this.rootPath?(n=e.removeLastbs(this.rootPath)+"/third-party/SyntaxHighlighter/shCore.js",e.removeLastbs(this.rootPath)+"/third-party/SyntaxHighlighter/shCoreDefault.css"):(n=this.highlightJsUrl,this.highlightCssUrl),e.loadFile(document,{id:"syntaxhighlighter_css",tag:"link",rel:"stylesheet",type:"text/css",href:i}),e.loadFile(document,{id:"syntaxhighlighter_js",src:n,tag:"script",type:"text/javascript",defer:"defer"},function(){e.each(t,function(e){e&&/brush/i.test(e.className)&&SyntaxHighlighter.highlight(e)})})}else e.each(t,function(e){e&&/brush/i.test(e.className)&&SyntaxHighlighter.highlight(e)})}),UE.parse.register("table",function(d){var i=this,t=this.root;if((e=t.getElementsByTagName("table")).length){var o=function(e,t){var n,i=e;for(t=d.isArray(t)?t:[t];i;){for(n=0;n<t.length;n++)if(i.tagName==t[n].toUpperCase())return i;i=i.parentNode}return null},e=this.selector;d.cssRule("table",e+" table.noBorderTable td,"+e+" table.noBorderTable th,"+e+" table.noBorderTable caption{border:1px dashed #ddd !important}"+e+" table.sortEnabled tr.firstRow th,"+e+" table.sortEnabled tr.firstRow td{padding-right:20px; background-repeat: no-repeat;background-position: center right; background-image:url("+this.rootPath+"themes/default/images/sortable.png);}"+e+" table.sortEnabled tr.firstRow th:hover,"+e+" table.sortEnabled tr.firstRow td:hover{background-color: #EEE;}"+e+" table{margin-bottom:10px;border-collapse:collapse;display:table;}"+e+" td,"+e+" th{ background:white; padding: 5px 10px;border: 1px solid #DDD;}"+e+" caption{border:1px dashed #DDD;border-bottom:0;padding:3px;text-align:center;}"+e+" th{border-top:1px solid #BBB;background:#F7F7F7;}"+e+" table tr.firstRow th{border-top:2px solid #BBB;background:#F7F7F7;}"+e+" tr.ue-table-interlace-color-single td{ background: #fcfcfc; }"+e+" tr.ue-table-interlace-color-double td{ background: #f7faff; }"+e+" td p{margin:0;padding:0;}",document),d.each(["td","th","caption"],function(e){(e=t.getElementsByTagName(e)).length&&d.each(e,function(e){e.firstChild||(e.innerHTML="&nbsp;")})}),e=t.getElementsByTagName("table"),d.each(e,function(e){/\bsortEnabled\b/.test(e.className)&&d.on(e,"click",function(e){e=e.target||e.srcElement;var t=o(e,["td","th"]);e=o(e,"table"),t=d.indexOf(e.rows[0].cells,t);var n=e.getAttribute("data-sort-type");if(-1!=t&&(function(e,n,i){for(var t=e.rows,o=[],r="TH"===t[0].cells[0].tagName,a=0,s=t.length;a<s;a++)o[a]=t[a];var l={reversecurrent:function(e,t){return 1},orderbyasc:function(e,t){return(e.innerText||e.textContent).localeCompare(t.innerText||t.textContent)},reversebyasc:function(e,t){return t.innerHTML.localeCompare(e.innerHTML)},orderbynum:function(e,t){var n=e[d.isIE?"innerText":"textContent"].match(/\d+/),i=t[d.isIE?"innerText":"textContent"].match(/\d+/);return n&&(n=+n[0]),i&&(i=+i[0]),(n||0)-(i||0)},reversebynum:function(e,t){var n=e[d.isIE?"innerText":"textContent"].match(/\d+/),i=t[d.isIE?"innerText":"textContent"].match(/\d+/);return n&&(n=+n[0]),i&&(i=+i[0]),(i||0)-(n||0)}};for(e.setAttribute("data-sort-type",i&&"string"==typeof i&&l[i]?i:""),r&&o.splice(0,1),o=function(e,t){t=t||function(e,t){return e.localeCompare(t)};for(var n=0,i=e.length;n<i;n++)for(var o=n,r=e.length;o<r;o++)if(0<t(e[n],e[o])){var a=e[n];e[n]=e[o],e[o]=a}return e}(o,function(e,t){return i&&"function"==typeof i?i.call(this,e.cells[n],t.cells[n]):i&&"number"==typeof i?1:i&&"string"==typeof i&&l[i]?l[i].call(this,e.cells[n],t.cells[n]):l.orderbyasc.call(this,e.cells[n],t.cells[n])}),t=e.ownerDocument.createDocumentFragment(),r=0,s=o.length;r<s;r++)t.appendChild(o[r]);e.getElementsByTagName("tbody")[0].appendChild(t)}(e,t,i.tableSortCompareFn||n),!d.hasClass(e.rows[0],"firstRow"))){for(t=1;t<e.rows.length;t++)d.removeClass(e.rows[t],"firstRow");d.addClass(e.rows[0],"firstRow")}})})}}),UE.parse.register("charts",function(e){function o(e){for(var t,n=e.getAttribute("data-chart"),i={},o=[],r=0;t=e.rows[r];r++){for(var a,s=[],l=0;a=t.cells[l];l++){var d=a.innerText||a.textContent||"";s.push("TH"==a.tagName?d:0|d)}o.push(s)}for(n=n.split(";"),r=0;t=n[r];r++)i[(t=t.split(":"))[0]]=t[1];return{table:e,meta:i,data:o}}function t(){window.Highcharts?n():e.loadFile(document,{src:i+"/third-party/highcharts/highcharts.js",tag:"script",type:"text/javascript",defer:"defer"},function(){n()})}function n(){e.loadFile(document,{src:i+"/dialogs/charts/chart.config.js",tag:"script",type:"text/javascript",defer:"defer"},function(){for(var e=null,t=null,n=null,i=0,o=u.length;i<o;i++){t=[];var r=[],a=(n=[],(e=u[i]).data),s=e.meta;if("1"!=s.dataFormat){var l=0;for(r=a.length;l<r;l++)for(var d=0,c=a[l].length;d<c;d++)n[d]||(n[d]=[]),n[d][l]=a[l][d];a=n}if(n={},s.chartType!=typeConfig.length-1){for(r=a[0].slice(1),l=1,d=void 0;d=a[l];l++)t.push({name:d[0],data:d.slice(1)});n.series=t,n.categories=r,n.title=s.title,n.subTitle=s.subTitle,n.xTitle=s.xTitle,n.yTitle=s.yTitle}else{for(d=[],l=1,r=a[0].length;l<r;l++)d.push([a[0][l],0|a[1][l]]);t[0]={type:"pie",name:s.tip,data:d},n.series=t,n.title=s.title}n.suffix=s.suffix,t=n,n=e.table,(a=document.createElement("div")).className="edui-chart-container",n.parentNode.replaceChild(a,n),n=a,e=typeConfig[e.meta.chartType],$(n).highcharts($.extend({},e,{credits:{enabled:!1},exporting:{enabled:!1},title:{text:t.title,x:-20},subtitle:{text:t.subTitle,x:-20},xAxis:{title:{text:t.xTitle},categories:t.categories},yAxis:{title:{text:t.yTitle},plotLines:[{value:0,width:1,color:"#808080"}]},tooltip:{enabled:!0,valueSuffix:t.suffix},legend:{layout:"vertical",align:"right",verticalAlign:"middle",borderWidth:1},series:t.series}))}})}e.cssRule("chartsContainerHeight",".edui-chart-container { height:"+(this.chartContainerHeight||300)+"px}");var i=this.rootPath,r=this.root,u=null;i&&(r=r?function(e){var t=[];e=e.getElementsByTagName("table");for(var n,i=0;n=e[i];i++)null!==n.getAttribute("data-chart")&&t.push(o(n));return t.length?t:null}(r):null,(u=r)&&(window.jQuery?t():e.loadFile(document,{src:i+"/third-party/jquery-1.10.2.min.js",tag:"script",type:"text/javascript",defer:"defer"},function(){t()})))}),UE.parse.register("background",function(e){for(var t,n,i=this.root.getElementsByTagName("p"),o=0;n=i[o++];)(t=n.getAttribute("data-background"))&&n.parentNode.removeChild(n);t&&e.cssRule("ueditor_background",this.selector+"{"+t+"}",document)}),UE.parse.register("list",function(o){function e(e){var i=this;o.each(e,function(e){if(e.className&&/custom_/i.test(e.className)){var t=e.className.match(/custom_(\w+)/)[1];if("dash"==t||"dot"==t)o.pushItem(r,s+" li.list-"+a[t]+"{background-image:url("+i.liiconpath+a[t]+".gif)}"),o.pushItem(r,s+" ul.custom_"+t+"{list-style:none;} "+s+" ul.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}");else{var n=1;o.each(e.childNodes,function(e){"LI"==e.tagName&&(o.pushItem(r,s+" li.list-"+a[t]+n+"{background-image:url("+i.liiconpath+"list-"+a[t]+n+".gif)}"),n++)}),o.pushItem(r,s+" ol.custom_"+t+"{list-style:none;}"+s+" ol.custom_"+t+" li{background-position:0 3px;background-repeat:no-repeat}")}switch(t){case"cn":o.pushItem(r,s+" li.list-"+t+"-paddingleft-1{padding-left:25px}"),o.pushItem(r,s+" li.list-"+t+"-paddingleft-2{padding-left:40px}"),o.pushItem(r,s+" li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn1":o.pushItem(r,s+" li.list-"+t+"-paddingleft-1{padding-left:30px}"),o.pushItem(r,s+" li.list-"+t+"-paddingleft-2{padding-left:40px}"),o.pushItem(r,s+" li.list-"+t+"-paddingleft-3{padding-left:55px}");break;case"cn2":o.pushItem(r,s+" li.list-"+t+"-paddingleft-1{padding-left:40px}"),o.pushItem(r,s+" li.list-"+t+"-paddingleft-2{padding-left:55px}"),o.pushItem(r,s+" li.list-"+t+"-paddingleft-3{padding-left:68px}");break;case"num":case"num1":o.pushItem(r,s+" li.list-"+t+"-paddingleft-1{padding-left:25px}");break;case"num2":o.pushItem(r,s+" li.list-"+t+"-paddingleft-1{padding-left:35px}"),o.pushItem(r,s+" li.list-"+t+"-paddingleft-2{padding-left:40px}");break;case"dash":o.pushItem(r,s+" li.list-"+t+"-paddingleft{padding-left:35px}");break;case"dot":o.pushItem(r,s+" li.list-"+t+"-paddingleft{padding-left:20px}")}}})}var r=[],a={cn:"cn-1-",cn1:"cn-2-",cn2:"cn-3-",num:"num-1-",num1:"num-2-",num2:"num-3-",dash:"dash",dot:"dot"};o.extend(this,{liiconpath:"http://bs.baidu.com/listicon/",listDefaultPaddingLeft:"20"});var t=(n=this.root).getElementsByTagName("ol"),n=n.getElementsByTagName("ul"),s=this.selector;t.length&&e.call(this,t),n.length&&e.call(this,n),(t.length||n.length)&&(r.push(s+" .list-paddingleft-1{padding-left:0}"),r.push(s+" .list-paddingleft-2{padding-left:"+this.listDefaultPaddingLeft+"px}"),r.push(s+" .list-paddingleft-3{padding-left:"+2*this.listDefaultPaddingLeft+"px}"),o.cssRule("list",s+" ol,"+s+" ul{margin:0;padding:0;}li{clear:both;}"+r.join("\n"),document))}),UE.parse.register("vedio",function(e){var t=this.root.getElementsByTagName("video"),n=this.root.getElementsByTagName("audio");if(document.createElement("video"),document.createElement("audio"),t.length||n.length){n=(t=e.removeLastbs(this.rootPath))+"/third-party/video-js/video.js";var i=t+"/third-party/video-js/video-js.min.css",o=t+"/third-party/video-js/video-js.swf";window.videojs?videojs.autoSetup():(e.loadFile(document,{id:"video_css",tag:"link",rel:"stylesheet",type:"text/css",href:i}),e.loadFile(document,{id:"video_js",src:n,tag:"script",type:"text/javascript"},function(){videojs.options.flash.swf=o,videojs.autoSetup()}))}})},function(e,t,n){e.exports=n(0)(26)},,function(e,t,n){e.exports=n(0)(46)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default={}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=n.n(i),r=n(1),a=n(4),s=n.n(a),l=n(9),d=(n.n(l),n(14)),c=n.n(d),u=n(6),f=n(12),m=(n.n(f),n(13)),h=(n.n(m),n(11)),p=(n.n(h),n(10)),g=(n.n(p),n(7)),b=n(5),v=n(17),y=(n.n(v),n(16)),C=(n.n(y),n(15)),x=(n.n(C),n(18));n.n(x);u.a.beforeEach(function(e,t,n){e.query.accessToken&&!window.sessionStorage.getItem("ak")&&window.sessionStorage.setItem("ak",e.query.accessToken),n()}),o()(b.a).forEach(function(e){r.a.filter(e,b.a[e])}),r.a.use(s.a),new r.a({router:u.a,store:g.a,el:"#app",components:{App:c.a},template:"<App />"})},function(e,t,n){"use strict";t.a=[{path:"/taskManagement",component:function(t){n.e(1).then(function(){var e=[n(42)];t.apply(null,e)}.bind(this)).catch(n.oe)},meta:["奖品管理"]},{path:"/addTask",component:function(t){n.e(0).then(function(){var e=[n(3)];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"addTask",meta:["新增奖品"]},{path:"/updateTask",component:function(t){n.e(0).then(function(){var e=[n(3)];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"updateTask",meta:["编辑奖品"]},{path:"/checkTask",component:function(t){n.e(0).then(function(){var e=[n(3)];t.apply(null,e)}.bind(this)).catch(n.oe)},name:"checkTask",meta:["查看奖品"]}]},function(e,t,n){"use strict";t.a={state:{remark:"",invoiceData:[],billingInfoData:{},invoiceInfoData:[],billingMessage:[],seletInvoiceItem:{}},mutations:{storeRemark:function(e,t){e.remark=t.value},storeInvoiceData:function(e,t){e.invoiceData=t.value},storeBillingInfoData:function(e,t){e.billingInfoData=t.value},storeInvoiceInfoData:function(e,t){e.invoiceInfoData=t.value},storeBillingMessage:function(e,t){e.billingMessage=t.value},storeSelectInvoiceItem:function(e,t){e.seletInvoiceItem=t.value},clearBillingStore:function(e){e.remark="",e.invoiceData=[],e.billingInfoData={},e.invoiceInfoData=[],e.billingMessage=[],e.seletInvoiceItem=[]}}}},function(e,t,n){"use strict";t.a={state:{path:"",queryParams:{}},mutations:{storerouterqueryParams:function(e,t){e.path=t.path,e.queryParams=t.queryParams}}}},function(e,t,n){"use strict";t.a={state:{seletTableItem:{},seletTableRows:[],toTicket:!1,ticketRemark:"",tradeInfo:[],ticketInvoiceData:[],ticketInfoData:{},bookedDate:""},mutations:{storeToticket:function(e,t){e.toTicket=t.value},storeSeletTableItem:function(e,t){e.seletTableItem=t.value},storeSeletTableRows:function(e,t){e.seletTableRows=t.value},storeTicketRemark:function(e,t){e.ticketRemark=t.value},storeTradeInfo:function(e,t){e.tradeInfo=t.value},storeTicketInvoiceData:function(e,t){e.ticketInvoiceData=t.value},storeTicketInfoData:function(e,t){e.ticketInfoData=t.value},storeBookedDate:function(e,t){e.bookedDate=t.value},clearTicketData:function(e){e.ticketRemark="",e.seletTableRows=[],e.toTicket=!1,e.seletTableItem={},e.tradeInfo=[],e.invoiceData=[],e.ticketInvoiceData=[],e.bookedDate=""}}}},,,,function(e,t){},function(e,t){e.exports={render:function(){var e=this.$createElement,t=this._self._c||e;return t("div",{attrs:{id:"app"}},[t("router-view")],1)},staticRenderFns:[]}},,function(e,t,n){e.exports=n(0)(14)},function(e,t,n){e.exports=n(0)(15)},function(e,t,n){e.exports=n(0)(178)},function(e,t,n){e.exports=n(0)(63)},function(e,t,n){e.exports=n(0)(77)},function(e,t,n){e.exports=n(0)(78)}],[23]);